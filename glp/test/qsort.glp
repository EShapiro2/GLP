% qsort.glp - Sorting algorithms in GLP
%
% Multiple sorting implementations demonstrating different approaches



% ===== QUICKSORT =====

quicksort(Unsorted, Sorted?) :-
	qsort(Unsorted?, Sorted, []).
qsort([X | Unsorted], Sorted?, Rest) :-
	number(X?) |
	partition(Unsorted?, X?, Smaller, Larger),
	qsort(Smaller?, Sorted, [X? | Sorted1?]),
	qsort(Larger?, Sorted1, Rest?).
qsort([ ], Rest?, Rest).


partition ([X | Xs], A, Smaller?, [X? | Larger?]) :-
	A? < X? | partition (Xs?, A?, Smaller, Larger).
partition ([X | Xs], A, [X? | Smaller?], Larger?) :-
	A? >= X? | partition (Xs?, A?, Smaller, Larger).
partition ([ ], A , [ ], [ ]) :- number(A?) | true.



run_qsort(true).
run_qsort((A,B)) :- run_qsort(A?), run_qsort(B?).
run_qsort(A) :- otherwise | reduce_qsort(A?,B), run_qsort(B?).


reduce_qsort(quicksort(Unsorted, Sorted?),	qsort(Unsorted?, Sorted, [])).

reduce_qsort(qsort([X | Unsorted], Sorted?, Rest),(partition(Unsorted?, X?, Smaller, Larger),
	qsort(Smaller?, Sorted, [X? | Sorted1?]),
	qsort(Larger?, Sorted1, Rest?))) :-
	number(X?) | true.
reduce_qsort(qsort([ ], Rest?, Rest), true).

reduce_qsort(partition ([X | Xs], A, Smaller?, [X? | Larger?]),partition (Xs?, A?, Smaller, Larger)) :-
	A? < X? | true.
reduce_qsort(partition ([X | Xs], A, [X? | Smaller?], Larger?),partition (Xs?, A?, Smaller, Larger)) :-
	A? >= X? | true.
reduce_qsort(partition ([ ], A , [ ], [ ]), true) :- number(A?) | true.


run1_qsort(true).
run1_qsort((A,B)) :- run1_qsort(A?), run1_qsort(B?).
run1_qsort(A) :- otherwise | reduce1_qsort(A?,B), run1_qsort(B?).



reduce1_qsort(run_qsort(true),true).
reduce1_qsort(run_qsort((A,B)),(run_qsort(A?), run_qsort(B?))).
reduce1_qsort(run_qsort(A),(reduce_qsort(A?,B), run_qsort(B?))) :- otherwise | true.



reduce1_qsort(reduce_qsort(quicksort(Unsorted, Sorted?),	qsort(Unsorted?, Sorted, [])),true).

reduce1_qsort(reduce_qsort(qsort([X | Unsorted], Sorted?, Rest),(partition(Unsorted?, X?, Smaller, Larger),
	qsort(Smaller?, Sorted, [X? | Sorted1?]),
	qsort(Larger?, Sorted1, Rest?))),true) :-
	number(X?) | true.
reduce1_qsort(reduce_qsort(qsort([ ], Rest?, Rest),true), true).

reduce1_qsort(reduce_qsort(partition ([X | Xs], A, Smaller?, [X? | Larger?]),partition (Xs?, A?, Smaller, Larger)),true) :-
	A? < X? | true.
reduce1_qsort(reduce_qsort(partition ([X | Xs], A, [X? | Smaller?], Larger?),partition (Xs?, A?, Smaller, Larger)),true) :-
	A? >= X? | true.
reduce1_qsort(reduce_qsort(partition ([ ], A , [ ], [ ]), true),true) :- number(A?) | true.


