% isort.glp - Sorting algorithms in GLP
%
% Multipl


% ===== INSERTION SORT =====
% Simple sorting by inserting elements one at a time

% insertion_sort(List?, Sorted)
insertion_sort([], []).
insertion_sort([X | Xs], Sorted?) :-
    insertion_sort(Xs?, SortedTail),
    insert(X?, SortedTail?, Sorted).

% insert(Elem?, SortedList?, Result)
% Insert element into sorted list maintaining order
insert(X, [], [X?]).
insert(X, [Y | Ys], [X?| [Y? | Ys?]]) :-
    X? < Y? |
    true.
insert(X, [Y | Ys], [Y? | Zs?]) :-
    X? >= Y? |
    insert(X?, Ys?, Zs).

% ===== METAINTERPRETER (isort-specific) =====
run_isort(true).
run_isort((A, B)) :- run_isort(A?), run_isort(B?).
run_isort(A) :- otherwise | clause_isort(A?, B), run_isort(B?).

clause_isort(insertion_sort([], []),true).
clause_isort(insertion_sort([X | Xs], Sorted?),(insertion_sort(Xs?, SortedTail), insert(X?, SortedTail?, Sorted))).
clause_isort(insert(X, [], [X?]) , true).
clause_isort(insert(X, [Y | Ys], [X?| [Y? | Ys?]]) ,true) :-  X? < Y? | true.
clause_isort(insert(X, [Y | Ys], [Y? | Zs?]) , insert(X?, Ys?, Zs)) :-  X? >= Y? |  true.
