%% reverse.glp - List reversal traces
%% Comparing naive O(n²) vs accumulator O(n) implementations

%% ============================================================
%% Test 1: Naive reverse - O(n²)
%% Goal: reverse_naive([a,b,c], R1).
%% Result: R1 = [c, b, a]
%% ============================================================

reverse_naive([a, b, c], R1) :- reverse_naive([b, c], X1), append(X1?, [a], X2)
reverse_naive([b, c], X1) :- reverse_naive([c], X3), append(X3?, [b], X4)
append(X1?, [a], X2) → suspended
reverse_naive([c], X3) :- reverse_naive([], X5), append(X5?, [c], X6)
append(X3?, [b], X4) → suspended
reverse_naive([], X5) :- true
append([], [c], X6) :- true
append([c], [b], X4) :- append([], [b], X7)
append([c | X7?], [a], X2) :- append(X7?, [a], X8)
append([], [b], X7) :- true
append([b], [a], X8) :- append([], [a], X9)
append([], [a], X9) :- true

R1 = [c, b, a]
→ succeeds

%% ============================================================
%% Test 2: Accumulator reverse - O(n)
%% Goal: reverse([a,b,c], R2).
%% Result: R2 = [c, b, a]
%% ============================================================

reverse([a, b, c], R2) :- reverse_acc([a, b, c], [], X1)
reverse_acc([a, b, c], [], X1) :- reverse_acc([b, c], [a | []], X2)
reverse_acc([b, c], [a | []], X2) :- reverse_acc([c], [b | [a | []]], X3)
reverse_acc([c], [b | [a | []]], X3) :- reverse_acc([], [c | [b | [a | []]]], X4)
reverse_acc([], [c | [b | [a | []]]], X4) :- true

R2 = [c, b, a]
→ succeeds
