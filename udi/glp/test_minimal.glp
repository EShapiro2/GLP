p(X?) :- q(Y), r(Y?,X).
q(a).
r(a,b).

p1(X?) :- r(Y?,X), q(Y).

p2(X?) :- q1(f(Y)), r1(f(Y?), X).
q1(f(a)).
r1(f(a),b).

p3(X?) :- r1(f(Y?),X), q1(f(Y)).
