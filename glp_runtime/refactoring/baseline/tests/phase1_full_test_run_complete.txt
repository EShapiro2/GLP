00:00 [32m+0[0m: [1m[90mloading test/lint/linter_ok_test.dart[0m[0m                                                                                                                                                        00:00 [32m+0[0m: [1m[90mloading test/lint/linter_suspend_once_test.dart[0m[0m                                                                                                                                              00:00 [32m+0[0m: test/lint/linter_suspend_once_test.dart: Multiple SuspendEnd or ClauseTry after SuspendEnd is flagged[0m                                                                                        00:00 [32m+1[0m: test/lint/linter_ok_test.dart: Valid shape: head/guards only pre-commit; single SuspendEnd after clauses[0m                                                                                     00:00 [32m+2[0m: test/lint/linter_body_precommit_test.dart: Body op before commit is flagged[0m                                                                                                                  00:00 [32m+3[0m: test/smoke_test.dart: project skeleton exists[0m                                                                                                                                                00:00 [32m+4[0m: test/smoke_test.dart: project skeleton exists[0m                                                                                                                                                00:00 [32m+4[0m: [1m[90mloading test/srsw_test.dart[0m[0m                                                                                                                                                                  00:00 [32m+4[0m: test/srsw_test.dart: SRSW violation: repeated variable should be rejected[0m                                                                                                                    00:00 [32m+4[0m: test/srsw_test.dart: SRSW violation: repeated variable should be rejected[0m                                                                                                                    

Testing SRSW violation: same(f(X, X))
00:00 [32m+5[0m: test/srsw_test.dart: SRSW violation: repeated variable should be rejected[0m                                                                                                                    00:00 [32m+5[0m: test/srsw_test.dart: SRSW violation: repeated variable should be rejected[0m                                                                                                                    
âœ… Correctly rejected repeated variable
00:00 [32m+6[0m: test/bytecode/union_end_to_end_test.dart: Union across two SUSPEND_READY clauses then single suspend at end[0m                                                                                  00:00 [32m+6[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound constant[0m                                                                                                    

=== KNOWN INSTRUCTION TEST: Bound Constant ===
Starting p(X) where X = a (known)
00:00 [32m+6[0m: test/bytecode/union_end_to_end_test.dart: Union across two SUSPEND_READY clauses then single suspend at end[0m                                                                                  
>>> TRY: Goal 1000 at PC 0
>>> SUSPENSION: Goal 1000 suspended on readers: {41, 42}
00:00 [32m+7[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound constant[0m                                                                                                    00:00 [32m+7[0m: test/bytecode/union_end_to_end_test.dart: Commit applies ÏƒÌ‚w: wake suspended readers for those writers[0m                                                                                       
>>> TRY: Goal 2000 at PC 0
>>> REDUCTION: Goal 2000 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 3000 awakened at PC 0
>>> ACTIVATION: Goal 4000 awakened at PC 0
00:00 [32m+8[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound constant[0m                                                                                                    00:00 [32m+8[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound constant[0m                                                                                                    
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Known | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Known instruction succeeded for bound constant

00:00 [32m+9[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound constant[0m                                                                                                    00:00 [32m+9[0m: test/bytecode/known_instruction_test.dart: Known instruction: fails for unbound writer[0m                                                                                                       00:00 [32m+9[0m: test/bytecode/known_instruction_test.dart: Known instruction: fails for unbound writer[0m                                                                                                       

=== KNOWN INSTRUCTION TEST: Unbound Writer ===
Starting p(X) where X is unbound (not known)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Known | Si={} U={} inBody=false
  [G100] PC=7 ClauseTry | Si={} U={} inBody=false
  [G100] PC=8 Otherwise | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=10 SuspendEnd | Si={} U={} inBody=true
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: 1
âœ“ Known instruction failed for unbound writer, otherwise clause executed

00:00 [32m+10[0m: test/bytecode/known_instruction_test.dart: Known instruction: fails for unbound writer[0m                                                                                                      00:00 [32m+10[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound structure with unbound variable[0m                                                                            00:00 [32m+10[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound structure with unbound variable[0m                                                                            

=== KNOWN INSTRUCTION TEST: Known Structure (even with unbound internals) ===
Starting p(X) where X = f(Y) with Y unbound
X is known (bound to structure) even though Y inside is unbound
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Known | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Known instruction succeeded - X is known even with unbound internals

00:00 [32m+11[0m: test/bytecode/known_instruction_test.dart: Known instruction: succeeds for bound structure with unbound variable[0m                                                                            00:00 [32m+11[0m: [1m[90mloading test/bytecode/env_frame_test.dart[0m[0m                                                                                                                                                   00:00 [32m+11[0m: test/bytecode/env_frame_test.dart: Allocate creates environment frame with permanent variables[0m                                                                                              00:00 [32m+11[0m: test/bytecode/env_frame_test.dart: Allocate creates environment frame with permanent variables[0m                                                                                              

=== ALLOCATE TEST: Environment frame creation ===
Starting p('a') - should allocate frame and succeed...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Allocate | Si={} U={} inBody=true
  [G100] PC=4 Allocate 3 slots - created frame with CP=5
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Allocate instruction executed successfully

00:00 [32m+12[0m: test/bytecode/commit_before_body_heap_test.dart: Pre-commit: body ops ignored; no heap mutation[0m                                                                                             00:00 [32m+12[0m: test/bytecode/env_frame_test.dart: Deallocate removes environment frame[0m                                                                                                                     

=== DEALLOCATE TEST: Environment frame removal ===
Starting p('b') - should allocate, deallocate, and succeed...
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G200] PC=4 Allocate 2 slots - created frame with CP=5
  [G200] PC=5 Deallocate - restored CP=5, parent frame=false
Goals executed: 1
âœ“ Deallocate instruction executed successfully

00:00 [32m+13[0m: test/bytecode/commit_before_body_heap_test.dart: Pre-commit: body ops ignored; no heap mutation[0m                                                                                             00:00 [32m+13[0m: test/bytecode/env_frame_test.dart: Nested environment frames (allocate within allocate)[0m                                                                                                     

=== NESTED FRAMES TEST: Multiple allocations ===
Starting p('c') - should handle nested frames correctly...
>>> TRY: Goal 300 at PC 0
>>> REDUCTION: Goal 300 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G300] PC=4 Allocate 1 slots - created frame with CP=5
  [G300] PC=5 Allocate 2 slots - created frame with CP=6
  [G300] PC=6 Deallocate - restored CP=5, parent frame=true
  [G300] PC=7 Deallocate - restored CP=5, parent frame=false
Goals executed: 1
âœ“ Nested environment frames handled correctly

00:00 [32m+14[0m: test/bytecode/commit_before_body_heap_test.dart: Pre-commit: body ops ignored; no heap mutation[0m                                                                                             00:00 [32m+14[0m: test/bytecode/commit_before_body_heap_test.dart: Pre-commit: body ops ignored; no heap mutation[0m                                                                                             
>>> TRY: Goal 1 at PC 0
00:00 [32m+15[0m: test/bytecode/scheduler_suspend_wake_test.dart: Scheduler drains FIFO activations after a single reader bind[0m                                                                                00:00 [32m+15[0m: test/bytecode/commit_before_body_heap_test.dart: Post-commit: body ops mutate heap (const and struct)[0m                                                                                       
>>> TRY: Goal 2 at PC 0
>>> REDUCTION: Goal 2 at PC 4 (commit succeeded, ÏƒÌ‚w has 2 bindings)
00:00 [32m+16[0m: test/bytecode/scheduler_suspend_wake_test.dart: Scheduler drains FIFO activations after a single reader bind[0m                                                                                00:00 [32m+16[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground constant[0m                                                                                                

=== GROUND INSTRUCTION TEST: Ground Constant ===
Starting p(X) where X = a (ground constant)
00:00 [32m+16[0m: test/bytecode/scheduler_suspend_wake_test.dart: Scheduler drains FIFO activations after a single reader bind[0m                                                                                
>>> TRY: Goal 101 at PC 1
>>> SUSPENSION: Goal 101 suspended on readers: {4200}
>>> TRY: Goal 202 at PC 1
>>> SUSPENSION: Goal 202 suspended on readers: {4200}
>>> TRY: Goal 101 at PC 1
>>> SUSPENSION: Goal 101 suspended on readers: {4200}
>>> TRY: Goal 202 at PC 1
>>> SUSPENSION: Goal 202 suspended on readers: {4200}
00:00 [32m+17[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground constant[0m                                                                                                00:00 [32m+17[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground constant[0m                                                                                                
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Ground instruction succeeded for ground constant

00:00 [32m+18[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground constant[0m                                                                                                00:00 [32m+18[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for unbound writer[0m                                                                                                    00:00 [32m+18[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for unbound writer[0m                                                                                                    

=== GROUND INSTRUCTION TEST: Unbound Writer ===
Starting p(X) where X is unbound (not ground)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=7 ClauseTry | Si={} U={} inBody=false
  [G100] PC=8 Otherwise | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=10 SuspendEnd | Si={} U={} inBody=true
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: 1
âœ“ Ground instruction failed for unbound writer, otherwise clause executed

00:00 [32m+19[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for unbound writer[0m                                                                                                    00:00 [32m+19[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground structure[0m                                                                                               00:00 [32m+19[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground structure[0m                                                                                               

=== GROUND INSTRUCTION TEST: Ground Structure ===
Starting p(X) where X = f(a, b) (ground structure)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Ground instruction succeeded for ground structure

00:00 [32m+20[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: succeeds for ground structure[0m                                                                                               00:00 [32m+20[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for structure with unbound variable[0m                                                                                   00:00 [32m+20[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for structure with unbound variable[0m                                                                                   

=== GROUND INSTRUCTION TEST: Non-Ground Structure ===
Starting p(X) where X = f(Y) with Y unbound (not ground)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=7 ClauseTry | Si={} U={} inBody=false
  [G100] PC=8 Otherwise | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=10 SuspendEnd | Si={} U={} inBody=true
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: 1
âœ“ Ground instruction failed for non-ground structure

00:00 [32m+21[0m: test/bytecode/ground_instruction_test.dart: Ground instruction: fails for structure with unbound variable[0m                                                                                   00:00 [32m+21[0m: [1m[90mloading test/bytecode/fairness_scheduler_loop_test.dart[0m[0m                                                                                                                                     00:00 [32m+21[0m: test/bytecode/fairness_scheduler_loop_test.dart: Two goals alternate due to 26-step tail yield[0m                                                                                              00:00 [32m+21[0m: test/bytecode/utility_instructions_test.dart: Nop: no operation, just advances PC[0m                                                                                                           

=== NOP TEST: No operation ===
00:00 [32m+21[0m: test/bytecode/fairness_scheduler_loop_test.dart: Two goals alternate due to 26-step tail yield[0m                                                                                              
>>> TRY: Goal 1 at PC 0
>>> TRY: Goal 2 at PC 0
00:00 [32m+21[0m: test/bytecode/utility_instructions_test.dart: Nop: no operation, just advances PC[0m                                                                                                           
Starting p with 3 nops
00:00 [32m+21[0m: test/bytecode/fairness_scheduler_loop_test.dart: Two goals alternate due to 26-step tail yield[0m                                                                                              
>>> TRY: Goal 1 at PC 0
>>> TRY: Goal 2 at PC 0
00:00 [32m+22[0m: test/bytecode/utility_instructions_test.dart: Nop: no operation, just advances PC[0m                                                                                                           00:00 [32m+22[0m: test/bytecode/utility_instructions_test.dart: Nop: no operation, just advances PC[0m                                                                                                           
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 Nop | Si={} U={} inBody=true
  [G100] PC=4 Nop | Si={} U={} inBody=true
  [G100] PC=5 Nop | Si={} U={} inBody=true
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Nop instruction works correctly

00:00 [32m+23[0m: test/bytecode/asm_smoke_test.dart: Assembler: union across clauses then suspend; wake FIFO once[0m                                                                                             00:00 [32m+23[0m: test/bytecode/utility_instructions_test.dart: Halt: terminates execution[0m                                                                                                                    

=== HALT TEST: Terminate execution ===
Starting p with halt
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 Halt | Si={} U={} inBody=true
Goals executed: 1
âœ“ Halt instruction terminates correctly

00:00 [32m+24[0m: test/bytecode/asm_smoke_test.dart: Assembler: union across clauses then suspend; wake FIFO once[0m                                                                                             00:00 [32m+24[0m: test/bytecode/utility_instructions_test.dart: Halt vs Proceed: both terminate[0m                                                                                                               

=== HALT VS PROCEED TEST ===
Testing halt...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 Halt | Si={} U={} inBody=true
âœ“ Halt terminated after 1 execution
Testing proceed...
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
âœ“ Proceed terminated after 1 execution
âœ“ Both Halt and Proceed terminate execution

00:00 [32m+25[0m: test/bytecode/asm_smoke_test.dart: Assembler: union across clauses then suspend; wake FIFO once[0m                                                                                             00:00 [32m+25[0m: test/bytecode/spec_control_flow_test.dart: ClauseNext: moves to next clause and accumulates Si into U[0m                                                                                       

=== CLAUSENEXT TEST: Spec-compliant clause control flow ===
Starting p(X?) with unbound reader...
00:00 [32m+25[0m: test/bytecode/asm_smoke_test.dart: Assembler: union across clauses then suspend; wake FIFO once[0m                                                                                             
>>> TRY: Goal 6000 at PC 0
  [G6000] PC=0 Label | Si={} U={} inBody=false
  [G6000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=2 GuardNeedReader | Si={} U={} inBody=false
  [G6000] PC=3 UnionSiAndGoto | Si={501} U={} inBody=false
  [G6000] PC=4 Label | Si={} U={501} inBody=false
  [G6000] PC=5 ClauseTry | Si={} U={501} inBody=false
  [G6000] PC=6 GuardNeedReader | Si={} U={501} inBody=false
  [G6000] PC=7 UnionSiAndGoto | Si={502} U={501} inBody=false
  [G6000] PC=8 Label | Si={} U={501, 502} inBody=false
  [G6000] PC=9 SuspendEnd | Si={} U={501, 502} inBody=false
>>> SUSPENSION: Goal 6000 suspended on readers: {501, 502}
00:00 [32m+26[0m: test/bytecode/spec_control_flow_test.dart: ClauseNext: moves to next clause and accumulates Si into U[0m                                                                                       00:00 [32m+26[0m: test/bytecode/asm_smoke_test.dart: Assembler: commit wakes readers bound to writers in ÏƒÌ‚w[0m                                                                                                  
>>> TRY: Goal 7000 at PC 0
  [G7000] PC=0 Label | Si={} U={} inBody=false
  [G7000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G7000] PC=2 HeadBindWriter | Si={} U={} inBody=false
  [G7000] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 7000 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 9001 awakened at PC 0
>>> ACTIVATION: Goal 9002 awakened at PC 0
  [G7000] PC=4 Proceed | Si={} U={} inBody=true
00:00 [32m+27[0m: test/bytecode/spec_control_flow_test.dart: ClauseNext: moves to next clause and accumulates Si into U[0m                                                                                       00:00 [32m+27[0m: test/bytecode/spec_control_flow_test.dart: ClauseNext: moves to next clause and accumulates Si into U[0m                                                                                       
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={2} U={} inBody=false
  [G100] PC=9 ClauseTry | Si={} U={2} inBody=false
  [G100] PC=10 Otherwise | Si={} U={2} inBody=false
  [G100] PC=14 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goals executed: 1
âœ“ ClauseNext correctly transitioned to next clause

00:00 [32m+28[0m: test/bytecode/spec_control_flow_test.dart: ClauseNext: moves to next clause and accumulates Si into U[0m                                                                                       00:00 [32m+28[0m: test/bytecode/spec_control_flow_test.dart: NoMoreClauses: suspends when U non-empty[0m                                                                                                         00:00 [32m+28[0m: test/bytecode/spec_control_flow_test.dart: NoMoreClauses: suspends when U non-empty[0m                                                                                                         

=== NOMORECLAUSES TEST: Suspension on U ===
Starting p(X?) with unbound reader - should suspend...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
  [G100] PC=4 HeadConstant | Si={2} U={} inBody=false
  [G100] PC=5 Commit | Si={2} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={2} inBody=false
  [G100] PC=9 HeadConstant | Si={} U={2} inBody=false
  [G100] PC=10 Commit | Si={2} U={2} inBody=false
  [G100] PC=13 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goals executed: 1
ROQ has suspension notes: true
âœ“ NoMoreClauses correctly suspended goal on U

00:00 [32m+29[0m: test/bytecode/spec_control_flow_test.dart: NoMoreClauses: suspends when U non-empty[0m                                                                                                         00:00 [32m+29[0m: test/bytecode/spec_control_flow_test.dart: NoMoreClauses: fails when U empty[0m                                                                                                                00:00 [32m+29[0m: test/bytecode/spec_control_flow_test.dart: NoMoreClauses: fails when U empty[0m                                                                                                                

=== NOMORECLAUSES TEST: Failure when U empty ===
Starting p('b') when program expects 'a' - should fail...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=8 NoMoreClauses | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: 1
âœ“ NoMoreClauses correctly failed when U empty

00:00 [32m+30[0m: test/bytecode/list_instructions_test.dart: HeadNil: matches empty list [][0m                                                                                                                   00:00 [32m+30[0m: test/bytecode/spec_control_flow_test.dart: Spec-compliant control flow: full clause selection example[0m                                                                                       

=== SPEC CONTROL FLOW: Full example with new instructions ===
Test 1: p('a', Y?) where Y unbound...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 GetVariable | Si={} U={} inBody=false
  [G100] PC=4 Ground | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={4} U={} inBody=false
  [G100] PC=10 ClauseTry | Si={} U={4} inBody=false
  [G100] PC=11 HeadConstant | Si={} U={4} inBody=false
  [G100] PC=19 ClauseTry | Si={} U={4} inBody=false
  [G100] PC=20 Otherwise | Si={} U={4} inBody=false
  [G100] PC=24 NoMoreClauses | Si={} U={4} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {4}
  Result: 1 executions
  âœ“ Clause 1 failed (ground), otherwise succeeded
Test 2: p('c', Y?) where X doesn't match any clause...
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 21 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  Result: 1 executions
  âœ“ All clauses failed head match, otherwise succeeded
âœ“ Spec-compliant control flow working correctly

00:00 [32m+31[0m: test/bytecode/list_instructions_test.dart: HeadNil: matches empty list [][0m                                                                                                                   00:00 [32m+31[0m: test/bytecode/list_instructions_test.dart: HeadNil: matches empty list [][0m                                                                                                                   

=== HEADNIL TEST: Match [] ===
Starting p([])
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadNil | Si={} U={} inBody=false
  HeadNil: argSlot=0, isClauseVar=false
  HeadNil: arg=Instance of '_ArgInfo'
  HeadNil: arg is writer 1
  HeadNil: writer 1 value = Const([])
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ HeadNil matched empty list

00:00 [32m+32[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Single variable allocation and binding[0m                                                                           00:00 [32m+32[0m: test/bytecode/list_instructions_test.dart: HeadNil: fails for non-empty list[0m                                                                                                                

=== HEADNIL TEST: Fail on [a] ===
Starting p([a]) - should fail HeadNil and use otherwise
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadNil | Si={} U={} inBody=false
  HeadNil: argSlot=0, isClauseVar=false
  HeadNil: arg=Instance of '_ArgInfo'
  HeadNil: arg is writer 1
  HeadNil: writer 1 value = [|](Const(a),Const([]))
  HeadNil: value is struct, failing
  [G100] PC=6 ClauseTry | Si={} U={} inBody=false
  [G100] PC=7 Otherwise | Si={} U={} inBody=false
  [G100] PC=8 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 8 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=9 SuspendEnd | Si={} U={} inBody=true
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: 1
âœ“ HeadNil correctly failed for non-empty list

00:00 [32m+33[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Single variable allocation and binding[0m                                                                           00:00 [32m+33[0m: test/bytecode/list_instructions_test.dart: HeadList: matches list [a|Xs] and extracts head/tail[0m                                                                                             

=== HEADLIST TEST: Match [a|Xs] ===
Starting p([a, b])
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadList | Si={} U={} inBody=false
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ HeadList matched list structure

00:00 [32m+34[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Single variable allocation and binding[0m                                                                           00:00 [32m+35[0m: test/bytecode/list_instructions_test.dart: PutNil and PutList: instructions exist and execute without error[0m                                                                                 00:00 [32m+35[0m: test/bytecode/list_instructions_test.dart: PutNil and PutList: instructions exist and execute without error[0m                                                                                 

=== PUTNIL/PUTLIST TEST: Basic execution ===
Starting p() - simple program to verify test framework works
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 Proceed | Si={} U={} inBody=true
00:00 [32m+36[0m: test/bytecode/list_instructions_test.dart: PutNil and PutList: instructions exist and execute without error[0m                                                                                 00:00 [32m+36[0m: test/bytecode/list_instructions_test.dart: PutNil and PutList: instructions exist and execute without error[0m                                                                                 
Goals executed: 1
âœ“ PutNil and PutList instructions exist (tested in integration)

00:00 [32m+37[0m: test/bytecode/list_instructions_test.dart: PutNil and PutList: instructions exist and execute without error[0m                                                                                 00:00 [32m+37[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Multiple variable allocations have consistent pattern[0m                                                            00:00 [32m+38[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Multiple variable allocations have consistent pattern[0m                                                            00:00 [32m+38[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Unbound variable behavior[0m                                                                                        00:00 [32m+39[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Unbound variable behavior[0m                                                                                        00:00 [32m+39[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility VarRef creation and usage[0m                                                                                        00:00 [32m+40[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility VarRef creation and usage[0m                                                                                        00:00 [32m+40[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Dereferencing simple chain[0m                                                                                       00:00 [32m+41[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Dereferencing simple chain[0m                                                                                       00:00 [32m+41[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Dereferencing stops at unbound variable[0m                                                                          00:00 [32m+42[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Dereferencing stops at unbound variable[0m                                                                          00:00 [32m+42[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Ground term checking[0m                                                                                             00:00 [32m+43[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Ground term checking[0m                                                                                             00:00 [32m+43[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility ROQ suspension management[0m                                                                                        00:00 [32m+44[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility ROQ suspension management[0m                                                                                        00:00 [32m+44[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Path compression optimization[0m                                                                                    00:00 [32m+45[0m: test/refactoring/heap_compatibility_test.dart: Heap V1 vs V2 Compatibility Path compression optimization[0m                                                                                    00:00 [32m+45[0m: test/refactoring/heap_compatibility_test.dart: Performance Comparison Lookup performance: V1 O(n) vs V2 O(1)[0m                                                                                00:00 [32m+45[0m: test/refactoring/heap_compatibility_test.dart: Performance Comparison Lookup performance: V1 O(n) vs V2 O(1)[0m                                                                                
V1 lookup time (O(n)): 3769Âµs
V2 lookup time (O(1)): 20Âµs
00:00 [32m+46[0m: test/custom/merge_123_ab_test.dart: Merge: merge([1,2,3],[a,b],Xs) with full trace[0m                                                                                                          00:00 [32m+46[0m: test/custom/merge_123_ab_test.dart: Merge: merge([1,2,3],[a,b],Xs) with full trace[0m                                                                                                          

======================================================================
MERGE TEST: merge([1,2,3], [a,b], Xs)
Expected: Xs = [1, a, 2, b, 3] (alternating elements)
======================================================================

HEAP SETUP:
  List1 (W10/R11) = [1,2,3]
  List2 (W20/R21) = [a,b]
  Result Xs (W30/R31) = unbound

======================================================================
EXECUTION TRACE
======================================================================

Starting goal 100: merge(R11, R21, W30)

00:00 [32m+46[0m: test/custom/simple_metainterp_test.dart: Simple metainterpreter: run(p(X)) with clause(p(a), true)[0m                                                                                          

======================================================================
SIMPLE METAINTERPRETER TEST
Object program: clause(p(a), true).
Metainterpreter: run(true). run(A) :- otherwise | clause(A?,B), run(B?).
Goal: run(p(X))
Expected: X binds to a
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

PROGRAM LABELS:
00:00 [32m+46[0m: test/custom/merge_123_ab_test.dart: Merge: merge([1,2,3],[a,b],Xs) with full trace[0m                                                                                                          
>>> TRY: Goal 100 at PC 0
00:00 [32m+46[0m: test/custom/simple_metainterp_test.dart: Simple metainterpreter: run(p(X)) with clause(p(a), true)[0m                                                                                          
  clause/2 => PC 0
  clause/2_end => PC 7
  run/1 => PC 9
  run/1_clause2 => PC 14
  run/1_end => PC 24

Goal: run(p(X)) at PC 9

00:00 [32m+46[0m: test/custom/merge_123_ab_test.dart: Merge: merge([1,2,3],[a,b],Xs) with full trace[0m                                                                                                          
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = .(Const(1),R12), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 30, bound=false
  HeadStructure: WRITE mode for unbound writer 30
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutReader: value=21, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 21
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = .(Const(a),R22), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: R22, 2: 12, 3: 1002}
  [G100] PutReader: value=12, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 12
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: R22, 2: 12, 3: 1002}
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: R22, 2: 12, 3: 1002}
  [G100] PutWriter: value=1002, type=int
  [G100] PutWriter: storing writer 1002 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 12 -> writer 13
  HeadStructure: writer 13 value = .(Const(2),R14), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(2), 1: R14, 2: 22, 3: 1004}
  [G100] PutReader: value=22, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 22
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(2), 1: R14, 2: 22, 3: 1004}
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(2), 1: R14, 2: 22, 3: 1004}
  [G100] PutWriter: value=1004, type=int
  [G100] PutWriter: storing writer 1004 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 22 -> writer 23
  HeadStructure: writer 23 value = .(Const(b),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1004, bound=false
  HeadStructure: WRITE mode for unbound writer 1004
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: Const(null), 2: 14, 3: 1006}
  [G100] PutReader: value=14, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 14
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: Const(null), 2: 14, 3: 1006}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1008/R1009 for constant
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: Const(null), 2: 14, 3: 1006}
  [G100] PutWriter: value=1006, type=int
  [G100] PutWriter: storing writer 1006 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 14 -> writer 15
  HeadStructure: writer 15 value = .(Const(3),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1006, bound=false
  HeadStructure: WRITE mode for unbound writer 1006
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(3), 1: Const(null), 2: 1009, 3: 1010}
  [G100] PutReader: value=1009, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1009
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(3), 1: Const(null), 2: 1009, 3: 1010}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1012/R1013 for constant
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(3), 1: Const(null), 2: 1009, 3: 1010}
  [G100] PutWriter: value=1010, type=int
  [G100] PutWriter: storing writer 1010 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1013 -> writer 1012
  HeadStructure: writer 1012 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1009: value=Const(null) vs pattern=null
  [G100] PC=31 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1013: value=Const(null) vs pattern=null
  [G100] PC=32 HeadConstant | Si={} U={} inBody=false
  [G100] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=34 Proceed | Si={} U={} inBody=true

======================================================================
RESULTS
======================================================================
Goals executed: [100]
Xs bound: true
Xs value: .(Const(1),W1000)

Extracted list: [1]

Expected: [1, a, 2, b, 3]
00:00 [32m+46[0m: test/custom/simple_metainterp_test.dart: Simple metainterpreter: run(p(X)) with clause(p(a), true)[0m                                                                                          
>>> TRY: Goal 100 at PC 9
  [G100] PC=9 Label | Si={} U={} inBody=false
  [G100] PC=10 ClauseTry | Si={} U={} inBody=false
  [G100] PC=11 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 11: value=p(W1) vs pattern=true
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 Otherwise | Si={} U={} inBody=false
  [G100] PC=17 GetVariable | Si={} U={} inBody=false
  [G100] PC=18 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 18 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=19 PutReader | Si={} U={} inBody=true
  [G100] PC=19 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G100] PutReader: value=11, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 20
  [G100] PC=20 PutWriter | Si={} U={} inBody=true
  [G100] PC=20 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 21
  [G100] PutWriter: continuing to PC 21
  [G100] PC=21 Spawn | Si={} U={} inBody=true
  [G100] PC=22 PutReader | Si={} U={} inBody=true
  [G100] PC=22 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 23
  [G100] PC=23 Requeue | Si={} U={} inBody=true
  [G100] PC=9 Label | Si={} U={} inBody=false
  [G100] PC=10 ClauseTry | Si={} U={} inBody=false
  [G100] PC=11 HeadConstant | Si={} U={} inBody=false
  [G100] PC=12 Commit | Si={1001} U={} inBody=false
  [G100] PC=15 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=16 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=25 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 0
  [G10000] PC=0 Label | Si={} U={} inBody=false
  [G10000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10000] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
  [G10000] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 9
  [G10000] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 9
  [G100] PC=9 Label | Si={} U={} inBody=false
  [G100] PC=10 ClauseTry | Si={} U={} inBody=false
  [G100] PC=11 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=Const(true) vs pattern=true
  [G100] PC=12 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 12 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=13 Proceed | Si={} U={} inBody=true
Goals executed: [100, 10000, 100]
Total executions: 3

======================================================================
RESULTS
======================================================================
X (W1) bound: true
00:00 [32m+46[0m[31m -1[0m: test/custom/simple_metainterp_test.dart: Simple metainterpreter: run(p(X)) with clause(p(a), true)[0m                                                                                       
X value: Const(a)
âœ“ X correctly bound to a

âœ“ Metainterpreter successfully executed!
00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        

======================================================================
METAINTERPRETER TEST: MERGE
Object program:
  clause(merge([X|Xs],Ys,[X?|Zs?]), merge(Ys?,Xs?,Zs)).
  clause(merge(Xs,[Y|Ys],[Y?|Zs?]), merge(Xs?,Ys?,Zs)).
  clause(merge([],[],[]), true).
Metainterpreter:
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run(merge([a],[b],Zs))
Expected: Zs = [a,b] (alternating merge of two lists)
======================================================================

PROGRAM LABELS:
  clause/2 => PC 0
  clause/2_c2 => PC 18
  clause/2_c3 => PC 36
  clause/2_end => PC 45
  run/1 => PC 47
  run/1_c2 => PC 52
  run/1_c3 => PC 62
  run/1_end => PC 72

STRUCTURES:
  [a] = writer 10 bound to [|](a, [])
  [b] = writer 12 bound to [|](b, [])
  Zs = writer 14 (unbound)
  merge([a],[b],Zs) = reader 17

Starting: run(merge([a],[b],Zs)) at PC 47

00:00 [32m+47[0m[31m -1[0m: test/custom/merge_123_ab_test.dart: Merge: merge([1,2,3],[a,b],Xs) with full trace [1m[31m[E][0m[0m                                                                                                   
  Expected: [1, 'a', 2, 'b', 3]
    Actual: [1]
     Which: at location [1] is [1] which shorter than expected
  Should alternate: 1, a, 2, b, 3
  
  package:matcher                           expect
  test/custom/merge_123_ab_test.dart 193:7  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_123_ab_test.dart -p vm --plain-name 'Merge: merge([1,2,3],[a,b],Xs) with full trace'
00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 17: value=merge(W10,W12,W14) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(W10,W12,W14), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 17}
  [G100] PutReader: value=17, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 17
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 17}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 17, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1001} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 0
  [G10000] PC=0 Label | Si={} U={} inBody=false
  [G10000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(W10,W12,W14), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10000] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W10 = [|](Const(a),Const([])), MATCH!
  [G10000] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10000] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10000] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10000] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G10000] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10000] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10000] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10000] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=merge(R13,R1007,W1004) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 

=== Testing List Head Extraction ===
00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  HeadStructure: READ mode, reader 1001 -> writer 1000
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
Program: first([a|_], X).
00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  HeadStructure: writer 1000 value = merge(R13,R1007,W1004), expecting ,/2
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
Goal: first(L, X) where L=[a,b] and X is writer

00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1001}
  [G100] PutReader: value=1001, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 68
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
Heap Setup:
  Writer 1 (X) - unbound
00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1001}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1001, 1: 1008}
  [G100] PutReader: value=1008, wc=Instance of 'WriterCell', wc.readerId=1009
  [G100] PutReader: Setting argReaders[0] = 1009
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
  List L = [a, b] = .(Const(a),.(Const(b),Const(null)))

00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1009} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1009} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1009} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1009} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1009} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1009} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1009}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R13,R1007,W1004), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(b),Const([])), MATCH!
  [G10001] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10001] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1008, bound=false
  HeadStructure: WRITE mode for unbound writer 1008
  [G10001] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10001] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+47[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
--- Executing Goal: first([a,b], X) ---
Expected: X will be bound to 'a' (head of list)

00:00 [32m+47[0m[31m -1[0m: test/custom/metainterp_merge_test.dart: Metainterpreter with merge object program[0m                                                                                                        
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1009: value=merge(R1015,R1017,W1012) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1015,R1017,W1012), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1009}
  [G100] PutReader: value=1009, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1009
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1009}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1009, 1: 1018}
  [G100] PutReader: value=1018, wc=Instance of 'WriterCell', wc.readerId=1019
  [G100] PutReader: Setting argReaders[0] = 1019
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1019} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1019} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1019} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1019 -> writer 1018
  HeadStructure: writer 1018 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1019} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1019} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1019} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1019}
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1015,R1017,W1012), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10002] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1015,R1017,W1012), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10002] PC=37 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=38 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1015,R1017,W1012), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=39 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R1015 (ReaderTerm), expecting []
  UnifyConstant: reader 1015 bound to Const([]), matches!
  [G10002] PC=40 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=1, value=R1017 (ReaderTerm), expecting []
  UnifyConstant: reader 1017 bound to Const([]), matches!
  [G10002] PC=41 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=2, value=W1012 (WriterTerm), expecting []
  UnifyConstant: binding writer 1012 to [] in ÏƒÌ‚w
  [G10002] PC=42 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=43 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 43 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10002] PC=44 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1019: value=Const(true) vs pattern=true
  [G100] PC=50 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 50 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=51 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 100, 10001, 100, 10002, 100]
Total executions: 7

======================================================================
RESULTS
======================================================================
Zs (W14) bound: true
Zs value: [|](R1003,R1005)
  Head of Zs: R1003
  Head value: Const(a)
âœ“ First element correctly bound to a
  Tail of Zs: R1005
  Tail value: [|](R1011,R1013)
  Tail is a list!
    Tail head: R1011
    Tail head value: Const(b)
âœ“ Second element correctly bound to b
    Tail tail: R1013
    Tail tail value: Const([])
âœ“ List correctly ends with []
âœ“ Zs correctly bound to list structure

âœ“ Metainterpreter with merge passed!
âœ“ run(merge([a],[b],Zs)) executed successfully
âœ“ Zs bound to list structure [a|...]
00:00 [32m+48[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 00:00 [32m+48[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = .(Const(a),.(Const(b),Const(null))), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 UnifyVoid | Si={} U={} inBody=false
  [G100] PC=5 GetValue | Si={} U={} inBody=false
  [G100] PC=6 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 6 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=7 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer 1 bound? true
Writer 1 value: Const(a)

âœ“ List head correctly extracted: a
âœ“ Test passed!
00:00 [32m+49[0m[31m -1[0m: test/custom/list_test.dart: List matching: first([a|_], X) extracts head[0m                                                                                                                 00:00 [32m+49[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([a|b]) checks non-empty list[0m                                                                                                          00:00 [32m+49[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([a|b]) checks non-empty list[0m                                                                                                          

=== Testing List Cons Check ===
Program: is_cons([_|_]).
Goal: is_cons([a,b,c])

Heap Setup:
  List L = [a, b, c]

--- Executing Goal: is_cons([a,b,c]) ---
Expected: SUCCESS (list is non-empty)

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(a),.(Const(b),.(Const(c),Const(null)))), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 UnifyVoid | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Goals executed: [100]

âœ“ List cons check succeeded
âœ“ Test passed!
00:00 [32m+50[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([a|b]) checks non-empty list[0m                                                                                                          00:00 [32m+50[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([]) fails on empty list[0m                                                                                                               00:00 [32m+50[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([]) fails on empty list[0m                                                                                                               

=== Testing Empty List Rejection ===
Program: is_cons([_|_]).
Goal: is_cons([])

Heap Setup:
  List L = []

--- Executing Goal: is_cons([]) ---
Expected: FAIL (empty list is not a cons)

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=7 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: [100]

âœ“ Empty list correctly rejected
âœ“ Test passed!
00:00 [32m+51[0m[31m -1[0m: test/custom/list_test.dart: List matching: is_cons([]) fails on empty list[0m                                                                                                               00:00 [32m+51[0m[31m -1[0m: test/custom/list_test.dart: List construction: cons(X, Xs, [X|Xs]) builds list[0m                                                                                                           00:00 [32m+51[0m[31m -1[0m: test/custom/list_test.dart: List construction: cons(X, Xs, [X|Xs]) builds list[0m                                                                                                           

=== Testing List Construction ===
Program: cons(X, Xs, [X|Xs]).
Goal: cons(a, [b], Z) where Z is writer

Heap Setup:
  X = a
  Xs = [b]
  Z (result) - unbound

--- Executing Goal: cons(a, [b], Z) ---
Expected: Z will be bound to [a, b]

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 GetVariable | Si={} U={} inBody=false
  [G100] PC=4 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G100] PC=5 HeadReader | Si={} U={} inBody=false
  [G100] PC=6 HeadReader | Si={} U={} inBody=false
  [G100] PC=7 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 7 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=8 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer 1 bound? true
Writer 1 value: .(R4,R6)

âœ“ List correctly constructed: [a, b]
âœ“ Test passed!
00:00 [32m+52[0m[31m -1[0m: test/custom/list_test.dart: List construction: cons(X, Xs, [X|Xs]) builds list[0m                                                                                                           00:00 [32m+52[0m[31m -1[0m: test/custom/list_test.dart: List matching: match concrete list [a, b][0m                                                                                                                    00:00 [32m+52[0m[31m -1[0m: test/custom/list_test.dart: List matching: match concrete list [a, b][0m                                                                                                                    

=== Testing Concrete List Matching ===
Program: p([a, b]).
Goal: p(X) where X is writer

Heap Setup:
  Writer 1 (X) - unbound

--- Executing Goal: p(X) ---
Expected: X will be bound to [a, b]

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 BodySetStructConstArgs | Si={} U={} inBody=true
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer 1 bound? true
Writer 1 value: .(Const(a),.(Const(b),Const(null)))

âœ“ List correctly constructed: [a, b]
âœ“ Test passed!
00:00 [32m+53[0m[31m -1[0m: test/custom/list_test.dart: List matching: match concrete list [a, b][0m                                                                                                                    00:00 [32m+53[0m[31m -1[0m: [1m[90mloading test/custom/metainterp_conj_test.dart[0m[0m                                                                                                                                            00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              

======================================================================
METAINTERPRETER TEST: CONJUNCTION
Object program: clause(p(a),true). clause(q(a),true).
Metainterpreter:
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run((p(X), q(X?)))
Expected: X binds to a, both p(a) and q(a) succeed
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

PROGRAM LABELS:
  clause/2 => PC 0
  clause/2_c2 => PC 7
  clause/2_end => PC 14
  run/1 => PC 16
  run/1_c2 => PC 21
  run/1_c3 => PC 31
  run/1_end => PC 41

STRUCTURES:
  p(X) = writer 10 bound to p(W1)
  q(X?) = writer 12 bound to q(R2)
  (p(X), q(X?)) = reader 15 bound to ,(W10, W12)

Starting: run((p(X), q(X?))) at PC 16

00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        

======================================================================
METAINTERPRETER TEST: P/Q PROGRAM
Object program: p(a). p(b). q(b).
Meta-level goal: run(p(X)), run(q(X?))
Expected: X binds to a (first clause of p), q(a) fails
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

======================================================================
TEST 1: run(true) - should succeed immediately
======================================================================

00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         

======================================================================
METAINTERPRETER TEST: CIRCULAR MERGE
Object program:
  clause(merge([X|Xs],Ys,[X?|Zs?]), merge(Ys?,Xs?,Zs)).
  clause(merge(Xs,[Y|Ys],[Y?|Zs?]), merge(Xs?,Ys?,Zs)).
  clause(merge([],[],[]), true).
Metainterpreter:
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))
Expected: Creates infinite stream (circular dependency)
  Xs = [b,a,b,a,...]
  Ys = [a,b,a,b,...]
Note: Using reduction budget to prevent infinite loop
======================================================================

HEAP SETUP:
  Writer 1 (Xs) paired with Reader 2 (Xs?)
  Writer 3 (Ys) paired with Reader 4 (Ys?)

PROGRAM LABELS:
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
>>> TRY: Goal 100 at PC 16
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  clause/2 => PC 0
  clause/2_c2 => PC 18
  clause/2_c3 => PC 36
  clause/2_end => PC 45
  run/1 => PC 47
  run/1_c2 => PC 52
  run/1_c3 => PC 62
  run/1_end => PC 72

STRUCTURES:
  [a] = writer 10 bound to [|](a, [])
  [b] = writer 12 bound to [|](b, [])
  merge(Xs?,[a],Ys) = writer 14 bound to merge(R2, W10, W3)
  merge(Ys?,[b],Xs) = writer 16 bound to merge(R4, W12, W1)
  conjunction = reader 19

00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
Starting: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs))) at PC 47

00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 15: value=,(W10,W12) vs pattern=true
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 15 -> writer 14
  HeadStructure: writer 14 value = ,(W10,W12), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=24 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=0, S=0
  [G100] UnifyWriter: struct.args[0] = W10
  [G100] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=1, S=1
  [G100] UnifyWriter: struct.args[1] = W12
  [G100] PC=26 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 26 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=27 PutReader | Si={} U={} inBody=true
  [G100] PC=27 PutReader varIndex=0 argSlot=0 clauseVars={0: 10, 1: 12}
  [G100] PutReader: value=10, wc=Instance of 'WriterCell', wc.readerId=11
  [G100] PutReader: Setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 28
  [G100] PC=28 Spawn | Si={} U={} inBody=true
  [G100] PC=29 PutReader | Si={} U={} inBody=true
  [G100] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 10, 1: 12}
  [G100] PutReader: value=12, wc=Instance of 'WriterCell', wc.readerId=13
  [G100] PutReader: Setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 30
  [G100] PC=30 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 13: value=q(R2) vs pattern=true
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=32 ClauseTry | Si={} U={} inBody=false
  [G100] PC=33 Otherwise | Si={} U={} inBody=false
  [G100] PC=34 GetVariable | Si={} U={} inBody=false
  [G100] PC=35 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 35 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=36 PutReader | Si={} U={} inBody=true
  [G100] PC=36 PutReader varIndex=0 argSlot=0 clauseVars={0: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 37
  [G100] PC=37 PutWriter | Si={} U={} inBody=true
  [G100] PC=37 PutWriter varIndex=1 argSlot=1 clauseVars={0: 13}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 38
  [G100] PutWriter: continuing to PC 38
  [G100] PC=38 Spawn | Si={} U={} inBody=true
  [G100] PC=39 PutReader | Si={} U={} inBody=true
  [G100] PC=39 PutReader varIndex=1 argSlot=0 clauseVars={0: 13, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 40
  [G100] PC=40 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [G100] PC=19 Commit | Si={1001} U={} inBody=false
  [G100] PC=22 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
  [G100] PC=32 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=33 Otherwise | Si={} U={1001} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
>>> TRY: Goal 100 at PC 0
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G100] PC=42 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 11 -> writer 10
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
  [G100] PC=0 Label | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  HeadStructure: writer 10 value = p(W1), expecting ,/2
  HeadStructure: NO MATCH, failing
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10000] PC=32 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=33 Otherwise | Si={} U={} inBody=false
  [G10000] PC=34 GetVariable | Si={} U={} inBody=false
  [G10000] PC=35 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 35 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=36 PutReader | Si={} U={} inBody=true
  [G10000] PC=36 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G10000] PutReader: continuing to PC 37
  [G10000] PC=37 PutWriter | Si={} U={} inBody=true
  [G10000] PC=37 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 38
  [G10000] PutWriter: continuing to PC 38
  [G10000] PC=38 Spawn | Si={} U={} inBody=true
  [G10000] PC=39 PutReader | Si={} U={} inBody=true
  [G10000] PC=39 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1002}
  [G10000] PutReader: continuing to PC 40
  [G10000] PC=40 Requeue | Si={} U={} inBody=true
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
  [DEBUG] HeadConstant checking reader 11: value=Const(true) vs pattern=true
  [G100] PC=3 Commit | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={1003} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=23 HeadStructure | Si={} U={1003} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 unbound or null, adding to Si and failing
  [G10000] PC=32 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=33 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=42 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting p/1
  HeadStructure: NO MATCH, failing
  [G10001] PC=8 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=q/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting q/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=10 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
  UnifyConstant: reader 2 unbound, suspending
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10001] PC=11 HeadConstant | Si={2} U={} inBody=false
  [G10001] PC=12 Commit | Si={2} U={} inBody=false
  [G10001] PC=15 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 10001 suspended on readers: {2}
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
  [G100] PC=4 Proceed | Si={} U={} inBody=true
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10002] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
Goals executed: [100]
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10002] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=5 Commit | Si={} U={} inBody=false
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
âœ“ run(true) succeeded
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
>>> REDUCTION: Goal 10002 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        

======================================================================
TEST 2: run(p(X)) with otherwise guard
======================================================================

00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
>>> ACTIVATION: Goal 10001 awakened at PC 0
>>> ACTIVATION: Goal 10000 awakened at PC 16
  [G10002] PC=6 Proceed | Si={} U={} inBody=true
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
>>> TRY: Goal 200 at PC 0
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)
Goals executed: [200]
âœ“ run(p(X)) succeeded via otherwise clause

======================================================================
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  HeadStructure: writer 12 value = q(R2), expecting p/1
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
RESULTS
======================================================================
âœ“ Otherwise guard working correctly
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  HeadStructure: NO MATCH, failing
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_pq_test.dart: Metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                                        
âœ“ First clause run(true) matches literal
âœ“ Second clause run(A) with otherwise handles non-true terms
00:00 [32m+53[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
  [G10001] PC=8 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=q/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting q/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=10 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
  UnifyConstant: reader 2 bound to Const(a), matches!
  [G10001] PC=11 HeadConstant | Si={} U={} inBody=false
  [G10001] PC=12 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 12 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 16
  [G10001] PC=13 Proceed | Si={} U={} inBody=true
00:00 [32m+54[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              00:00 [32m+54[0m[31m -1[0m: test/custom/metainterp_conj_test.dart: Metainterpreter with conjunction: run((p(X), q(X?)))[0m                                                                                              
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=20 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 16
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=Const(true) vs pattern=true
  [G100] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=20 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 10001, 10002, 10001, 10000, 100]
Total executions: 7

======================================================================
RESULTS
======================================================================
X (W1) bound: true
X value: Const(a)
âœ“ X correctly bound to a

âœ“ Metainterpreter with conjunction passed!
âœ“ run((p(X), q(X?))) executed successfully
âœ“ p(X) bound X to a
âœ“ q(X?) verified q(a)
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 19: value=,(W14,W16) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 19 -> writer 18
  HeadStructure: writer 18 value = ,(W14,W16), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=55 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=0, S=0
  [G100] UnifyWriter: struct.args[0] = W14
  [G100] PC=56 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=1, S=1
  [G100] UnifyWriter: struct.args[1] = W16
  [G100] PC=57 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 57 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=58 PutReader | Si={} U={} inBody=true
  [G100] PC=58 PutReader varIndex=0 argSlot=0 clauseVars={0: 14, 1: 16}
  [G100] PutReader: value=14, wc=Instance of 'WriterCell', wc.readerId=15
  [G100] PutReader: Setting argReaders[0] = 15
  [G100] PutReader: continuing to PC 59
  [G100] PC=59 Spawn | Si={} U={} inBody=true
  [G100] PC=60 PutReader | Si={} U={} inBody=true
  [G100] PC=60 PutReader varIndex=1 argSlot=0 clauseVars={0: 14, 1: 16}
  [G100] PutReader: value=16, wc=Instance of 'WriterCell', wc.readerId=17
  [G100] PutReader: Setting argReaders[0] = 17
  [G100] PutReader: continuing to PC 61
  [G100] PC=61 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 17: value=merge(R4,W12,W1) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(R4,W12,W1), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 17}
  [G100] PutReader: value=17, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 17
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 17}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 17, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1001} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 15 -> writer 14
  HeadStructure: writer 14 value = merge(R2,W10,W3), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 15}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 15}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 15, 1: 1002}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1003} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1003} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(R4,W12,W1), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  [G10001] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(R4,W12,W1), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W12 = [|](Const(b),Const([])), MATCH!
  [G10001] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=26 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   

=== My Custom Goal ===

00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10001] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10001] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G10001] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=34 Commit | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
Program: p(a).
Goal: p(X) where X is unbound writer

00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
>>> REDUCTION: Goal 10001 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
--- Running goal ---

00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10001] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 15 -> writer 14
  HeadStructure: writer 14 value = merge(R2,W10,W3), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1005,R1007), MATCH!
  [G10002] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10002] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10002] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10002] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G10002] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10002] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10002] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10002] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 16 (commit succeeded, ÏƒÌ‚w has 3 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10002] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=merge(R4,R1009,W1006) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R4,R1009,W1006), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1001}
  [G100] PutReader: value=1001, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1001}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1001, 1: 1014}
  [G100] PutReader: value=1014, wc=Instance of 'WriterCell', wc.readerId=1015
  [G100] PutReader: Setting argReaders[0] = 1015
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1015} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1015} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1015} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1015 -> writer 1014
  HeadStructure: writer 1014 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1015} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1015} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1015} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1015}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = merge(R11,R1007,W1012), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1003}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1003}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1003, 1: 1016}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1017} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1017} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1017} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1017} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1017} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1017} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1017}
>>> TRY: Goal 10003 at PC 0
  [G10003] PC=0 Label | Si={} U={} inBody=false
  [G10003] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10003] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R4,R1009,W1006), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10003] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1011,R1013), MATCH!
  [G10003] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10003] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1014, bound=false
  HeadStructure: WRITE mode for unbound writer 1014
  [G10003] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10003 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10003] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10004 at PC 0
  [G10004] PC=0 Label | Si={} U={} inBody=false
  [G10004] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10004] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = merge(R11,R1007,W1012), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10004] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(a),Const([])), MATCH!
  [G10004] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10004] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1016, bound=false
  HeadStructure: WRITE mode for unbound writer 1016
  [G10004] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10004 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10004] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1015: value=merge(R1023,R1013,W1020) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1015 -> writer 1014
  HeadStructure: writer 1014 value = merge(R1023,R1013,W1020), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1015}
  [G100] PutReader: value=1015, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1015
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1015}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1015, 1: 1032}
  [G100] PutReader: value=1032, wc=Instance of 'WriterCell', wc.readerId=1033
  [G100] PutReader: Setting argReaders[0] = 1033
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1033} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1033} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1033} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1033 -> writer 1032
  HeadStructure: writer 1032 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1033} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1033} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1033} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1033}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 value = merge(R1029,R1031,W1026), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1017}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1017}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1017, 1: 1034}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1035} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1035} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1035} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1035} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1035} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1035} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1035}
>>> TRY: Goal 10005 at PC 0
  [G10005] PC=0 Label | Si={} U={} inBody=false
  [G10005] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10005] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1015 -> writer 1014
  HeadStructure: writer 1014 value = merge(R1023,R1013,W1020), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10005] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10005] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10005] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1015 -> writer 1014
  HeadStructure: writer 1014 value = merge(R1023,R1013,W1020), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10005] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1025,R1027), MATCH!
  [G10005] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10005] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1032, bound=false
  HeadStructure: WRITE mode for unbound writer 1032
  [G10005] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10005 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10005] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10006 at PC 0
  [G10006] PC=0 Label | Si={} U={} inBody=false
  [G10006] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10006] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 value = merge(R1029,R1031,W1026), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10006] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1019,R1021), MATCH!
  [G10006] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10006] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1034, bound=false
  HeadStructure: WRITE mode for unbound writer 1034
  [G10006] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10006 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10006] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1033: value=merge(R1041,R1027,W1038) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1033 -> writer 1032
  HeadStructure: writer 1032 value = merge(R1041,R1027,W1038), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1033}
  [G100] PutReader: value=1033, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1033
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1033}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1033, 1: 1050}
  [G100] PutReader: value=1050, wc=Instance of 'WriterCell', wc.readerId=1051
  [G100] PutReader: Setting argReaders[0] = 1051
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1051} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1051} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1051} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1051} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1051} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1051} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1051}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 value = merge(R1047,R1049,W1044), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1035}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1035}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1035, 1: 1052}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1053} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1053} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1053} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1053} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1053} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1053} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1053}
>>> TRY: Goal 10007 at PC 0
  [G10007] PC=0 Label | Si={} U={} inBody=false
  [G10007] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10007] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1033 -> writer 1032
  HeadStructure: writer 1032 value = merge(R1041,R1027,W1038), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10007] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10007] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10007] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1033 -> writer 1032
  HeadStructure: writer 1032 value = merge(R1041,R1027,W1038), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10007] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1043,R1045), MATCH!
  [G10007] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10007] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1050, bound=false
  HeadStructure: WRITE mode for unbound writer 1050
  [G10007] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10007 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10007] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10008 at PC 0
  [G10008] PC=0 Label | Si={} U={} inBody=false
  [G10008] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10008] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 value = merge(R1047,R1049,W1044), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10008] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10008] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10008] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 value = merge(R1047,R1049,W1044), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10008] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1037,R1039), MATCH!
  [G10008] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10008] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1052, bound=false
  HeadStructure: WRITE mode for unbound writer 1052
  [G10008] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10008 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10008] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1051: value=merge(R1059,R1045,W1056) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1059,R1045,W1056), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1051}
  [G100] PutReader: value=1051, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1051
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1051}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1051, 1: 1068}
  [G100] PutReader: value=1068, wc=Instance of 'WriterCell', wc.readerId=1069
  [G100] PutReader: Setting argReaders[0] = 1069
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1069} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1069} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1069} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1069 -> writer 1068
  HeadStructure: writer 1068 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1069} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1069} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1069} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1069}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1065,R1067,W1062), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1053}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1053}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1053, 1: 1070}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1071} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1071} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1071} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1071 -> writer 1070
  HeadStructure: writer 1070 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1071} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1071} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1071} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1071}
>>> TRY: Goal 10009 at PC 0
  [G10009] PC=0 Label | Si={} U={} inBody=false
  [G10009] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10009] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1059,R1045,W1056), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10009] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10009] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10009] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1059,R1045,W1056), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10009] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1061,R1063), MATCH!
  [G10009] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10009] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1068, bound=false
  HeadStructure: WRITE mode for unbound writer 1068
  [G10009] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10009 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10009] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10010 at PC 0
  [G10010] PC=0 Label | Si={} U={} inBody=false
  [G10010] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10010] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1065,R1067,W1062), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10010] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=5 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
>>> TRY: Goal 100 at PC 0
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10010] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10010] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10010] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1065,R1067,W1062), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10010] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1055,R1057), MATCH!
  [G10010] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10010] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1070, bound=false
  HeadStructure: WRITE mode for unbound writer 1070
  [G10010] PC=31 UnifyReader | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
  [G100] PC=0 Label | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10010] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=34 Commit | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
>>> REDUCTION: Goal 10010 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10010] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1069: value=merge(R1077,R1063,W1074) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1069 -> writer 1068
  HeadStructure: writer 1068 value = merge(R1077,R1063,W1074), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1069}
  [G100] PutReader: value=1069, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1069
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1069}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1069, 1: 1086}
  [G100] PutReader: value=1086, wc=Instance of 'WriterCell', wc.readerId=1087
  [G100] PutReader: Setting argReaders[0] = 1087
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1087} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1087} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1087} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1087 -> writer 1086
  HeadStructure: writer 1086 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1087} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
  [G100] PC=3 Commit | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G100] PC=64 Otherwise | Si={} U={1087} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1087} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1087}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1071 -> writer 1070
  HeadStructure: writer 1070 value = merge(R1083,R1085,W1080), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1071}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1071}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1071, 1: 1088}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1089} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1089} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1089} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1089 -> writer 1088
  HeadStructure: writer 1088 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1089} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1089} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1089} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1089}
>>> TRY: Goal 10011 at PC 0
  [G10011] PC=0 Label | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
  [G100] PC=4 Proceed | Si={} U={} inBody=true
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10011] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10011] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1069 -> writer 1068
  HeadStructure: writer 1068 value = merge(R1077,R1063,W1074), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
Goals executed: [100]
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10011] PC=19 ClauseTry | Si={} U={} inBody=false
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   

=== Results ===
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10011] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
X (writer 1) bound? true
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  HeadStructure: READ mode, reader 1069 -> writer 1068
  HeadStructure: writer 1068 value = merge(R1077,R1063,W1074), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   
X value: Const(a)
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  HeadStructure: clause var 10 = [|](R1079,R1081), MATCH!
00:00 [32m+55[0m[31m -1[0m: test/custom/playground_test.dart: Playground: write your own goal here[0m                                                                                                                   

âœ“ Done!
00:00 [32m+55[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G10011] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10011] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1086, bound=false
  HeadStructure: WRITE mode for unbound writer 1086
  [G10011] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10011 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10011] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10012 at PC 0
  [G10012] PC=0 Label | Si={} U={} inBody=false
  [G10012] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1071 -> writer 1070
  HeadStructure: writer 1070 value = merge(R1083,R1085,W1080), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10012] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10012] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1071 -> writer 1070
  HeadStructure: writer 1070 value = merge(R1083,R1085,W1080), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10012] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1073,R1075), MATCH!
  [G10012] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10012] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1088, bound=false
  HeadStructure: WRITE mode for unbound writer 1088
  [G10012] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10012 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10012] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1087: value=merge(R1095,R1081,W1092) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1087 -> writer 1086
  HeadStructure: writer 1086 value = merge(R1095,R1081,W1092), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1087}
  [G100] PutReader: value=1087, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1087
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1087}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
00:00 [32m+56[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         00:00 [32m+56[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1087, 1: 1104}
  [G100] PutReader: value=1104, wc=Instance of 'WriterCell', wc.readerId=1105
  [G100] PutReader: Setting argReaders[0] = 1105
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1105} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1105} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1105} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1105} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1105} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1105} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1105}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1089 -> writer 1088
  HeadStructure: writer 1088 value = merge(R1101,R1103,W1098), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1089}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1089}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1089, 1: 1106}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1107} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1107} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1107} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1107 -> writer 1106
  HeadStructure: writer 1106 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1107} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1107} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1107} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1107}
>>> TRY: Goal 10013 at PC 0
  [G10013] PC=0 Label | Si={} U={} inBody=false
  [G10013] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10013] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1087 -> writer 1086
  HeadStructure: writer 1086 value = merge(R1095,R1081,W1092), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10013] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10013] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10013] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1087 -> writer 1086
  HeadStructure: writer 1086 value = merge(R1095,R1081,W1092), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10013] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1097,R1099), MATCH!
  [G10013] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10013] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1104, bound=false
  HeadStructure: WRITE mode for unbound writer 1104
  [G10013] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10013 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10013] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10014 at PC 0
  [G10014] PC=0 Label | Si={} U={} inBody=false
  [G10014] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10014] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1089 -> writer 1088
  HeadStructure: writer 1088 value = merge(R1101,R1103,W1098), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10014] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10014] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10014] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1089 -> writer 1088
  HeadStructure: writer 1088 value = merge(R1101,R1103,W1098), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10014] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1091,R1093), MATCH!
  [G10014] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10014] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1106, bound=false
  HeadStructure: WRITE mode for unbound writer 1106
  [G10014] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10014 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10014] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1105: value=merge(R1113,R1099,W1110) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1113,R1099,W1110), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1105}
  [G100] PutReader: value=1105, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1105
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1105}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1105, 1: 1122}
  [G100] PutReader: value=1122, wc=Instance of 'WriterCell', wc.readerId=1123
  [G100] PutReader: Setting argReaders[0] = 1123
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1123} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1123} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1123} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1123 -> writer 1122
  HeadStructure: writer 1122 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1123} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1123} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1123} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1123}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1107 -> writer 1106
  HeadStructure: writer 1106 value = merge(R1119,R1121,W1116), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1107}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1107}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1107, 1: 1124}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1125} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1125} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1125} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1125 -> writer 1124
  HeadStructure: writer 1124 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1125} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1125} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1125} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1125}
>>> TRY: Goal 10015 at PC 0
  [G10015] PC=0 Label | Si={} U={} inBody=false
  [G10015] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10015] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1113,R1099,W1110), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10015] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10015] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10015] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1113,R1099,W1110), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10015] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1115,R1117), MATCH!
  [G10015] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10015] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1122, bound=false
  HeadStructure: WRITE mode for unbound writer 1122
  [G10015] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10015 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10015] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10016 at PC 0
  [G10016] PC=0 Label | Si={} U={} inBody=false
  [G10016] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10016] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1107 -> writer 1106
  HeadStructure: writer 1106 value = merge(R1119,R1121,W1116), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10016] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10016] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10016] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1107 -> writer 1106
  HeadStructure: writer 1106 value = merge(R1119,R1121,W1116), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10016] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1109,R1111), MATCH!
  [G10016] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10016] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10016] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10016] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1124, bound=false
  HeadStructure: WRITE mode for unbound writer 1124
  [G10016] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10016] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10016] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10016 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10016] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1123: value=merge(R1131,R1117,W1128) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1123 -> writer 1122
  HeadStructure: writer 1122 value = merge(R1131,R1117,W1128), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1123}
  [G100] PutReader: value=1123, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1123
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1123}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1123, 1: 1140}
  [G100] PutReader: value=1140, wc=Instance of 'WriterCell', wc.readerId=1141
  [G100] PutReader: Setting argReaders[0] = 1141
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1141} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1141} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1141} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1141 -> writer 1140
  HeadStructure: writer 1140 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1141} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1141} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1141} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1141}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1125 -> writer 1124
  HeadStructure: writer 1124 value = merge(R1137,R1139,W1134), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1125}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1125}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1125, 1: 1142}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1143} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1143} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1143} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1143 -> writer 1142
  HeadStructure: writer 1142 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1143} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1143} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1143} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1143}
>>> TRY: Goal 10017 at PC 0
  [G10017] PC=0 Label | Si={} U={} inBody=false
  [G10017] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10017] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1123 -> writer 1122
  HeadStructure: writer 1122 value = merge(R1131,R1117,W1128), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10017] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10017] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10017] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1123 -> writer 1122
  HeadStructure: writer 1122 value = merge(R1131,R1117,W1128), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10017] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1133,R1135), MATCH!
  [G10017] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10017] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10017] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10017] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1140, bound=false
  HeadStructure: WRITE mode for unbound writer 1140
  [G10017] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10017] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10017] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10017] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10017 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10017] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10018 at PC 0
  [G10018] PC=0 Label | Si={} U={} inBody=false
  [G10018] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10018] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1125 -> writer 1124
  HeadStructure: writer 1124 value = merge(R1137,R1139,W1134), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10018] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10018] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10018] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1125 -> writer 1124
  HeadStructure: writer 1124 value = merge(R1137,R1139,W1134), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10018] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1127,R1129), MATCH!
  [G10018] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10018] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10018] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10018] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1142, bound=false
  HeadStructure: WRITE mode for unbound writer 1142
  [G10018] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10018] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10018] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10018] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10018 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10018] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1141: value=merge(R1149,R1135,W1146) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1141 -> writer 1140
  HeadStructure: writer 1140 value = merge(R1149,R1135,W1146), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1141}
  [G100] PutReader: value=1141, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1141
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1141}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1141, 1: 1158}
  [G100] PutReader: value=1158, wc=Instance of 'WriterCell', wc.readerId=1159
  [G100] PutReader: Setting argReaders[0] = 1159
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1159} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1159} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1159} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1159 -> writer 1158
  HeadStructure: writer 1158 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1159} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1159} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1159} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1159}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1143 -> writer 1142
  HeadStructure: writer 1142 value = merge(R1155,R1157,W1152), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1143}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1143}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1143, 1: 1160}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1161} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1161} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1161} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1161 -> writer 1160
  HeadStructure: writer 1160 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1161} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1161} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1161} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1161}
>>> TRY: Goal 10019 at PC 0
  [G10019] PC=0 Label | Si={} U={} inBody=false
  [G10019] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10019] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1141 -> writer 1140
  HeadStructure: writer 1140 value = merge(R1149,R1135,W1146), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10019] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10019] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10019] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1141 -> writer 1140
  HeadStructure: writer 1140 value = merge(R1149,R1135,W1146), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10019] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1151,R1153), MATCH!
  [G10019] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10019] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10019] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10019] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1158, bound=false
  HeadStructure: WRITE mode for unbound writer 1158
  [G10019] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10019] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10019] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10019] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10019 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10019] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10020 at PC 0
  [G10020] PC=0 Label | Si={} U={} inBody=false
  [G10020] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10020] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1143 -> writer 1142
  HeadStructure: writer 1142 value = merge(R1155,R1157,W1152), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10020] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10020] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10020] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1143 -> writer 1142
  HeadStructure: writer 1142 value = merge(R1155,R1157,W1152), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10020] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1145,R1147), MATCH!
  [G10020] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10020] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10020] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10020] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1160, bound=false
  HeadStructure: WRITE mode for unbound writer 1160
  [G10020] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10020] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10020] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10020] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10020 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10020] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1159: value=merge(R1167,R1153,W1164) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1159 -> writer 1158
  HeadStructure: writer 1158 value = merge(R1167,R1153,W1164), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1159}
  [G100] PutReader: value=1159, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1159
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1159}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1159, 1: 1176}
  [G100] PutReader: value=1176, wc=Instance of 'WriterCell', wc.readerId=1177
  [G100] PutReader: Setting argReaders[0] = 1177
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1177} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1177} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1177} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1177 -> writer 1176
  HeadStructure: writer 1176 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1177} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1177} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1177} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1177}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1161 -> writer 1160
  HeadStructure: writer 1160 value = merge(R1173,R1175,W1170), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1161}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1161}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1161, 1: 1178}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1179} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1179} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1179} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1179 -> writer 1178
  HeadStructure: writer 1178 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1179} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1179} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1179} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1179}
>>> TRY: Goal 10021 at PC 0
  [G10021] PC=0 Label | Si={} U={} inBody=false
  [G10021] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10021] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1159 -> writer 1158
  HeadStructure: writer 1158 value = merge(R1167,R1153,W1164), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10021] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10021] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10021] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1159 -> writer 1158
  HeadStructure: writer 1158 value = merge(R1167,R1153,W1164), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10021] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1169,R1171), MATCH!
  [G10021] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10021] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10021] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10021] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1176, bound=false
  HeadStructure: WRITE mode for unbound writer 1176
  [G10021] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10021] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10021] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10021] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10021 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10021] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10022 at PC 0
  [G10022] PC=0 Label | Si={} U={} inBody=false
  [G10022] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10022] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1161 -> writer 1160
  HeadStructure: writer 1160 value = merge(R1173,R1175,W1170), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10022] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10022] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10022] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1161 -> writer 1160
  HeadStructure: writer 1160 value = merge(R1173,R1175,W1170), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10022] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1163,R1165), MATCH!
  [G10022] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10022] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10022] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10022] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1178, bound=false
  HeadStructure: WRITE mode for unbound writer 1178
  [G10022] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10022] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10022] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10022] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10022 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10022] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1177: value=merge(R1185,R1171,W1182) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1177 -> writer 1176
  HeadStructure: writer 1176 value = merge(R1185,R1171,W1182), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1177}
  [G100] PutReader: value=1177, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1177
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1177}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1177, 1: 1194}
  [G100] PutReader: value=1194, wc=Instance of 'WriterCell', wc.readerId=1195
  [G100] PutReader: Setting argReaders[0] = 1195
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1195} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1195} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1195} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1195 -> writer 1194
  HeadStructure: writer 1194 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1195} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1195} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1195} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1195}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1179 -> writer 1178
  HeadStructure: writer 1178 value = merge(R1191,R1193,W1188), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1179}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1179}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1179, 1: 1196}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1197} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1197} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1197} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1197 -> writer 1196
  HeadStructure: writer 1196 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1197} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1197} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1197} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1197}
>>> TRY: Goal 10023 at PC 0
  [G10023] PC=0 Label | Si={} U={} inBody=false
  [G10023] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10023] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1177 -> writer 1176
  HeadStructure: writer 1176 value = merge(R1185,R1171,W1182), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10023] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10023] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10023] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1177 -> writer 1176
  HeadStructure: writer 1176 value = merge(R1185,R1171,W1182), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10023] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1187,R1189), MATCH!
  [G10023] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10023] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10023] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10023] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1194, bound=false
  HeadStructure: WRITE mode for unbound writer 1194
  [G10023] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10023] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10023] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10023] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10023 at PC 34 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10023] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10024 at PC 0
  [G10024] PC=0 Label | Si={} U={} inBody=false
  [G10024] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10024] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1179 -> writer 1178
  HeadStructure: writer 1178 value = merge(R1191,R1193,W1188), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10024] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10024] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10024] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1179 -> writer 1178
  HeadStructure: writer 1178 value = merge(R1191,R1193,W1188), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10024] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1181,R1183), MATCH!
  [G10024] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=26 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=27 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10024] PC=28 UnifyReader | Si={} U={} inBody=false
  [G10024] PC=29 UnifyReader | Si={} U={} inBody=false
  [G10024] PC=30 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1196, bound=false
  HeadStructure: WRITE mode for unbound writer 1196
  [G10024] PC=31 UnifyReader | Si={} U={} inBody=false
  [G10024] PC=32 UnifyReader | Si={} U={} inBody=false
  [G10024] PC=33 UnifyWriter | Si={} U={} inBody=false
  [G10024] PC=34 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10024 at PC 34 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10024] PC=35 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1195: value=merge(R1203,R1189,W1200) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1195 -> writer 1194
  HeadStructure: writer 1194 value = merge(R1203,R1189,W1200), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1195}
  [G100] PutReader: value=1195, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1195
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1195}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1195, 1: 1212}
  [G100] PutReader: value=1212, wc=Instance of 'WriterCell', wc.readerId=1213
  [G100] PutReader: Setting argReaders[0] = 1213
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1213} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1213} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1213} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1213 -> writer 1212
  HeadStructure: writer 1212 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1213} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1213} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1213} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1213}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1197 -> writer 1196
  HeadStructure: writer 1196 value = merge(R1209,R1211,W1206), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1197}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1197}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1197, 1: 1214}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1215} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1215} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1215} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1215 -> writer 1214
  HeadStructure: writer 1214 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1215} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1215} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1215} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1215}

Goals executed: [100, 10000, 10001, 10002, 100, 10000, 10003, 10004, 100, 10000, 10005, 10006, 100, 10000, 10007, 10008, 100, 10000, 10009, 10010, 100, 10000, 10011, 10012, 100, 10000, 10013, 10014, 100, 10000, 10015, 10016, 100, 10000, 10017, 10018, 100, 10000, 10019, 10020, 100, 10000, 10021, 10022, 100, 10000, 10023, 10024, 100, 10000]
Total executions: 50

======================================================================
RESULTS
======================================================================
Xs (W1) bound: true
Ys (W3) bound: true
Xs value: [|](R1005,R1007)
  Xs is a list starting with...
    First element: Const(b)
Ys value: [|](R1011,R1013)
  Ys is a list starting with...
    First element: Const(b)

âœ“ Circular merge test executed with reduction budget
âœ“ Demonstrates circular dependency handling
Note: This creates an infinite stream - execution limited by maxCycles
00:00 [32m+57[0m[31m -1[0m: test/custom/metainterp_circular_merge_test.dart: Metainterpreter with circular merge: run((merge(Xs?,[a],Ys),merge(Ys?,[b],Xs)))[0m                                                         00:00 [32m+57[0m[31m -1[0m: [1m[90mloading test/custom/metainterp_rp_test.dart[0m[0m                                                                                                                                              00:00 [32m+57[0m[31m -1[0m: test/custom/metainterp_rp_test.dart: Metainterpreter: run(p(X?)), run(p(X)) - reader then writer[0m                                                                                         00:00 [32m+57[0m[31m -1[0m: test/custom/metainterp_rp_test.dart: Metainterpreter: run(p(X?)), run(p(X)) - reader then writer[0m                                                                                         

======================================================================
METAINTERPRETER TEST: P(X?) THEN P(X)
Object program: clause(p(a),true). clause(p(b),true).
Metainterpreter: run(true). run(A) :- otherwise | clause(A?,B), run(B?).
Query: boot :- run(p(X?)), run(p(X))
Expected: First run(p(X?)) suspends, second run(p(X)) binds X=a, first reactivates
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

PROGRAM LABELS:
  clause/2 => PC 0
  clause/2_c2 => PC 7
  clause/2_end => PC 14
  run/1 => PC 16
  run/1_c2 => PC 21
  run/1_end => PC 31
  boot/0 => PC 33
  boot/0_end => PC 42

STRUCTURES:
  p(X?) = reader 11 bound to p(R2)
  p(X) = reader 13 bound to p(W1)

Starting: boot(p(X?), p(X)) at PC 33

00:00 [32m+57[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(a). q(a). Goal: q(X?), p(X) succeeds with X=a[0m                                                                                            

=== SIMPLE P/Q TEST ===
Program: p(a). q(a).
Goal: q(X?), p(X)
Expected: X binds to a, q(a) succeeds

Heap: Writer 1 (X) paired with Reader 2 (X?)

Step 1: Run q(X?) where X is unbound
00:00 [32m+57[0m[31m -1[0m: test/custom/metainterp_rp_test.dart: Metainterpreter: run(p(X?)), run(p(X)) - reader then writer[0m                                                                                         
>>> TRY: Goal 100 at PC 33
  [G100] PC=33 Label | Si={} U={} inBody=false
  [G100] PC=34 ClauseTry | Si={} U={} inBody=false
  [G100] PC=35 GetVariable | Si={} U={} inBody=false
  [G100] PC=36 GetVariable | Si={} U={} inBody=false
  [G100] PC=37 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 37 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=38 PutReader | Si={} U={} inBody=true
  [G100] PC=38 PutReader varIndex=0 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=11, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 39
  [G100] PC=39 Spawn | Si={} U={} inBody=true
  [G100] PC=40 PutReader | Si={} U={} inBody=true
  [G100] PC=40 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 41
  [G100] PC=41 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 13: value=p(W1) vs pattern=true
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 Otherwise | Si={} U={} inBody=false
  [G100] PC=24 GetVariable | Si={} U={} inBody=false
  [G100] PC=25 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 25 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=26 PutReader | Si={} U={} inBody=true
  [G100] PC=26 PutReader varIndex=0 argSlot=0 clauseVars={0: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 27
  [G100] PC=27 PutWriter | Si={} U={} inBody=true
  [G100] PC=27 PutWriter varIndex=1 argSlot=1 clauseVars={0: 13}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 28
  [G100] PutWriter: continuing to PC 28
  [G100] PC=28 Spawn | Si={} U={} inBody=true
  [G100] PC=29 PutReader | Si={} U={} inBody=true
  [G100] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 13, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 30
  [G100] PC=30 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [G100] PC=19 Commit | Si={1001} U={} inBody=false
  [G100] PC=22 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=23 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=32 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=23 Otherwise | Si={} U={} inBody=false
  [G10000] PC=24 GetVariable | Si={} U={} inBody=false
  [G10000] PC=25 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 25 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=26 PutReader | Si={} U={} inBody=true
  [G10000] PC=26 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G10000] PutReader: continuing to PC 27
  [G10000] PC=27 PutWriter | Si={} U={} inBody=true
  [G10000] PC=27 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 28
  [G10000] PutWriter: continuing to PC 28
  [G10000] PC=28 Spawn | Si={} U={} inBody=true
  [G10000] PC=29 PutReader | Si={} U={} inBody=true
  [G10000] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1002}
  [G10000] PutReader: continuing to PC 30
  [G10000] PC=30 Requeue | Si={} U={} inBody=true
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={1003} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=23 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=32 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
  [G10001] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10001] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 16
  [G10001] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(R2), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
  UnifyConstant: reader 2 bound to Const(a), matches!
  [G10002] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 5 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 16
  [G10002] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 16
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=Const(true) vs pattern=true
  [G100] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=20 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=20 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 10001, 10002, 100, 10000]
Total executions: 6

======================================================================
RESULTS
======================================================================
X (W1) bound: true
X value: Const(a)
âœ“ X correctly bound to a

âœ“ Metainterpreter test passed!
âœ“ run(p(X?)) suspended on unbound X
âœ“ run(p(X)) bound X to a
âœ“ run(p(X?)) reactivated and verified p(a) successfully
00:00 [32m+57[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(a). q(a). Goal: q(X?), p(X) succeeds with X=a[0m                                                                                            
>>> TRY: Goal 100 at PC 0
00:00 [32m+58[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(a). q(a). Goal: q(X?), p(X) succeeds with X=a[0m                                                                                            00:00 [32m+58[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(a). q(a). Goal: q(X?), p(X) succeeds with X=a[0m                                                                                            
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
  [G100] PC=6 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
  Ran goals: [100]
  X bound? false
  Suspended on R2? 1 goals

Step 2: Run p(X) where X is unbound writer
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(a) vs pattern=a
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
  Ran goals: [200, 100]
  X bound? true
  X value: Const(a)

âœ“ Success! X = a, both goals succeeded
âœ“ Goal q(X?) correctly ran with program Q after reactivation

00:00 [32m+59[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(a). q(a). Goal: q(X?), p(X) succeeds with X=a[0m                                                                                            00:00 [32m+59[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(b). q(a). Goal: q(X?), p(X) fails because p(b)â‰ q(a)[0m                                                                                      00:00 [32m+59[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(b). q(a). Goal: q(X?), p(X) fails because p(b)â‰ q(a)[0m                                                                                      

=== SIMPLE P/Q TEST (MISMATCH) ===
Program: p(b). q(a).
Goal: q(X?), p(X)
Expected: X binds to b, q(b) fails

Step 1: Run q(X?)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
  [G100] PC=6 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Step 2: Run p(X) - binds X to b
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(b) vs pattern=a
  [DEBUG] Mismatch! Soft-failing to next clause
  [G100] PC=6 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
  Ran goals: [200, 100]
  X value: Const(b)

âœ“ Correct behavior: X = b, q(a) failed as expected
âœ“ Goal q(X?) correctly ran with program Q and failed

00:00 [32m+60[0m[31m -1[0m: test/custom/simple_p_q_test.dart: Simple p/q: p(b). q(a). Goal: q(X?), p(X) fails because p(b)â‰ q(a)[0m                                                                                      00:00 [32m+60[0m[31m -1[0m: [1m[90mloading test/custom/trace_q_p_test.dart[0m[0m                                                                                                                                                  00:00 [32m+60[0m[31m -1[0m: test/custom/trace_q_p_test.dart: Program: p(a). p(b). q(b). Goal: q(X?), p(X) with full trace[0m                                                                                            00:00 [32m+60[0m[31m -1[0m: test/custom/trace_q_p_test.dart: Program: p(a). p(b). q(b). Goal: q(X?), p(X) with full trace[0m                                                                                            

========================================
=== PROGRAM ===
p(a).
p(b).
q(b).

=== GOAL ===
q(X?), p(X)
========================================

HEAP SETUP:
  Writer 1 (X) - unbound
  Reader 2 (X?) - paired with Writer 1

========================================
GOAL 1: q(X?) where X is UNBOUND
Expected: SUSPEND (reader X? is unbound)
========================================

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
  [G100] PC=6 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}

RESULT OF GOAL 1:
  Goals executed: [100]
  X bound: false
  Suspended on R2: 1 goals

========================================
GOAL 2: p(X) where X is UNBOUND WRITER
Expected: BIND X to 'a' (first clause)
Then: ACTIVATE suspended goal q(X?)
========================================

>>> TRY: Goal 200 at PC 0
00:00 [32m+60[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         

=== ECHO TEST ===
Note: This test simulates input instead of blocking on stdin

00:00 [32m+60[0m[31m -1[0m: test/custom/trace_q_p_test.dart: Program: p(a). p(b). q(b). Goal: q(X?), p(X) with full trace[0m                                                                                            
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(a) vs pattern=b
  [DEBUG] Mismatch! Soft-failing to next clause
  [G100] PC=6 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)

RESULT OF GOAL 2:
  Goals executed: [200, 100]
  X bound: true
  X value: Const(a)
  Goals in queue: 0

========================================
GOAL 1 REACTIVATED: q(X?) where X is now bound to 'a'
Expected: FAIL (q only has clause q(b), not q(a))
========================================


RESULT OF REACTIVATED GOAL:
  Goals executed: []
========================================
=== EXECUTION SUMMARY ===
========================================
1. GOAL q(X?): Suspended (X unbound)
2. GOAL p(X): Bound X to 'a' via first clause p(a)
3. ACTIVATION: q(X?) woke up
4. REACTIVATED q(X?): FAILED (q(b) does not match q(a))
00:00 [32m+60[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         
Running echo program:
00:00 [32m+60[0m[31m -1[0m: test/custom/trace_q_p_test.dart: Program: p(a). p(b). q(b). Goal: q(X?), p(X) with full trace[0m                                                                                            

FINAL STATE: X = Const(a)
00:00 [32m+60[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         
(Input pre-bound to: "hello world")

00:00 [32m+60[0m[31m -1[0m: test/custom/trace_q_p_test.dart: Program: p(a). p(b). q(b). Goal: q(X?), p(X) with full trace[0m                                                                                            
========================================

00:00 [32m+61[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         00:00 [32m+61[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         
>>> TRY: Goal 1 at PC 0
>>> REDUCTION: Goal 1 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
Enter text: You entered: hello world>>> REDUCTION: Goal 1 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)


Result: RunResult.terminated
âœ“ echo program executed successfully

00:00 [32m+62[0m[31m -1[0m: test/custom/echo_test.dart: echo: read line and echo back with proper sequencing[0m                                                                                                         00:00 [32m+62[0m[31m -1[0m: [1m[90mloading test/custom/merge_test.dart[0m[0m                                                                                                                                                      00:00 [32m+62[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   00:00 [32m+62[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   

=== Testing Merge Base Case ===
Program: merge([],[],[]).
Goal: merge([], [], [])\n
Heap Setup:
  Arg0 (Xs?) = []
  Arg1 (Ys?) = []
  Arg2 (Zs?) = []\n
--- Executing Goal: merge([], [], []) ---
Expected: SUCCESS (all three arguments match [])\n
00:00 [32m+62[0m[31m -1[0m: test/custom/system_predicates_test.dart: Utility System Predicates current_time/1: binds to current timestamp[0m                                                                            

=== CURRENT_TIME TEST: Bind Timestamp ===
Result: SystemResult.success
Bound time: 1762666968074
âœ“ current_time/1 successfully bound timestamp

00:00 [32m+62[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   
>>> TRY: Goal 100 at PC 0
00:00 [32m+63[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   00:00 [32m+63[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(null) vs pattern=null
  [G100] PC=3 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 4: value=Const(null) vs pattern=null
  [G100] PC=4 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 6: value=Const(null) vs pattern=null
  [G100] PC=5 Commit | Si={} U={} inBody=false
00:00 [32m+63[0m[31m -1[0m: test/custom/system_predicates_test.dart: Utility System Predicates unique_id/1: generates unique IDs[0m                                                                                     

=== UNIQUE_ID TEST: Generate Multiple IDs ===
00:00 [32m+63[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: [100]\n
00:00 [32m+63[0m[31m -1[0m: test/custom/system_predicates_test.dart: Utility System Predicates unique_id/1: generates unique IDs[0m                                                                                     
Generated ID 0: 1
Generated ID 1: 2
Generated ID 2: 3
âœ“ unique_id/1 generated unique sequential IDs

00:00 [32m+64[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   00:00 [32m+64[0m[31m -1[0m: test/custom/merge_test.dart: Merge base case: merge([],[],[]) succeeds[0m                                                                                                                   
âœ“ Merge base case succeeded
âœ“ Test passed!
00:00 [32m+65[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2 and file_read/2: write and read file[0m                                                                    00:00 [32m+65[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     

=== Testing Merge Copy First Stream ===
Program: merge([X|Xs],Ys,[X?|Zs?]) :- merge(Ys?,Xs?,Zs).
Goal: merge([a], [], Z) where Z is unbound writer\n
Heap Setup:
  Arg0 (Xs?) = [a]
  Arg1 (Ys?) = []
  Arg2 (Zs) = unbound writer\n
--- Executing Goal: merge([a], [], Z) ---
Expected: Z will be bound to [a]\n
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(a),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 5, bound=false
  HeadStructure: WRITE mode for unbound writer 5
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
00:00 [32m+65[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2 and file_read/2: write and read file[0m                                                                    

=== FILE I/O TEST: Write and Read ===
Test file path: /var/folders/2_/xqvp7z1x34d_7jn9h08663yr0000gp/T/glp_test_WsU8XF/test.txt
00:00 [32m+65[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G100] PutReader: value=4, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 4
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1002/R1003 for constant
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
00:00 [32m+65[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2 and file_read/2: write and read file[0m                                                                    
âœ“ File written successfully
00:00 [32m+65[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 4: value=Const(null) vs pattern=null
  [G100] PC=17 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1003: value=Const(null) vs pattern=null
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [G100] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 19 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=20 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer 5 bound? true
Writer 5 value: .(Const(a),W1000)\n
00:00 [32m+65[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2 and file_read/2: write and read file[0m                                                                    
âœ“ File read successfully: Hello, GLP!
âœ“ Contents match: Hello, GLP!

00:00 [32m+66[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     00:00 [32m+66[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_read/2: fails for non-existent file[0m                                                                             

=== FILE I/O TEST: Non-existent File ===
[ERROR] file_read/2: File not found: /var/folders/2_/xqvp7z1x34d_7jn9h08663yr0000gp/T/glp_test_5yXaqP/does_not_exist.txt
âœ“ Correctly failed for non-existent file

00:00 [32m+67[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     00:00 [32m+67[0m[31m -1[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_read/2: suspends on unbound reader path[0m                                                                         

=== FILE I/O TEST: Suspend on Unbound Reader ===
Result: SystemResult.suspend
Suspended readers: {2}
âœ“ Correctly suspended on unbound reader

00:00 [32m+68[0m[31m -1[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue[0m                                                                                                     00:00 [32m+68[0m[31m -2[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2: writes multiline content[0m                                                                               

=== FILE I/O TEST: Multiline Content ===
âœ“ Multiline content preserved correctly

00:00 [32m+69[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  00:00 [32m+69[0m[31m -2[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2: overwrites existing file[0m                                                                               

=== FILE I/O TEST: Overwrite Existing ===
00:00 [32m+69[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  

======================================================================
00:00 [32m+69[0m[31m -2[0m: test/custom/system_predicates_test.dart: File I/O System Predicates file_write/2: overwrites existing file[0m                                                                               
âœ“ File correctly overwritten

00:00 [32m+69[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
REVERSE ORDER SEQUENTIAL MERGE TEST
Goal 100: merge(Xs?, [a,b,c,d], Ys)  <- Xs unbound, should SUSPEND
Goal 200: merge([1,2,3], [], Xs)     <- Binds Xs, ACTIVATES Goal 100
Expected: Xs = [1,2,3], Ys = [1,a,2,b,3,c,d]
======================================================================

00:00 [32m+70[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  00:00 [32m+70[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
HEAP SETUP:
  List1 (W10/R11) = [1,2,3]
  Empty (W20/R21) = []
  List2 (W30/R31) = [a,b,c,d]
  Result Xs (W40/R41) = unbound
  Result Ys (W50/R51) = unbound

======================================================================
EXECUTION TRACE
======================================================================

--- GOAL 100: merge(Xs?, [a,b,c,d], Ys) ---
    (Xs? is unbound, this should SUSPEND)
--- GOAL 200: merge([1,2,3], [], Xs) ---
    (This will bind Xs and ACTIVATE goal 100)

Queue order: [100, 200]
Expected execution: 100 suspends, 200 runs and binds Xs, 100 reactivates

00:00 [32m+70[0m[31m -2[0m: test/custom/merge_test.dart: Merge copy first stream: merge([a],[],[a]) with requeue [1m[31m[E][0m[0m                                                                                                 
  Expected: <Instance of 'ReaderTerm'>
    Actual: WriterTerm:<W1000>
     Which: is not an instance of 'ReaderTerm'
  Tail should be a reader reference
  
  package:matcher                    expect
  test/custom/merge_test.dart 190:5  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Merge copy first stream: merge([a],[],[a]) with requeue'
00:00 [32m+70[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  00:00 [32m+70[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
  HeadStructure: writer 40 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=16 GetVariable | Si={} U={41} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 31 -> writer 30
  HeadStructure: writer 30 value = .(Const(a),R32), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 50, bound=false
  HeadStructure: WRITE mode for unbound writer 50
  [G100] PC=21 HeadReader | Si={} U={41} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=23 Commit | Si={} U={41} inBody=false
00:00 [32m+70[0m[31m -2[0m: test/custom/merge_test.dart: Merge copy second stream: merge([],[b],Z) with requeue[0m                                                                                                      

=== Testing Merge Copy Second Stream ===
Program: merge(Xs,[Y|Ys],[Y?|Zs?]) :- merge(Xs?,Ys?,Zs).
Goal: merge([], [b], Z) where Z is unbound writer

Heap Setup:
  Arg0 (Xs?) = []
  Arg1 (Ys?) = [b]
  Arg2 (Zs) = unbound writer

--- Executing Goal: merge([], [b], Z) ---
Expected: Z will be bound to [b]

>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G200] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 2, 1: Const(b), 2: Const(null), 3: 1000}
  [G200] PutReader: continuing to PC 25
  [G200] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 2, 1: Const(b), 2: Const(null), 3: 1000}
  [G200] PutReader: creating fresh pair for ground constant null
  [G200] PutReader: created W1002/R1003 for constant
  [G200] PutReader: continuing to PC 26
  [G200] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 2, 1: Const(b), 2: Const(null), 3: 1000}
  [G200] PutWriter: value=1000, type=int
  [G200] PutWriter: storing writer 1000 in argWriters[2]
  [G200] PutWriter: about to increment PC to 27
  [G200] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -2[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -2[0m: test/custom/merge_test.dart: Merge copy second stream: merge([],[b],Z) with requeue[0m                                                                                                      
>>> REDUCTION: Goal 200 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
Goals executed: [200]
Writer 5 bound? true
Writer 5 value: .(Const(b),W1000)

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=24 PutReader | Si={} U={41} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 41, 1: Const(a), 2: R32, 3: 1000}
  [G100] PutReader: value=41, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 41
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={41} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 41, 1: Const(a), 2: R32, 3: 1000}
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={41} inBody=true
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge copy second stream: merge([],[b],Z) with requeue [1m[31m[E][0m[0m                                                                                                  
  Expected: <Instance of 'ReaderTerm'>
    Actual: WriterTerm:<W1000>
     Which: is not an instance of 'ReaderTerm'
  Tail should be a reader reference
  
  package:matcher                    expect
  test/custom/merge_test.dart 329:5  main.<fn>
  
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 41, 1: Const(a), 2: R32, 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={41} inBody=true

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Merge copy second stream: merge([],[b],Z) with requeue'
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
  HeadStructure: writer 40 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=16 GetVariable | Si={} U={41} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 32 -> writer 33
  HeadStructure: writer 33 value = .(Const(b),R34), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G100] PC=21 HeadReader | Si={} U={41} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=23 Commit | Si={} U={41} inBody=false
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=24 PutReader | Si={} U={41} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 41, 1: Const(b), 2: R34, 3: 1002}
  [G100] PutReader: value=41, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 41
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={41} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 41, 1: Const(b), 2: R34, 3: 1002}
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={41} inBody=true
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 41, 1: Const(b), 2: R34, 3: 1002}
  [G100] PutWriter: value=1002, type=int
  [G100] PutWriter: storing writer 1002 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={41} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
  HeadStructure: writer 40 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=16 GetVariable | Si={} U={41} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 34 -> writer 35
  HeadStructure: writer 35 value = .(Const(c),R36), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G100] PC=21 HeadReader | Si={} U={41} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=23 Commit | Si={} U={41} inBody=false
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=24 PutReader | Si={} U={41} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 41, 1: Const(c), 2: R36, 3: 1004}
  [G100] PutReader: value=41, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 41
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={41} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 41, 1: Const(c), 2: R36, 3: 1004}
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={41} inBody=true
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      

======================================================================
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 41, 1: Const(c), 2: R36, 3: 1004}
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
METAINTERPRETER TEST: THREE-WAY CIRCULAR MERGE
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PutWriter: value=1004, type=int
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
Object program:
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PutWriter: storing writer 1004 in argWriters[2]
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause(merge([X|Xs],Ys,[X?|Zs?]), merge(Ys?,Xs?,Zs)).
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PutWriter: about to increment PC to 27
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause(merge(Xs,[Y|Ys],[Y?|Zs?]), merge(Xs?,Ys?,Zs)).
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause(merge([],[],[]), true).
Metainterpreter:
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=27 Requeue | Si={} U={41} inBody=true
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))
Expected: Creates infinite circular streams
  Xs tail depends on Zs which depends on Xs (circular)
  Ys tail depends on Xs which depends on Ys (circular)
  Zs tail depends on Ys which depends on Zs (circular)
======================================================================

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
  HeadStructure: writer 40 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=16 GetVariable | Si={} U={41} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 36 -> writer 37
  HeadStructure: writer 37 value = .(Const(d),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1004, bound=false
  HeadStructure: WRITE mode for unbound writer 1004
  [G100] PC=21 HeadReader | Si={} U={41} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={41} inBody=false
  [G100] PC=23 Commit | Si={} U={41} inBody=false
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
HEAP SETUP:
  Writer 1 (Xs) paired with Reader 2 (Xs?)
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  Writer 3 (Ys) paired with Reader 4 (Ys?)
  Writer 5 (Zs) paired with Reader 6 (Zs?)
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=24 PutReader | Si={} U={41} inBody=true
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 41, 1: Const(d), 2: Const(null), 3: 1006}
  [G100] PutReader: value=41, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 41
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={41} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 41, 1: Const(d), 2: Const(null), 3: 1006}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1008/R1009 for constant
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={41} inBody=true
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 41, 1: Const(d), 2: Const(null), 3: 1006}
  [G100] PutWriter: value=1006, type=int
  [G100] PutWriter: storing writer 1006 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={41} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
  HeadStructure: writer 40 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=16 GetVariable | Si={} U={41} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={41} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=29 ClauseTry | Si={} U={41} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={41} inBody=false
  [G100] PC=31 HeadConstant | Si={41} U={41} inBody=false
  [DEBUG] HeadConstant checking reader 1009: value=Const(null) vs pattern=null
  [G100] PC=32 HeadConstant | Si={41} U={41} inBody=false
  [G100] PC=33 Commit | Si={41} U={41} inBody=false
  [G100] PC=36 SuspendEnd | Si={} U={41} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {41}
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
PROGRAM LABELS:
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             

=== Testing Merge Both Streams ===
Program: merge with all 3 clauses
Goal: merge([a], [b], Z) where Z is unbound writer

Heap Setup:
  Arg0 (Xs?) = [a]
  Arg1 (Ys?) = [b]
  Arg2 (Zs) = unbound writer

00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause/2 => PC 0
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> TRY: Goal 200 at PC 0
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
--- Executing Goal: merge([a], [b], Z) ---
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause/2_c2 => PC 18
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
Expected: Z = [a, b] (alternating from both streams)

00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  clause/2_c3 => PC 36
  clause/2_end => PC 45
  run/1 => PC 47
  run/1_c2 => PC 52
  run/1_c3 => PC 62
  run/1_end => PC 72

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
>>> TRY: Goal 300 at PC 0
>>> REDUCTION: Goal 300 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G300] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G300] PutReader: continuing to PC 11
  [G300] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G300] PutReader: creating fresh pair for ground constant null
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
STRUCTURES:
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutReader: created W1002/R1003 for constant
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [a|Xs?] = writer 10
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [b|Ys?] = writer 12
  [c|Zs?] = writer 14
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: Const(null), 2: 4, 3: 1000}
  [G300] PutWriter: value=1000, type=int
  [G300] PutWriter: storing writer 1000 in argWriters[2]
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  merge([a|Xs?], Ys?, Zs) = writer 16
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  merge([b|Ys?], Zs?, Xs) = writer 18
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  merge([c|Zs?], Xs?, Ys) = writer 20

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
>>> REDUCTION: Goal 300 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G300] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: Const(null), 2: 1003, 3: 1004}
  [G300] PutReader: continuing to PC 11
  [G300] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: Const(null), 2: 1003, 3: 1004}
  [G300] PutReader: creating fresh pair for ground constant null
00:00 [32m+70[0m[31m -3[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
Starting goal at PC 47

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutReader: created W1006/R1007 for constant
  [G300] PutReader: continuing to PC 12
  [G300] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: Const(null), 2: 1003, 3: 1004}
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> ACTIVATION: Goal 100 awakened at PC 0
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutWriter: value=1004, type=int
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G200] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1010}
  [G200] PutReader: continuing to PC 11
  [G200] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1010}
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutWriter: storing writer 1004 in argWriters[2]
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G200] PutReader: continuing to PC 12
  [G200] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1010}
  [G200] PutWriter: value=1010, type=int
  [G200] PutWriter: storing writer 1010 in argWriters[2]
  [G200] PutWriter: about to increment PC to 13
  [G200] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 200 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G200] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1012}
  [G200] PutReader: continuing to PC 25
  [G200] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1012}
  [G200] PutReader: continuing to PC 26
  [G200] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1012}
  [G200] PutWriter: value=1012, type=int
  [G200] PutWriter: storing writer 1012 in argWriters[2]
  [G200] PutWriter: about to increment PC to 27
  [G200] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
  [G300] PutWriter: about to increment PC to 13
  [G300] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> REDUCTION: Goal 200 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G200] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1014}
  [G200] PutReader: continuing to PC 25
  [G200] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1014}
  [G200] PutReader: creating fresh pair for ground constant null
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
>>> REDUCTION: Goal 300 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G200] PutReader: created W1016/R1017 for constant
  [G200] PutReader: continuing to PC 26
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
Goals executed: [300]
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G200] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1014}
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
Writer 5 bound? true
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  [G200] PutWriter: value=1014, type=int
  [G200] PutWriter: storing writer 1014 in argWriters[2]
  [G200] PutWriter: about to increment PC to 27
  [G200] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -3[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates[0m                                                                                                             
Writer 5 value: .(Const(a),W1000)

00:00 [32m+70[0m[31m -3[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> REDUCTION: Goal 200 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -4[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 41 -> writer 40
00:00 [32m+70[0m[31m -4[0m: test/custom/merge_test.dart: Merge both streams: merge([a],[b],Z) alternates [1m[31m[E][0m[0m                                                                                                         
  Expected: <Instance of 'ReaderTerm'>
    Actual: WriterTerm:<W1000>
     Which: is not an instance of 'ReaderTerm'
  Tail should be a reader
  
  package:matcher                    expect
  test/custom/merge_test.dart 461:5  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Merge both streams: merge([a],[b],Z) alternates'
00:00 [32m+70[0m[31m -4[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)[0m                                                                                  
  HeadStructure: writer 40 value = .(Const(1),W1010), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1006, bound=false
  HeadStructure: WRITE mode for unbound writer 1006
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1010, 2: 1009, 3: 1018}
  [G100] PutReader: value=1009, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1009
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1010, 2: 1009, 3: 1018}
WARNING: PutReader got unexpected value: W1010
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1010, 2: 1009, 3: 1018}
  [G100] PutWriter: value=1018, type=int
  [G100] PutWriter: storing writer 1018 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1009: value=Const(null) vs pattern=null
  [G100] PC=31 HeadConstant | Si={} U={} inBody=false
  [G100] PC=32 HeadConstant | Si={} U={} inBody=false
  [G100] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=34 Proceed | Si={} U={} inBody=true

======================================================================
RESULTS
======================================================================
Goals executed in order: [100, 200, 100]
Total executions: 3

Xs (W40) bound: true
Xs = [1]
00:00 [32m+70[0m[31m -4[0m: test/custom/merge_test.dart: Merge longer streams: merge([a,b,c], [d,e,f], Z)[0m                                                                                                            

=== Testing Merge Longer Streams ===
Program: merge with all 3 clauses
Goal: merge([a,b,c], [d,e,f], Z) where Z is unbound writer

Heap Setup:
  Arg0 (Xs?) = [a,b,c]
  Arg1 (Ys?) = [d,e,f]
  Arg2 (Zs) = unbound writer

--- Executing Goal: merge([a,b,c], [d,e,f], Z) ---
Expected: Z = [a, d, b, e, c, f] (alternating)

>>> TRY: Goal 400 at PC 0
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 4, 3: 1000}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 4, 3: 1000}
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 4, 3: 1000}
  [G400] PutWriter: value=1000, type=int
  [G400] PutWriter: storing writer 1000 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1003, 3: 1004}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1003, 3: 1004}
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1003, 3: 1004}
  [G400] PutWriter: value=1004, type=int
  [G400] PutWriter: storing writer 1004 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1007, 3: 1008}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1007, 3: 1008}
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1007, 3: 1008}
  [G400] PutWriter: value=1008, type=int
  [G400] PutWriter: storing writer 1008 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1011, 3: 1012}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1011, 3: 1012}
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1011, 3: 1012}
  [G400] PutWriter: value=1012, type=int
  [G400] PutWriter: storing writer 1012 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(c), 1: Const(null), 2: 1015, 3: 1016}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(c), 1: Const(null), 2: 1015, 3: 1016}
  [G400] PutReader: creating fresh pair for ground constant null
  [G400] PutReader: created W1018/R1019 for constant
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(c), 1: Const(null), 2: 1015, 3: 1016}
  [G400] PutWriter: value=1016, type=int
  [G400] PutWriter: storing writer 1016 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G400] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(f), 1: Const(null), 2: 1019, 3: 1020}
  [G400] PutReader: continuing to PC 11
  [G400] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(f), 1: Const(null), 2: 1019, 3: 1020}
  [G400] PutReader: creating fresh pair for ground constant null
  [G400] PutReader: created W1022/R1023 for constant
  [G400] PutReader: continuing to PC 12
  [G400] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(f), 1: Const(null), 2: 1019, 3: 1020}
  [G400] PutWriter: value=1020, type=int
  [G400] PutWriter: storing writer 1020 in argWriters[2]
  [G400] PutWriter: about to increment PC to 13
  [G400] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 400 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
Goals executed: [400]
Writer 5 bound? true
Writer 5 value: .(Const(a),W1000)

Extracted list: [a]
00:00 [32m+70[0m[31m -5[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> TRY: Goal 100 at PC 47
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Merge longer streams: merge([a,b,c], [d,e,f], Z) [1m[31m[E][0m[0m                                                                                                        
  Expected: <6>
    Actual: <1>
  Should have 6 elements
  
  package:matcher                    expect
  test/custom/merge_test.dart 650:5  main.<fn>
  
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Merge longer streams: merge([a,b,c], [d,e,f], Z)'
  [DEBUG] HeadConstant checking reader 25: value=,(W22,W20) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 25 -> writer 24
  HeadStructure: writer 24 value = ,(W22,W20), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=55 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=0, S=0
  [G100] UnifyWriter: struct.args[0] = W22
  [G100] PC=56 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=1, S=1
  [G100] UnifyWriter: struct.args[1] = W20
  [G100] PC=57 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 57 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=58 PutReader | Si={} U={} inBody=true
  [G100] PC=58 PutReader varIndex=0 argSlot=0 clauseVars={0: 22, 1: 20}
  [G100] PutReader: value=22, wc=Instance of 'WriterCell', wc.readerId=23
  [G100] PutReader: Setting argReaders[0] = 23
  [G100] PutReader: continuing to PC 59
  [G100] PC=59 Spawn | Si={} U={} inBody=true
  [G100] PC=60 PutReader | Si={} U={} inBody=true
  [G100] PC=60 PutReader varIndex=1 argSlot=0 clauseVars={0: 22, 1: 20}
  [G100] PutReader: value=20, wc=Instance of 'WriterCell', wc.readerId=21
  [G100] PutReader: Setting argReaders[0] = 21
  [G100] PutReader: continuing to PC 61
  [G100] PC=61 Requeue | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           

=== Testing Sequential Merge ===
Program: merge with all 3 clauses
Goal 1: merge([a,b,c,d], [], Xs) - copy first stream
Goal 2: merge(Xs?, [1,2,3,4], Zs) - merge result with numbers

Heap Setup:
  Input1 = [a,b,c,d]
  Empty = []
  Xs = unbound writer
  Input2 = [1,2,3,4]
  Zs = unbound writer

00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=47 Label | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
--- Setting up Goal 1: merge([a,b,c,d], [], Xs) ---
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
--- Setting up Goal 2: merge(Xs?, [1,2,3,4], Zs) ---
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
--- Running both goals concurrently ---

>>> TRY: Goal 500 at PC 0
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [DEBUG] HeadConstant checking reader 21: value=merge(W14,R2,W3) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 500 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = merge(W14,R2,W3), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
  [G500] PutReader: continuing to PC 11
  [G500] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
  [G500] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: value=1000, type=int
  [G500] PutWriter: storing writer 1000 in argWriters[2]
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 21}
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: value=21, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 21
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 21}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 500 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=70 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 21, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutReader: continuing to PC 25
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 71
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutReader: continuing to PC 26
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=50 Commit | Si={1001} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: value=1004, type=int
  [G500] PutWriter: storing writer 1004 in argWriters[2]
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=53 ClauseTry | Si={} U={1001} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: about to increment PC to 27
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=54 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=63 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1001} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 500 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G500] PutReader: continuing to PC 25
  [G500] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G500] PutReader: continuing to PC 26
  [G500] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G500] PutWriter: value=1008, type=int
  [G500] PutWriter: storing writer 1008 in argWriters[2]
  [G500] PutWriter: about to increment PC to 27
  [G500] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = ,(W16,W18), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G10000] PC=55 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=56 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=57 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 57 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=58 PutReader | Si={} U={} inBody=true
  [G10000] PC=58 PutReader varIndex=0 argSlot=0 clauseVars={0: 16, 1: 18}
  [G10000] PutReader: continuing to PC 59
  [G10000] PC=59 Spawn | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 500 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=60 PutReader | Si={} U={} inBody=true
  [G10000] PC=60 PutReader varIndex=1 argSlot=0 clauseVars={0: 16, 1: 18}
  [G10000] PutReader: continuing to PC 61
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=61 Requeue | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutReader: continuing to PC 25
  [G500] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
  [G500] PutReader: creating fresh pair for ground constant null
  [G500] PutReader: created W1014/R1015 for constant
  [G500] PutReader: continuing to PC 26
  [G500] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=47 Label | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: value=1012, type=int
  [G500] PutWriter: storing writer 1012 in argWriters[2]
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G500] PutWriter: about to increment PC to 27
  [G500] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 500 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> TRY: Goal 600 at PC 0
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
>>> REDUCTION: Goal 600 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: READ mode, reader 19 -> writer 18
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G600] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
  [G600] PutReader: continuing to PC 11
  [G600] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: writer 18 value = merge(W12,R6,W1), expecting ,/2
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
WARNING: PutReader got unexpected value: W1000
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: NO MATCH, failing
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G600] PutReader: continuing to PC 12
  [G600] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
  [G600] PutWriter: value=1016, type=int
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G600] PutWriter: storing writer 1016 in argWriters[2]
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=66 Commit | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
  [G600] PutWriter: about to increment PC to 13
  [G600] PutWriter: continuing to PC 13
>>> FAIL: Goal 600 (all clauses exhausted, U empty)
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
Goals executed: [500, 600]
Writer 5 bound? true
Writer 9 bound? true
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
Xs value: .(Const(a),W1000)
Zs value: .(Const(a),W1016)

00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 19}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 19}
00:00 [32m+70[0m[31m -6[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)[0m                                                                                           
Extracted list: [a]
00:00 [32m+70[0m[31m -6[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PutWriter: value=null, type=Null
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 19, 1: 1002}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1003} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1003} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = merge(W14,R2,W3), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W14 = [|](Const(c),R6), MATCH!
  [G10001] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs) [1m[31m[E][0m[0m                                                                                       
  Expected: <8>
    Actual: <1>
  Should have 8 elements
  
  package:matcher                    expect
  test/custom/merge_test.dart 850:5  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Sequential merge: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs)'
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10001] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G10001] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 16 (commit succeeded, ÏƒÌ‚w has 3 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10001] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(W10,R4,W5), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 17}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 17}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 17, 1: 1008}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1009} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1009} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1009} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1009} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1009} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1009} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1009}
>>> TRY: Goal 10003 at PC 0
  [G10003] PC=0 Label | Si={} U={} inBody=false
  [G10003] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10003] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 19 -> writer 18
  HeadStructure: writer 18 value = merge(W12,R6,W1), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10003] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W12 = [|](Const(b),R4), MATCH!
  [G10003] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10003] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G10003] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10003 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10003] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=merge(R2,R6,W1006) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R2,R6,W1006), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1001}
  [G100] PutReader: value=1001, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1001}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1001, 1: 1016}
  [G100] PutReader: value=1016, wc=Instance of 'WriterCell', wc.readerId=1017
  [G100] PutReader: Setting argReaders[0] = 1017
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1017} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1017} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1017} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1017} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1017} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1017} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1017}
>>> TRY: Goal 10004 at PC 0
  [G10004] PC=0 Label | Si={} U={} inBody=false
  [G10004] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10004] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 17 -> writer 16
  HeadStructure: writer 16 value = merge(W10,R4,W5), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10004] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W10 = [|](Const(a),R2), MATCH!
  [G10004] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10004] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1008, bound=false
  HeadStructure: WRITE mode for unbound writer 1008
  [G10004] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10004 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10004] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = merge(R6,R1015,W1012), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1003}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1003}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1003, 1: 1026}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1027} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1027} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1027} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1027 -> writer 1026
  HeadStructure: writer 1026 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1027} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1027} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1027} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1027}
>>> TRY: Goal 10005 at PC 0
  [G10005] PC=0 Label | Si={} U={} inBody=false
  [G10005] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10005] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R2,R6,W1006), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10005] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1011,R1013), MATCH!
  [G10005] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10005] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1016, bound=false
  HeadStructure: WRITE mode for unbound writer 1016
  [G10005] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10005 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10005] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1023,R1025,W1020), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1009}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1009}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1009, 1: 1034}
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     

=== Testing Three-Stage Pipeline ===
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PutReader: continuing to PC 71
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
Program: merge with all 3 clauses
Goal 1: merge([a,b,c,d], [], Xs) - copy to Xs
Goal 2: merge(Xs?, [1,2,3,4], Zs) - merge Xs with numbers
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
Goal 3: merge(Zs?, [], Ws) - copy Zs to Ws

00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=47 Label | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
Heap Setup:
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  Input1 = [a,b,c,d]
  Empty = []
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  Xs, Zs, Ws = unbound writers

00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=50 Commit | Si={1035} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
--- Setting up Goal 1: merge([a,b,c,d], [], Xs) ---
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=53 ClauseTry | Si={} U={1035} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
--- Setting up Goal 2: merge(Xs?, [1,2,3,4], Zs) ---
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=54 HeadStructure | Si={} U={1035} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
--- Setting up Goal 3: merge(Zs?, [], Ws) ---
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
--- Running all three goals concurrently ---

00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 unbound or null, adding to Si and failing
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> TRY: Goal 700 at PC 0
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=63 ClauseTry | Si={} U={1035} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1035} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1035} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1035}
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> REDUCTION: Goal 700 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> TRY: Goal 10006 at PC 0
  [G10006] PC=0 Label | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
  [G700] PutReader: continuing to PC 11
  [G700] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
  [G700] PutReader: continuing to PC 12
  [G700] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),.(Const(d),Const(null)))), 2: 4, 3: 1000}
  [G700] PutWriter: value=1000, type=int
  [G700] PutWriter: storing writer 1000 in argWriters[2]
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=1 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutWriter: about to increment PC to 13
  [G700] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1003 -> writer 1002
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> REDUCTION: Goal 700 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: writer 1002 value = merge(R6,R1015,W1012), expecting merge/3
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
  [G700] PutReader: continuing to PC 25
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: MATCH! Entering READ mode
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=3 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutReader: continuing to PC 26
  [G700] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(b), 2: .(Const(c),.(Const(d),Const(null))), 3: 1004}
  [G700] PutWriter: value=1004, type=int
  [G700] PutWriter: storing writer 1004 in argWriters[2]
  [G700] PutWriter: about to increment PC to 27
  [G700] PutWriter: continuing to PC 27
>>> REDUCTION: Goal 700 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=4 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G700] PutReader: continuing to PC 25
  [G700] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G700] PutReader: continuing to PC 26
  [G700] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(c), 2: .(Const(d),Const(null)), 3: 1008}
  [G700] PutWriter: value=1008, type=int
  [G700] PutWriter: storing writer 1008 in argWriters[2]
  [G700] PutWriter: about to increment PC to 27
  [G700] PutWriter: continuing to PC 27
>>> REDUCTION: Goal 700 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G700] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=5 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutReader: continuing to PC 25
  [G700] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
  [G700] PutReader: creating fresh pair for ground constant null
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=6 HeadStructure | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutReader: created W1014/R1015 for constant
  [G700] PutReader: continuing to PC 26
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 4, 1: Const(d), 2: Const(null), 3: 1012}
  [G700] PutWriter: value=1012, type=int
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: clause var 10 = [|](R1019,R1021), MATCH!
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutWriter: storing writer 1012 in argWriters[2]
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=8 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G700] PutWriter: about to increment PC to 27
  [G700] PutWriter: continuing to PC 27
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10006] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10006] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> REDUCTION: Goal 700 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: arg is writer 1026, bound=false
  HeadStructure: WRITE mode for unbound writer 1026
  [G10006] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10006 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10006] PC=17 Proceed | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> TRY: Goal 800 at PC 0
>>> REDUCTION: Goal 800 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G800] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
  [G800] PutReader: continuing to PC 11
  [G800] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
WARNING: PutReader got unexpected value: W1000
  [G800] PutReader: continuing to PC 12
  [G800] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: W1000, 2: 8, 3: 1016}
  [G800] PutWriter: value=1016, type=int
  [G800] PutWriter: storing writer 1016 in argWriters[2]
  [G800] PutWriter: about to increment PC to 13
  [G800] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> TRY: Goal 100 at PC 47
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> FAIL: Goal 800 (all clauses exhausted, U empty)
>>> TRY: Goal 900 at PC 0
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> REDUCTION: Goal 900 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1017: value=merge(R1033,R1013,W1030) vs pattern=true
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: W1016, 2: 4, 3: 1018}
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PutReader: continuing to PC 11
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 value = merge(R1033,R1013,W1030), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: W1016, 2: 4, 3: 1018}
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
WARNING: PutReader got unexpected value: W1016
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1017}
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: value=1017, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1017
  [G100] PutReader: continuing to PC 68
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: W1016, 2: 4, 3: 1018}
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PutWriter: value=1018, type=int
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1017}
  [G100] PutWriter: value=null, type=Null
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PutWriter: storing writer 1018 in argWriters[2]
  [G900] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
  [G900] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1017, 1: 1042}
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
>>> REDUCTION: Goal 900 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
Goals executed: [700, 800, 900]
Xs bound? true
Zs bound? true
Ws bound? true

Ws value: .(Const(a),W1018)

00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: value=1042, wc=Instance of 'WriterCell', wc.readerId=1043
  [G100] PutReader: Setting argReaders[0] = 1043
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -7[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)[0m                                                                     
Extracted list: [a]
00:00 [32m+70[0m[31m -7[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=50 Commit | Si={1043} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1043} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1043} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1043 -> writer 1042
  HeadStructure: writer 1042 unbound or null, adding to Si and failing
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=63 ClauseTry | Si={} U={1043} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1043} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1043} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1043}
>>> TRY: Goal 10007 at PC 0
  [G10007] PC=0 Label | Si={} U={} inBody=false
  [G10007] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10007] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1009 -> writer 1008
  HeadStructure: writer 1008 value = merge(R1023,R1025,W1020), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10007] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1005,R1007), MATCH!
  [G10007] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10007] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1034, bound=false
  HeadStructure: WRITE mode for unbound writer 1034
  [G10007] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10007 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10007] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1027 -> writer 1026
  HeadStructure: writer 1026 value = merge(R1041,R1021,W1038), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1027}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1027}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws) [1m[31m[E][0m[0m                                                                 
  Expected: <8>
    Actual: <1>
  Should have 8 elements
  
  package:matcher                     expect
  test/custom/merge_test.dart 1057:5  main.<fn>
  
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1027, 1: 1052}

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Three-stage pipeline: merge([a,b,c,d],[],Xs), merge(Xs?,[1,2,3,4],Zs), merge(Zs?,[],Ws)'
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1053} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1053} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1053} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1053} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_reverse_order_test.dart: Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs) [1m[31m[E][0m[0m                                                                              
  Expected: [1, 2, 3]
    Actual: [1]
     Which: at location [1] is [1] which shorter than expected
  Xs should be [1, 2, 3]
  
  package:matcher                                  expect
  test/custom/merge_reverse_order_test.dart 235:7  main.<fn>
  
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10000] PC=64 Otherwise | Si={} U={1053} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1053} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1053}
>>> TRY: Goal 10008 at PC 0
  [G10008] PC=0 Label | Si={} U={} inBody=false
  [G10008] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10008] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1017 -> writer 1016
  HeadStructure: writer 1016 value = merge(R1033,R1013,W1030), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10008] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1019,R1021), MATCH!
  [G10008] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10008] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1042, bound=false
  HeadStructure: WRITE mode for unbound writer 1042
  [G10008] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10008 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10008] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 value = merge(R1049,R1051,W1046), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1035}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1035}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1035, 1: 1062}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1063} U={} inBody=false

[1m[36mTo run this test again:[0m dart test test/custom/merge_reverse_order_test.dart -p vm --plain-name 'Reverse order: merge(Xs?,[a,b,c,d],Ys), merge([1,2,3],[],Xs)'
  [G10002] PC=53 ClauseTry | Si={} U={1063} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1063} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1063 -> writer 1062
  HeadStructure: writer 1062 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1063} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1063} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1063} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1063}
>>> TRY: Goal 10009 at PC 0
  [G10009] PC=0 Label | Si={} U={} inBody=false
  [G10009] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10009] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1027 -> writer 1026
  HeadStructure: writer 1026 value = merge(R1041,R1021,W1038), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10009] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1005,R1007), MATCH!
  [G10009] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10009] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1052, bound=false
  HeadStructure: WRITE mode for unbound writer 1052
  [G10009] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10009 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10009] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1043: value=merge(R1059,R1061,W1056) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1043 -> writer 1042
  HeadStructure: writer 1042 value = merge(R1059,R1061,W1056), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1043}
  [G100] PutReader: value=1043, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1043
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1043}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1043, 1: 1072}
  [G100] PutReader: value=1072, wc=Instance of 'WriterCell', wc.readerId=1073
  [G100] PutReader: Setting argReaders[0] = 1073
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1073} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1073} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1073} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1073 -> writer 1072
  HeadStructure: writer 1072 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1073} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1073} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1073} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1073}
>>> TRY: Goal 10010 at PC 0
  [G10010] PC=0 Label | Si={} U={} inBody=false
  [G10010] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10010] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1035 -> writer 1034
  HeadStructure: writer 1034 value = merge(R1049,R1051,W1046), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10010] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1011,R1013), MATCH!
  [G10010] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10010] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1062, bound=false
  HeadStructure: WRITE mode for unbound writer 1062
  [G10010] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10010 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10010] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1053}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1053}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1053, 1: 1082}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1083} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1083} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1083} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1083 -> writer 1082
  HeadStructure: writer 1082 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1083} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1083} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1083} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1083}
>>> TRY: Goal 10011 at PC 0
  [G10011] PC=0 Label | Si={} U={} inBody=false
  [G10011] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10011] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1043 -> writer 1042
  HeadStructure: writer 1042 value = merge(R1059,R1061,W1056), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1037,R1039), MATCH!
  [G10011] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10011] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1072, bound=false
  HeadStructure: WRITE mode for unbound writer 1072
  [G10011] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10011] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10011 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10011] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1063 -> writer 1062
  HeadStructure: writer 1062 value = merge(R1079,R1081,W1076), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1063}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1063}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1063, 1: 1092}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1093} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1093} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1093} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1093 -> writer 1092
  HeadStructure: writer 1092 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1093} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1093} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1093} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1093}
>>> TRY: Goal 10012 at PC 0
  [G10012] PC=0 Label | Si={} U={} inBody=false
  [G10012] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10012] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1045,R1047), MATCH!
  [G10012] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10012] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1082, bound=false
  HeadStructure: WRITE mode for unbound writer 1082
  [G10012] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10012] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10012 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10012] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1073: value=merge(R1089,R1091,W1086) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1073 -> writer 1072
  HeadStructure: writer 1072 value = merge(R1089,R1091,W1086), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1073}
  [G100] PutReader: value=1073, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1073
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1073}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1073, 1: 1102}
  [G100] PutReader: value=1102, wc=Instance of 'WriterCell', wc.readerId=1103
  [G100] PutReader: Setting argReaders[0] = 1103
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1103} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1103} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1103} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1103 -> writer 1102
  HeadStructure: writer 1102 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1103} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1103} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1103} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1103}
>>> TRY: Goal 10013 at PC 0
  [G10013] PC=0 Label | Si={} U={} inBody=false
  [G10013] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10013] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1063 -> writer 1062
  HeadStructure: writer 1062 value = merge(R1079,R1081,W1076), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10013] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1029,R1031), MATCH!
  [G10013] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10013] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1092, bound=false
  HeadStructure: WRITE mode for unbound writer 1092
  [G10013] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10013 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10013] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1083 -> writer 1082
  HeadStructure: writer 1082 value = merge(R1099,R1101,W1096), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1083}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1083}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1083, 1: 1112}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1113} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1113} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1113} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1113 -> writer 1112
  HeadStructure: writer 1112 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1113} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1113} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1113} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1113}
>>> TRY: Goal 10014 at PC 0
  [G10014] PC=0 Label | Si={} U={} inBody=false
  [G10014] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10014] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1073 -> writer 1072
  HeadStructure: writer 1072 value = merge(R1089,R1091,W1086), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10014] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1045,R1047), MATCH!
  [G10014] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10014] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1102, bound=false
  HeadStructure: WRITE mode for unbound writer 1102
  [G10014] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10014 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10014] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                

=== Testing Diamond Composition ===
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
Program: merge with all 3 clauses
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
Goal 1: merge([1,2,3], [a,b,c], Xs) - merge numbers and letters
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
Goal 2: merge([4,5,6], [d,e,f], Ys) - merge more numbers and letters
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: READ mode, reader 1093 -> writer 1092
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
Goal 3: merge(Xs?, Ys?, Zs) - merge the two results

00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: writer 1092 value = merge(R1109,R1111,W1106), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
Heap Setup:
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=66 Commit | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  List1 = [1,2,3]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  List2 = [a,b,c]
  List3 = [4,5,6]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  List4 = [d,e,f]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1093}
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  Xs, Ys, Zs = unbound writers

00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
--- Setting up Goal 1: merge([1,2,3], [a,b,c], Xs) ---
--- Setting up Goal 2: merge([4,5,6], [d,e,f], Ys) ---
--- Setting up Goal 3: merge(Xs?, Ys?, Zs) ---
--- Running all three goals concurrently ---

>>> TRY: Goal 1000 at PC 0
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1093}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: .(Const(2),.(Const(3),Const(null))), 2: 4, 3: 1000}
  [G1000] PutReader: continuing to PC 11
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: .(Const(2),.(Const(3),Const(null))), 2: 4, 3: 1000}
  [G1000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: .(Const(2),.(Const(3),Const(null))), 2: 4, 3: 1000}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1093, 1: 1122}
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: value=1000, type=int
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PutReader: continuing to PC 71
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: storing writer 1000 in argWriters[2]
  [G1000] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1123} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10002] PC=53 ClauseTry | Si={} U={1123} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1123} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1123 -> writer 1122
  HeadStructure: writer 1122 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1123} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1123} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1123} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1123}
>>> TRY: Goal 10015 at PC 0
  [G10015] PC=0 Label | Si={} U={} inBody=false
  [G10015] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10015] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1083 -> writer 1082
  HeadStructure: writer 1082 value = merge(R1099,R1101,W1096), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10015] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: clause var 10 = [|](R1029,R1031), MATCH!
  [G10015] PC=7 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 1003, 3: 1004}
  [G1000] PutReader: continuing to PC 11
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=8 UnifyWriter | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 1003, 3: 1004}
  [G1000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=9 HeadStructure | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: .(Const(b),.(Const(c),Const(null))), 2: 1003, 3: 1004}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: value=1004, type=int
  [G1000] PutWriter: storing writer 1004 in argWriters[2]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=10 UnifyReader | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: about to increment PC to 13
  [G1000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(2), 1: .(Const(3),Const(null)), 2: 1007, 3: 1008}
  [G1000] PutReader: continuing to PC 11
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(2), 1: .(Const(3),Const(null)), 2: 1007, 3: 1008}
  [G1000] PutReader: continuing to PC 12
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(2), 1: .(Const(3),Const(null)), 2: 1007, 3: 1008}
  [G1000] PutWriter: value=1008, type=int
  [G1000] PutWriter: storing writer 1008 in argWriters[2]
  [G1000] PutWriter: about to increment PC to 13
  [G1000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1011, 3: 1012}
  [G1000] PutReader: continuing to PC 11
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1011, 3: 1012}
  [G1000] PutReader: continuing to PC 12
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: .(Const(c),Const(null)), 2: 1011, 3: 1012}
  [G1000] PutWriter: value=1012, type=int
  [G1000] PutWriter: storing writer 1012 in argWriters[2]
  [G1000] PutWriter: about to increment PC to 13
  [G1000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=12 HeadStructure | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(3), 1: Const(null), 2: 1015, 3: 1016}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: arg is writer 1112, bound=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutReader: continuing to PC 11
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(3), 1: Const(null), 2: 1015, 3: 1016}
  [G1000] PutReader: creating fresh pair for ground constant null
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: WRITE mode for unbound writer 1112
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutReader: created W1018/R1019 for constant
  [G1000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=13 UnifyReader | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(3), 1: Const(null), 2: 1015, 3: 1016}
  [G1000] PutWriter: value=1016, type=int
  [G1000] PutWriter: storing writer 1016 in argWriters[2]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=14 UnifyReader | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: about to increment PC to 13
  [G1000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=16 Commit | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 1000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G1000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(c), 1: Const(null), 2: 1019, 3: 1020}
  [G1000] PutReader: continuing to PC 11
  [G1000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(c), 1: Const(null), 2: 1019, 3: 1020}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> REDUCTION: Goal 10015 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutReader: creating fresh pair for ground constant null
  [G1000] PutReader: created W1022/R1023 for constant
  [G1000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> ACTIVATION: Goal 10000 awakened at PC 47
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(c), 1: Const(null), 2: 1019, 3: 1020}
  [G1000] PutWriter: value=1020, type=int
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G10015] PC=17 Proceed | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: storing writer 1020 in argWriters[2]
  [G1000] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> TRY: Goal 100 at PC 47
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G1000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1103: value=merge(R1119,R1121,W1116) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 1000 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1103 -> writer 1102
  HeadStructure: writer 1102 value = merge(R1119,R1121,W1116), expecting ,/2
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> TRY: Goal 2000 at PC 0
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(4), 1: .(Const(5),.(Const(6),Const(null))), 2: 8, 3: 1024}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutReader: continuing to PC 11
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(4), 1: .(Const(5),.(Const(6),Const(null))), 2: 8, 3: 1024}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1103}
  [G100] PutReader: value=1103, wc=null, wc.readerId=null
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1103
  [G100] PutReader: continuing to PC 68
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(4), 1: .(Const(5),.(Const(6),Const(null))), 2: 8, 3: 1024}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: value=1024, type=int
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1103}
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: storing writer 1024 in argWriters[2]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutWriter: value=null, type=Null
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=69 Spawn | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1027, 3: 1028}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=70 PutReader | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutReader: continuing to PC 11
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1103, 1: 1132}
  [G100] PutReader: value=1132, wc=Instance of 'WriterCell', wc.readerId=1133
  [G100] PutReader: Setting argReaders[0] = 1133
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1027, 3: 1028}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutReader: continuing to PC 12
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(d), 1: .(Const(e),.(Const(f),Const(null))), 2: 1027, 3: 1028}
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=50 Commit | Si={1133} U={} inBody=false
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: value=1028, type=int
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
  [G100] PC=53 ClauseTry | Si={} U={1133} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1133} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1133 -> writer 1132
  HeadStructure: writer 1132 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1133} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1133} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1133} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1133}

00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: storing writer 1028 in argWriters[2]
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
Goals executed: 30 executions

======================================================================
RESULTS
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: about to increment PC to 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
======================================================================
Xs (W1) bound: true
Ys (W3) bound: true
Zs (W5) bound: true
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: continuing to PC 13
00:00 [32m+70[0m[31m -8[0m: test/custom/metainterp_three_way_circular_test.dart: Metainterpreter three-way circular: run((merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)))[0m                      
Xs value: [|](R1011,R1013)
Ys value: [|](R1005,R1007)
Zs value: [|](R1019,R1021)

âœ“ Three-way circular merge test complete
Note: This creates infinite circular streams - execution limited by maxCycles
00:00 [32m+70[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(5), 1: .(Const(6),Const(null)), 2: 1031, 3: 1032}
  [G2000] PutReader: continuing to PC 11
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(5), 1: .(Const(6),Const(null)), 2: 1031, 3: 1032}
  [G2000] PutReader: continuing to PC 12
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(5), 1: .(Const(6),Const(null)), 2: 1031, 3: 1032}
  [G2000] PutWriter: value=1032, type=int
  [G2000] PutWriter: storing writer 1032 in argWriters[2]
  [G2000] PutWriter: about to increment PC to 13
  [G2000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1035, 3: 1036}
  [G2000] PutReader: continuing to PC 11
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1035, 3: 1036}
  [G2000] PutReader: continuing to PC 12
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(e), 1: .(Const(f),Const(null)), 2: 1035, 3: 1036}
  [G2000] PutWriter: value=1036, type=int
  [G2000] PutWriter: storing writer 1036 in argWriters[2]
  [G2000] PutWriter: about to increment PC to 13
  [G2000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(6), 1: Const(null), 2: 1039, 3: 1040}
  [G2000] PutReader: continuing to PC 11
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(6), 1: Const(null), 2: 1039, 3: 1040}
  [G2000] PutReader: creating fresh pair for ground constant null
  [G2000] PutReader: created W1042/R1043 for constant
  [G2000] PutReader: continuing to PC 12
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(6), 1: Const(null), 2: 1039, 3: 1040}
  [G2000] PutWriter: value=1040, type=int
  [G2000] PutWriter: storing writer 1040 in argWriters[2]
  [G2000] PutWriter: about to increment PC to 13
  [G2000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 2000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G2000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(f), 1: Const(null), 2: 1043, 3: 1044}
  [G2000] PutReader: continuing to PC 11
  [G2000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(f), 1: Const(null), 2: 1043, 3: 1044}
  [G2000] PutReader: creating fresh pair for ground constant null
  [G2000] PutReader: created W1046/R1047 for constant
  [G2000] PutReader: continuing to PC 12
  [G2000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(f), 1: Const(null), 2: 1043, 3: 1044}
  [G2000] PutWriter: value=1044, type=int
  [G2000] PutWriter: storing writer 1044 in argWriters[2]
  [G2000] PutWriter: about to increment PC to 13
00:00 [32m+71[0m[31m -8[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   00:00 [32m+71[0m[31m -8[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)[0m                                                                
  [G2000] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 2000 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> TRY: Goal 3000 at PC 0
>>> REDUCTION: Goal 3000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G3000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 12, 3: 1048}
  [G3000] PutReader: continuing to PC 11
  [G3000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 12, 3: 1048}
WARNING: PutReader got unexpected value: W1000
  [G3000] PutReader: continuing to PC 12
  [G3000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 12, 3: 1048}
  [G3000] PutWriter: value=1048, type=int
  [G3000] PutWriter: storing writer 1048 in argWriters[2]
  [G3000] PutWriter: about to increment PC to 13
  [G3000] PutWriter: continuing to PC 13
>>> FAIL: Goal 3000 (all clauses exhausted, U empty)
Goals executed: [1000, 2000, 3000]
Xs bound? true
Ys bound? true
Zs bound? true

Zs value: .(Const(1),W1048)

Extracted list: [1]
00:00 [32m+71[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   

======================================================================
SIMPLE CLAUSE TEST
Program: clause(p(a), true).
Goal: clause(p(X), Y)
Expected: X binds to a, Y binds to true
======================================================================

00:00 [32m+71[0m[31m -9[0m: test/custom/merge_test.dart: Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs) [1m[31m[E][0m[0m                                                            
  Expected: <12>
    Actual: <1>
  Should have 12 elements
  
  package:matcher                     expect
  test/custom/merge_test.dart 1286:5  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_test.dart -p vm --plain-name 'Diamond composition: merge([1,2,3],[a,b,c],Xs), merge([4,5,6],[d,e,f],Ys), merge(Xs?,Ys?,Zs)'
00:00 [32m+71[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   
HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)
  Writer 3 (Y) paired with Reader 4 (Y?)

PROGRAM:
  PC 0: Instance of 'Label'
  PC 1: Instance of 'ClauseTry'
  PC 2: Instance of 'HeadStructure'
  PC 3: Instance of 'UnifyConstant'
  PC 4: Instance of 'HeadConstant'
  PC 5: Instance of 'Commit'
  PC 6: Instance of 'Proceed'
  PC 7: Instance of 'Label'
  PC 8: Instance of 'SuspendEnd'

Goal: clause(p(X), Y) at PC 0
CallEnv: readers={{0: 11}}, writers={{1: 3}}

Checking arguments:
  env.r(0) = 11 (should be rPX=11)
  env.r(1) = null (should be null)
  env.w(0) = null (should be null)
  env.w(1) = 3 (should be wY=3)

00:00 [32m+71[0m[31m -9[0m: test/custom/merge_test.dart: Circular dependency: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs) - partial evaluation[0m                                                                              

=== Testing Circular Dependency (Partial Evaluation) ===
Program: merge with all 3 clauses
Goal 1: merge(Xs?, [1], Ys) - Can this proceed without knowing Xs?
Goal 2: merge(Ys?, [2], Xs) - Can this proceed without knowing Ys?
Expected: Goals may partially evaluate or suspend

Heap Setup:
  Xs = unbound writer (rXs = 2)
  Ys = unbound writer (rYs = 4)
  [1] = bound
  [2] = bound

--- Setting up Goal 1: merge(Xs?, [1], Ys) ---
Xs? (reader 2) is unbound

--- Setting up Goal 2: merge(Ys?, [2], Xs) ---
Ys? (reader 4) is unbound

--- Running both goals concurrently (limit: 100 cycles) ---

>>> TRY: Goal 4000 at PC 0
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G4000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 6 -> writer 5
  HeadStructure: writer 5 value = .(Const(1),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G4000] PC=18 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=19 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=20 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 3, bound=false
  HeadStructure: WRITE mode for unbound writer 3
  [G4000] PC=21 HeadReader | Si={} U={2} inBody=false
  [G4000] PC=22 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=23 Commit | Si={} U={2} inBody=false
>>> REDUCTION: Goal 4000 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=24 PutReader | Si={} U={2} inBody=true
  [G4000] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutReader: continuing to PC 25
  [G4000] PC=25 PutReader | Si={} U={2} inBody=true
  [G4000] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutReader: creating fresh pair for ground constant null
  [G4000] PutReader: created W1002/R1003 for constant
  [G4000] PutReader: continuing to PC 26
  [G4000] PC=26 PutWriter | Si={} U={2} inBody=true
  [G4000] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutWriter: value=1000, type=int
  [G4000] PutWriter: storing writer 1000 in argWriters[2]
  [G4000] PutWriter: about to increment PC to 27
  [G4000] PutWriter: continuing to PC 27
  [G4000] PC=27 Requeue | Si={} U={2} inBody=true
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G4000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G4000] PC=29 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=30 HeadConstant | Si={} U={2} inBody=false
  [G4000] PC=31 HeadConstant | Si={2} U={2} inBody=false
  [G4000] PC=32 HeadConstant | Si={2} U={2} inBody=false
  [G4000] PC=33 Commit | Si={2} U={2} inBody=false
  [G4000] PC=36 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 4000 suspended on readers: {2}
>>> TRY: Goal 5000 at PC 0
  [G5000] PC=0 Label | Si={} U={} inBody=false
  [G5000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = .(Const(1),W1000), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G5000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=5 GetVariable | Si={} U={} inBody=false
  [G5000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G5000] PC=7 HeadReader | Si={} U={} inBody=false
  [G5000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 5000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 4000 awakened at PC 0
  [G5000] PC=10 PutReader | Si={} U={} inBody=true
  [G5000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G5000] PutReader: continuing to PC 11
  [G5000] PC=11 PutReader | Si={} U={} inBody=true
  [G5000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
WARNING: PutReader got unexpected value: W1000
  [G5000] PutReader: continuing to PC 12
  [G5000] PC=12 PutWriter | Si={} U={} inBody=true
  [G5000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G5000] PutWriter: value=1004, type=int
  [G5000] PutWriter: storing writer 1004 in argWriters[2]
  [G5000] PutWriter: about to increment PC to 13
  [G5000] PutWriter: continuing to PC 13
  [G5000] PC=13 Requeue | Si={} U={} inBody=true
  [G5000] PC=0 Label | Si={} U={} inBody=false
  [G5000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 8 -> writer 7
  HeadStructure: writer 7 value = .(Const(2),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G5000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=5 GetVariable | Si={} U={} inBody=false
  [G5000] PC=15 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=16 GetVariable | Si={} U={} inBody=false
  [G5000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G5000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G5000] PC=36 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 5000 (all clauses exhausted, U empty)
>>> TRY: Goal 4000 at PC 0
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(1),W1004), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G4000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=5 GetVariable | Si={} U={} inBody=false
  [G4000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G4000] PC=7 HeadReader | Si={} U={} inBody=false
  [G4000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 4000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=10 PutReader | Si={} U={} inBody=true
  [G4000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G4000] PutReader: continuing to PC 11
  [G4000] PC=11 PutReader | Si={} U={} inBody=true
  [G4000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
WARNING: PutReader got unexpected value: W1004
  [G4000] PutReader: continuing to PC 12
  [G4000] PC=12 PutWriter | Si={} U={} inBody=true
  [G4000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G4000] PutWriter: value=1006, type=int
  [G4000] PutWriter: storing writer 1006 in argWriters[2]
  [G4000] PutWriter: about to increment PC to 13
  [G4000] PutWriter: continuing to PC 13
  [G4000] PC=13 Requeue | Si={} U={} inBody=true
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G4000] PC=15 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G4000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=31 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=32 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 4000 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=34 Proceed | Si={} U={} inBody=true
Goals executed: [4000, 5000, 4000]
Xs bound? true
Ys bound? true
ROQ for reader 2: 0 suspended goals
ROQ for reader 4: 0 suspended goals

Xs value: .(Const(1),W1004)
Ys value: .(Const(1),W1000)
Xs bound: true
Ys bound: true

âœ“ Scheduler executed goals concurrently
âœ“ Test passed!
00:00 [32m+72[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   00:00 [32m+72[0m[31m -9[0m: test/custom/merge_test.dart: Sequential circular: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs) both in sequence[0m                                                                                  

=== Testing Sequential Circular Execution ===
Goal 1: merge(Xs?, [1], Ys) where Xs is unbound
Goal 2: merge(Ys?, [2], Xs) where Ys may be bound by Goal 1
Running both goals in sequence with 100 reduction budget total

Initial state:
  Xs = unbound (writer 1, reader 2)
  Ys = unbound (writer 3, reader 4)

--- Setting up Goal 1: merge(Xs?, [1], Ys) ---
--- Setting up Goal 2: merge(Ys?, [2], Xs) ---

--- Running both goals concurrently (limit: 100 cycles) ---

>>> TRY: Goal 6000 at PC 0
  [G6000] PC=0 Label | Si={} U={} inBody=false
  [G6000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G6000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G6000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G6000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 6 -> writer 5
  HeadStructure: writer 5 value = .(Const(1),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G6000] PC=18 HeadWriter | Si={} U={2} inBody=false
  [G6000] PC=19 HeadWriter | Si={} U={2} inBody=false
  [G6000] PC=20 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 3, bound=false
  HeadStructure: WRITE mode for unbound writer 3
  [G6000] PC=21 HeadReader | Si={} U={2} inBody=false
  [G6000] PC=22 HeadWriter | Si={} U={2} inBody=false
  [G6000] PC=23 Commit | Si={} U={2} inBody=false
>>> REDUCTION: Goal 6000 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G6000] PC=24 PutReader | Si={} U={2} inBody=true
  [G6000] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G6000] PutReader: continuing to PC 25
  [G6000] PC=25 PutReader | Si={} U={2} inBody=true
  [G6000] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G6000] PutReader: creating fresh pair for ground constant null
  [G6000] PutReader: created W1002/R1003 for constant
  [G6000] PutReader: continuing to PC 26
  [G6000] PC=26 PutWriter | Si={} U={2} inBody=true
  [G6000] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G6000] PutWriter: value=1000, type=int
  [G6000] PutWriter: storing writer 1000 in argWriters[2]
  [G6000] PutWriter: about to increment PC to 27
  [G6000] PutWriter: continuing to PC 27
  [G6000] PC=27 Requeue | Si={} U={2} inBody=true
  [G6000] PC=0 Label | Si={} U={} inBody=false
  [G6000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G6000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G6000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G6000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G6000] PC=29 ClauseTry | Si={} U={2} inBody=false
  [G6000] PC=30 HeadConstant | Si={} U={2} inBody=false
  [G6000] PC=31 HeadConstant | Si={2} U={2} inBody=false
  [G6000] PC=32 HeadConstant | Si={2} U={2} inBody=false
  [G6000] PC=33 Commit | Si={2} U={2} inBody=false
  [G6000] PC=36 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 6000 suspended on readers: {2}
>>> TRY: Goal 7000 at PC 0
  [G7000] PC=0 Label | Si={} U={} inBody=false
  [G7000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G7000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = .(Const(1),W1000), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G7000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G7000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G7000] PC=5 GetVariable | Si={} U={} inBody=false
  [G7000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G7000] PC=7 HeadReader | Si={} U={} inBody=false
  [G7000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G7000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 7000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 6000 awakened at PC 0
  [G7000] PC=10 PutReader | Si={} U={} inBody=true
  [G7000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G7000] PutReader: continuing to PC 11
  [G7000] PC=11 PutReader | Si={} U={} inBody=true
  [G7000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
WARNING: PutReader got unexpected value: W1000
  [G7000] PutReader: continuing to PC 12
  [G7000] PC=12 PutWriter | Si={} U={} inBody=true
  [G7000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G7000] PutWriter: value=1004, type=int
  [G7000] PutWriter: storing writer 1004 in argWriters[2]
  [G7000] PutWriter: about to increment PC to 13
  [G7000] PutWriter: continuing to PC 13
  [G7000] PC=13 Requeue | Si={} U={} inBody=true
  [G7000] PC=0 Label | Si={} U={} inBody=false
  [G7000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G7000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 8 -> writer 7
  HeadStructure: writer 7 value = .(Const(2),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G7000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G7000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G7000] PC=5 GetVariable | Si={} U={} inBody=false
  [G7000] PC=15 ClauseTry | Si={} U={} inBody=false
  [G7000] PC=16 GetVariable | Si={} U={} inBody=false
  [G7000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G7000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G7000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G7000] PC=36 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 7000 (all clauses exhausted, U empty)
>>> TRY: Goal 6000 at PC 0
  [G6000] PC=0 Label | Si={} U={} inBody=false
  [G6000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(1),W1004), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G6000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G6000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G6000] PC=5 GetVariable | Si={} U={} inBody=false
  [G6000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G6000] PC=7 HeadReader | Si={} U={} inBody=false
  [G6000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G6000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 6000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G6000] PC=10 PutReader | Si={} U={} inBody=true
  [G6000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G6000] PutReader: continuing to PC 11
  [G6000] PC=11 PutReader | Si={} U={} inBody=true
  [G6000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
WARNING: PutReader got unexpected value: W1004
  [G6000] PutReader: continuing to PC 12
  [G6000] PC=12 PutWriter | Si={} U={} inBody=true
  [G6000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G6000] PutWriter: value=1006, type=int
  [G6000] PutWriter: storing writer 1006 in argWriters[2]
  [G6000] PutWriter: about to increment PC to 13
  [G6000] PutWriter: continuing to PC 13
  [G6000] PC=13 Requeue | Si={} U={} inBody=true
  [G6000] PC=0 Label | Si={} U={} inBody=false
  [G6000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G6000] PC=15 ClauseTry | Si={} U={} inBody=false
00:00 [32m+72[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   
>>> TRY: Goal 100 at PC 0
00:00 [32m+72[0m[31m -9[0m: test/custom/merge_test.dart: Sequential circular: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs) both in sequence[0m                                                                                  
  [G6000] PC=16 GetVariable | Si={} U={} inBody=false
  [G6000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G6000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G6000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G6000] PC=31 HeadConstant | Si={} U={} inBody=false
  [G6000] PC=32 HeadConstant | Si={} U={} inBody=false
  [G6000] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 6000 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G6000] PC=34 Proceed | Si={} U={} inBody=true
Goals executed: [6000, 7000, 6000]
Total cycles: 3
Goal 1 executed: true
Goal 2 executed: true

=== Final State ===
Xs bound: true
Xs value: .(Const(1),W1004)
00:00 [32m+72[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=4 HeadConstant | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={} U={} inBody=false
00:00 [32m+72[0m[31m -9[0m: test/custom/merge_test.dart: Sequential circular: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs) both in sequence[0m                                                                                  
Ys bound: true
00:00 [32m+72[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
00:00 [32m+72[0m[31m -9[0m: test/custom/merge_test.dart: Sequential circular: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs) both in sequence[0m                                                                                  
Ys value: .(Const(1),W1000)
ROQ for reader 2: 0 suspended goals
ROQ for reader 4: 0 suspended goals

âœ“ Scheduler executed goals concurrently
âœ“ Test passed!
00:00 [32m+73[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   00:00 [32m+73[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Result: RunResult.terminated

======================================================================
RESULTS
======================================================================
X (W1) bound: true
Y (W3) bound: true
X value: Const(a)
âœ“ X correctly bound to a
Y value: Const(true)
âœ“ Y correctly bound to true

âœ“ clause/2 working correctly!
00:01 [32m+74[0m[31m -9[0m: test/custom/clause_only_test.dart: Simple clause/2: clause(p(a), true)[0m                                                                                                                   00:01 [32m+74[0m[31m -9[0m: [1m[90mloading test/custom/merge_three_way_circular_direct_test.dart[0m[0m                                                                                                                            00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            

======================================================================
THREE-WAY CIRCULAR MERGE (DIRECT - NO METAINTERPRETER)
Goals:
  Goal 100: merge([a|Xs?], Ys?, Zs)
  Goal 200: merge([b|Ys?], Zs?, Xs)
  Goal 300: merge([c|Zs?], Xs?, Ys)
Expected: Creates infinite circular streams
  Xs = [b, c, b, c, ...]  (from merge 2 output)
  Ys = [c, a, c, a, ...]  (from merge 3 output)
  Zs = [a, b, a, b, ...]  (from merge 1 output)
======================================================================

HEAP SETUP:
  Writer 1 (Xs) paired with Reader 2 (Xs?)
  Writer 3 (Ys) paired with Reader 4 (Ys?)
  Writer 5 (Zs) paired with Reader 6 (Zs?)

PROGRAM LABELS:
  merge/3_start => PC 0
  merge/3_clause2 => PC 14
  merge/3_clause3 => PC 28
  merge/3_end => PC 35

STRUCTURES:
  [a|Xs?] = writer 10
  [b|Ys?] = writer 12
  [c|Zs?] = writer 14

Starting three goals:
  Goal 100: merge([a|Xs?], Ys?, Zs)
  Goal 200: merge([b|Ys?], Zs?, Xs)
  Goal 300: merge([c|Zs?], Xs?, Ys)

00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         

======================================================================
METAINTERPRETER TEST: P(X) THEN P(X?)
Object program: clause(p(a),true). clause(p(b),true).
Metainterpreter: run(true). run(A) :- otherwise | clause(A?,B), run(B?).
Query: boot :- run(p(X)), run(p(X?))
Expected: First run(p(X)) binds X=a, second run(p(X?)) verifies p(a)
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

PROGRAM LABELS:
00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
>>> TRY: Goal 100 at PC 0
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  clause/2 => PC 0
  clause/2_c2 => PC 7
  clause/2_end => PC 14
  run/1 => PC 16
  run/1_c2 => PC 21
  run/1_end => PC 31
  boot/0 => PC 33
  boot/0_end => PC 42

STRUCTURES:
  p(X) = reader 11 bound to p(W1)
  p(X?) = reader 13 bound to p(R2)

Starting: boot(p(X), p(X?)) at PC 33

00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 10, bound=true
  HeadStructure: writer 10 value = .(Const(a),R2)
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 5, bound=false
  HeadStructure: WRITE mode for unbound writer 5
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: R2, 2: 4, 3: 1000}
  [G100] PutReader: value=4, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 4
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: R2, 2: 4, 3: 1000}
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: R2, 2: 4, 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       

======================================================================
METAINTERPRETER TEST: REVERSED ORDER
Object program: clause(p(a),true). clause(q(a),true).
Metainterpreter:
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run((p(X?), p(X)))
Expected: X binds to a, both p(X?) and p(X) succeed
Note: Reader comes FIRST, writer comes SECOND
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={4} inBody=false
  [G100] PC=16 GetVariable | Si={} U={4} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={4} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G100] PC=29 ClauseTry | Si={} U={4, 2} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={4, 2} inBody=false
  [G100] PC=31 HeadConstant | Si={4} U={4, 2} inBody=false
  [G100] PC=32 HeadConstant | Si={4, 2} U={4, 2} inBody=false
  [G100] PC=33 Commit | Si={4, 2} U={4, 2} inBody=false
  [G100] PC=36 SuspendEnd | Si={} U={4, 2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {4, 2}
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
PROGRAM LABELS:
00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  clause/2 => PC 0
  clause/2_c2 => PC 7
  clause/2_end => PC 14
  run/1 => PC 16
  run/1_c2 => PC 21
  run/1_c3 => PC 31
  run/1_end => PC 41

00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
>>> ACTIVATION: Goal 100 awakened at PC 0
  [G200] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: R4, 2: 6, 3: 1002}
  [G200] PutReader: continuing to PC 11
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
STRUCTURES:
  p(X?) = writer 10 bound to p(R2)
  p(X) = writer 12 bound to p(W1)
  (p(X?), p(X)) = reader 15 bound to ,(W10, W12)

00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
  [G200] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: R4, 2: 6, 3: 1002}
  [G200] PutReader: continuing to PC 12
  [G200] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: R4, 2: 6, 3: 1002}
  [G200] PutWriter: value=1002, type=int
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
Starting: run((p(X?), p(X))) at PC 16
00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
  [G200] PutWriter: storing writer 1002 in argWriters[2]
00:01 [32m+74[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       

00:01 [32m+74[0m[31m -9[0m: test/custom/merge_three_way_circular_direct_test.dart: Three-way circular merge (direct): merge([a|Xs?],Ys?,Zs), merge([b|Ys?],Zs?,Xs), merge([c|Zs?],Xs?,Ys)[0m                            
  [G200] PutWriter: about to increment PC to 13
  [G200] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G200] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(a), 1: W1000, 2: 4, 3: 1004}
  [G200] PutReader: continuing to PC 11
  [G200] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(a), 1: W1000, 2: 4, 3: 1004}
WARNING: PutReader got unexpected value: W1000
  [G200] PutReader: continuing to PC 12
  [G200] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(a), 1: W1000, 2: 4, 3: 1004}
  [G200] PutWriter: value=1004, type=int
  [G200] PutWriter: storing writer 1004 in argWriters[2]
  [G200] PutWriter: about to increment PC to 13
  [G200] PutWriter: continuing to PC 13
>>> SUSPENSION: Goal 200 suspended on readers: {4}
>>> TRY: Goal 300 at PC 0
>>> REDUCTION: Goal 300 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 200 awakened at PC 0
  [G300] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(c), 1: R6, 2: 2, 3: 1006}
  [G300] PutReader: continuing to PC 11
  [G300] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(c), 1: R6, 2: 2, 3: 1006}
  [G300] PutReader: continuing to PC 12
  [G300] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(c), 1: R6, 2: 2, 3: 1006}
  [G300] PutWriter: value=1006, type=int
  [G300] PutWriter: storing writer 1006 in argWriters[2]
  [G300] PutWriter: about to increment PC to 13
  [G300] PutWriter: continuing to PC 13
>>> REDUCTION: Goal 300 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G300] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(b), 1: W1002, 2: 6, 3: 1008}
  [G300] PutReader: continuing to PC 11
  [G300] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(b), 1: W1002, 2: 6, 3: 1008}
WARNING: PutReader got unexpected value: W1002
  [G300] PutReader: continuing to PC 12
  [G300] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(b), 1: W1002, 2: 6, 3: 1008}
  [G300] PutWriter: value=1008, type=int
  [G300] PutWriter: storing writer 1008 in argWriters[2]
  [G300] PutWriter: about to increment PC to 13
  [G300] PutWriter: continuing to PC 13
>>> FAIL: Goal 300 (all clauses exhausted, U empty)
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = .(Const(c),W1006), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(c), 1: W1006, 2: 2, 3: 1010}
  [G100] PutReader: value=2, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 2
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(c), 1: W1006, 2: 2, 3: 1010}
WARNING: PutReader got unexpected value: W1006
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(c), 1: W1006, 2: 2, 3: 1010}
  [G100] PutWriter: value=1010, type=int
  [G100] PutWriter: storing writer 1010 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(b),W1002), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=.(Const(b),W1002) vs pattern=null
  [G100] PC=36 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
>>> TRY: Goal 200 at PC 0
>>> FAIL: Goal 200 (all clauses exhausted, U empty)

Goals executed: 5 executions

======================================================================
RESULTS
======================================================================
Xs (W1) bound: true
Ys (W3) bound: true
Zs (W5) bound: true
Xs value: .(Const(b),W1002)
Ys value: .(Const(c),W1006)
Zs value: .(Const(a),W1000)

âœ“ Three-way circular merge (direct) test complete
Note: This creates infinite circular streams - execution limited by maxCycles
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         00:01 [32m+75[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         

======================================================================
SEQUENTIAL MERGE TEST
Goal 1: merge([1,2,3], [], Xs)
Goal 2: merge(Xs?, [a,b,c,d], Ys)
Expected: Xs = [1,2,3], Ys = [1,a,2,b,3,c,d]
======================================================================

00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
>>> TRY: Goal 100 at PC 33
00:01 [32m+75[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
HEAP SETUP:
  List1 (W10/R11) = [1,2,3]
  Empty (W20/R21) = []
  List2 (W30/R31) = [a,b,c,d]
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G100] PC=33 Label | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
  Result Xs (W40/R41) = unbound
  Result Ys (W50/R51) = unbound

00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G100] PC=34 ClauseTry | Si={} U={} inBody=false
  [G100] PC=35 GetVariable | Si={} U={} inBody=false
  [G100] PC=36 GetVariable | Si={} U={} inBody=false
  [G100] PC=37 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 37 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=38 PutReader | Si={} U={} inBody=true
00:01 [32m+75[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
======================================================================
EXECUTION TRACE
======================================================================

--- GOAL 100: merge([1,2,3], [], Xs) ---
--- GOAL 200: merge(Xs?, [a,b,c,d], Ys) ---
(Goal 200 will suspend because Xs? is unbound)

00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G100] PC=38 PutReader varIndex=0 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=11, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 39
  [G100] PC=39 Spawn | Si={} U={} inBody=true
  [G100] PC=40 PutReader | Si={} U={} inBody=true
  [G100] PC=40 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 41
  [G100] PC=41 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 13: value=p(R2) vs pattern=true
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 Otherwise | Si={} U={} inBody=false
  [G100] PC=24 GetVariable | Si={} U={} inBody=false
  [G100] PC=25 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 25 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=26 PutReader | Si={} U={} inBody=true
  [G100] PC=26 PutReader varIndex=0 argSlot=0 clauseVars={0: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 27
  [G100] PC=27 PutWriter | Si={} U={} inBody=true
  [G100] PC=27 PutWriter varIndex=1 argSlot=1 clauseVars={0: 13}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 28
  [G100] PutWriter: continuing to PC 28
  [G100] PC=28 Spawn | Si={} U={} inBody=true
  [G100] PC=29 PutReader | Si={} U={} inBody=true
  [G100] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 13, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 30
  [G100] PC=30 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [G100] PC=19 Commit | Si={1001} U={} inBody=false
  [G100] PC=22 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=23 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=32 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=23 Otherwise | Si={} U={} inBody=false
  [G10000] PC=24 GetVariable | Si={} U={} inBody=false
  [G10000] PC=25 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 25 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=26 PutReader | Si={} U={} inBody=true
  [G10000] PC=26 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G10000] PutReader: continuing to PC 27
  [G10000] PC=27 PutWriter | Si={} U={} inBody=true
  [G10000] PC=27 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 28
  [G10000] PutWriter: continuing to PC 28
  [G10000] PC=28 Spawn | Si={} U={} inBody=true
  [G10000] PC=29 PutReader | Si={} U={} inBody=true
  [G10000] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1002}
  [G10000] PutReader: continuing to PC 30
  [G10000] PC=30 Requeue | Si={} U={} inBody=true
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={1003} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=23 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=32 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
>>> TRY: Goal 100 at PC 16
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(R2), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
  UnifyConstant: reader 2 unbound, suspending
  [G10001] PC=4 HeadConstant | Si={2} U={} inBody=false
  [G10001] PC=5 Commit | Si={2} U={} inBody=false
  [G10001] PC=8 ClauseTry | Si={} U={2} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G10001] PC=9 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(R2), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=10 UnifyConstant | Si={} U={2} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting b
  UnifyConstant: reader 2 unbound, suspending
  [G10001] PC=11 HeadConstant | Si={2} U={2} inBody=false
  [G10001] PC=12 Commit | Si={2} U={2} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G10001] PC=15 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 10001 suspended on readers: {2}
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
  [G10002] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=5 Commit | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [DEBUG] HeadConstant checking reader 15: value=,(W10,W12) vs pattern=true
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
>>> REDUCTION: Goal 10002 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 15 -> writer 14
  HeadStructure: writer 14 value = ,(W10,W12), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=24 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=0, S=0
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
>>> ACTIVATION: Goal 10001 awakened at PC 0
>>> ACTIVATION: Goal 10000 awakened at PC 16
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] UnifyWriter: struct.args[0] = W10
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [G10002] PC=6 Proceed | Si={} U={} inBody=true
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=25 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=1, S=1
  [G100] UnifyWriter: struct.args[1] = W12
  [G100] PC=26 Commit | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
>>> REDUCTION: Goal 100 at PC 26 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(R2), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
  UnifyConstant: reader 2 bound to Const(a), matches!
  [G10001] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10001] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 5 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=27 PutReader | Si={} U={} inBody=true
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
>>> ACTIVATION: Goal 100 awakened at PC 16
  [G10001] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=20 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 16
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=27 PutReader varIndex=0 argSlot=0 clauseVars={0: 10, 1: 12}
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
  [DEBUG] HeadConstant checking reader 1001: value=Const(true) vs pattern=true
  [G100] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=20 Proceed | Si={} U={} inBody=true

00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PutReader: value=10, wc=Instance of 'WriterCell', wc.readerId=11
  [G100] PutReader: Setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 28
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
Goals executed: [100, 10000, 10001, 10002, 10001, 10000, 100]
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=28 Spawn | Si={} U={} inBody=true
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
Total executions: 7

======================================================================
RESULTS
======================================================================
X (W1) bound: true
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G100] PC=29 PutReader | Si={} U={} inBody=true
  [G100] PC=29 PutReader varIndex=1 argSlot=0 clauseVars={0: 10, 1: 12}
  [G100] PutReader: value=12, wc=Instance of 'WriterCell', wc.readerId=13
  [G100] PutReader: Setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 30
  [G100] PC=30 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 13: value=p(W1) vs pattern=true
  [G100] PC=22 ClauseTry | Si={} U={} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(W1), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=32 ClauseTry | Si={} U={} inBody=false
  [G100] PC=33 Otherwise | Si={} U={} inBody=false
  [G100] PC=34 GetVariable | Si={} U={} inBody=false
  [G100] PC=35 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 35 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=36 PutReader | Si={} U={} inBody=true
  [G100] PC=36 PutReader varIndex=0 argSlot=0 clauseVars={0: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 37
  [G100] PC=37 PutWriter | Si={} U={} inBody=true
  [G100] PC=37 PutWriter varIndex=1 argSlot=1 clauseVars={0: 13}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 38
  [G100] PutWriter: continuing to PC 38
  [G100] PC=38 Spawn | Si={} U={} inBody=true
  [G100] PC=39 PutReader | Si={} U={} inBody=true
  [G100] PC=39 PutReader varIndex=1 argSlot=0 clauseVars={0: 13, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 40
  [G100] PC=40 Requeue | Si={} U={} inBody=true
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [G100] PC=19 Commit | Si={1001} U={} inBody=false
  [G100] PC=22 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=23 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
  [G100] PC=32 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=33 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=42 SuspendEnd | Si={} U={1001} inBody=false
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
X value: Const(a)
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_pp_test.dart: Metainterpreter: run(p(X)), run(p(X?)) - writer then reader[0m                                                                                         
âœ“ X correctly bound to a

âœ“ Metainterpreter test passed!
âœ“ run(p(X)) bound X to a
âœ“ run(p(X?)) verified p(a) successfully
00:01 [32m+75[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=23 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(R2), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=32 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=33 Otherwise | Si={} U={} inBody=false
  [G10000] PC=34 GetVariable | Si={} U={} inBody=false
  [G10000] PC=35 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 35 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=36 PutReader | Si={} U={} inBody=true
  [G10000] PC=36 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G10000] PutReader: continuing to PC 37
00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G10000] PC=37 PutWriter | Si={} U={} inBody=true
  [G10000] PC=37 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 38
  [G10000] PutWriter: continuing to PC 38
  [G10000] PC=38 Spawn | Si={} U={} inBody=true
  [G10000] PC=39 PutReader | Si={} U={} inBody=true
  [G10000] PC=39 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1002}
  [G10000] PutReader: continuing to PC 40
  [G10000] PC=40 Requeue | Si={} U={} inBody=true
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=19 Commit | Si={1003} U={} inBody=false
  [G10000] PC=22 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=23 HeadStructure | Si={} U={1003} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 unbound or null, adding to Si and failing
  [G10000] PC=32 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=33 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=42 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
  [G10001] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10001] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 16
  [G10001] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(R2), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting a
00:01 [32m+76[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
>>> TRY: Goal 100 at PC 0
00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  UnifyConstant: reader 2 bound to Const(a), matches!
  [G10002] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 5 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 16
  [G10002] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 16
  [G100] PC=16 Label | Si={} U={} inBody=false
  [G100] PC=17 ClauseTry | Si={} U={} inBody=false
  [G100] PC=18 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=Const(true) vs pattern=true
  [G100] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=20 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 16
  [G10000] PC=16 Label | Si={} U={} inBody=false
  [G10000] PC=17 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=18 HeadConstant | Si={} U={} inBody=false
00:01 [32m+76[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G10000] PC=19 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 19 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+76[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
  [G10000] PC=20 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 10001, 10002, 100, 10000]
Total executions: 6

======================================================================
RESULTS
======================================================================
X (W1) bound: true
00:01 [32m+76[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = .(Const(1),R12), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 40, bound=false
  HeadStructure: WRITE mode for unbound writer 40
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
00:01 [32m+76[0m[31m -9[0m: test/custom/metainterp_reversed_test.dart: Metainterpreter with reversed order: run((p(X?), p(X)))[0m                                                                                       
X value: Const(a)
âœ“ X correctly bound to a

âœ“ Metainterpreter with reversed order passed!
âœ“ run((p(X?), p(X))) executed successfully
âœ“ p(X?) suspended on unbound X, then succeeded after p(X) bound X to a
00:01 [32m+76[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
00:01 [32m+77[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         00:01 [32m+77[0m[31m -9[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)[0m                                                                         
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutReader: value=21, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 21
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: R12, 2: 21, 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 12 -> writer 13
  HeadStructure: writer 13 value = .(Const(2),R14), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G100] PC=21 HeadReader | Si={} U={} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={} inBody=false
  [G100] PC=23 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=24 PutReader | Si={} U={} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1002}
  [G100] PutReader: value=21, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 21
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1002}
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={} inBody=true
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 21, 1: Const(2), 2: R14, 3: 1002}
  [G100] PutWriter: value=1002, type=int
  [G100] PutWriter: storing writer 1002 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 14 -> writer 15
  HeadStructure: writer 15 value = .(Const(3),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G100] PC=21 HeadReader | Si={} U={} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={} inBody=false
  [G100] PC=23 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=24 PutReader | Si={} U={} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1004}
  [G100] PutReader: value=21, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 21
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1004}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1006/R1007 for constant
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={} inBody=true
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 21, 1: Const(3), 2: Const(null), 3: 1004}
  [G100] PutWriter: value=1004, type=int
  [G100] PutWriter: storing writer 1004 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1007 -> writer 1006
  HeadStructure: writer 1006 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 21: value=Const(null) vs pattern=null
  [G100] PC=31 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1007: value=Const(null) vs pattern=null
  [G100] PC=32 HeadConstant | Si={} U={} inBody=false
  [G100] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=34 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G200] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 31, 3: 1008}
  [G200] PutReader: continuing to PC 11
  [G200] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 31, 3: 1008}
WARNING: PutReader got unexpected value: W1000
  [G200] PutReader: continuing to PC 12
  [G200] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 31, 3: 1008}
  [G200] PutWriter: value=1008, type=int
  [G200] PutWriter: storing writer 1008 in argWriters[2]
  [G200] PutWriter: about to increment PC to 13
  [G200] PutWriter: continuing to PC 13
>>> FAIL: Goal 200 (all clauses exhausted, U empty)

======================================================================
RESULTS
======================================================================
Goals executed: [100, 200]
Total executions: 2

Xs (W40) bound: true
Xs = [1]
00:01 [32m+77[0m[31m -10[0m: test/custom/merge_sequential_123_abcd_test.dart: Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys) [1m[31m[E][0m[0m                                                                    
  Expected: [1, 2, 3]
    Actual: [1]
     Which: at location [1] is [1] which shorter than expected
  Xs should be [1, 2, 3]
  
  package:matcher                                        expect
  test/custom/merge_sequential_123_abcd_test.dart 231:7  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/custom/merge_sequential_123_abcd_test.dart -p vm --plain-name 'Sequential merge: merge([1,2,3],[],Xs), merge(Xs?,[a,b,c,d],Ys)'
00:01 [32m+77[0m[31m -10[0m: [1m[90mloading test/custom/struct_test.dart[0m[0m                                                                                                                                                    00:01 [32m+77[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with writer[0m                                                                                                         00:01 [32m+77[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with writer[0m                                                                                                         

=== Testing Structure Matching ===
Program: p(f(a, b)).
Goal: p(X) where X is writer

Heap Setup:
  Writer 1 (X) - unbound

--- Executing Goal: p(X) ---
Expected: X (writer) will be bound to f(a, b) in ÏƒÌ‚w

00:01 [32m+77[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: opens file for reading[0m                                                                                          

=== FILE_OPEN TEST: Read Mode ===
00:01 [32m+77[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with writer[0m                                                                                                         
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=f/2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G100] PC=3 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=4 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer 1 bound? true
Writer 1 value: f(Const(a),Const(b))

âœ“ Structure correctly built: f(a, b)
âœ“ Test passed!
00:01 [32m+77[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 

======================================================================
SIMPLE BODY TEST
Program: p(a). forward(X) :- p(X).
Goal: forward(Y) where Y is unbound writer
00:01 [32m+77[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: opens file for reading[0m                                                                                          
Allocated handle: 1
00:01 [32m+77[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
Expected: Y binds to a via p(Y)
00:01 [32m+77[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: opens file for reading[0m                                                                                          
âœ“ file_open/3 succeeded for read mode

00:01 [32m+77[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
======================================================================

HEAP SETUP:
00:01 [32m+78[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: opens file for reading[0m                                                                                          00:01 [32m+78[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
  Writer 1 (Y) paired with Reader 2 (Y?)

PROGRAM LABELS:
00:01 [32m+78[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   

=== Testing Structure Matching with Reader ===
Program: p(f(a, b)).
Goal: p(X?) where X is already bound to f(a, b)

Heap Setup:
  Writer 1 (X) - bound to f(a, b)
  Reader 2 (X?) - paired with Writer 1

--- Executing Goal: p(X?) ---
Expected: Match X? (reads f(a, b)) with pattern f(a, b)

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:01 [32m+79[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+79[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=f/2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = f(Const(a),Const(b)), expecting f/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=4 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={} U={} inBody=false
00:01 [32m+79[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
  p/1 => PC 0
00:01 [32m+79[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+79[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
  p/1_end => PC 5
  forward/1 => PC 7
00:01 [32m+79[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   
  [G100] PC=6 Proceed | Si={} U={} inBody=true
00:01 [32m+79[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
  forward/1_end => PC 13
00:01 [32m+79[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   
Goals executed: [100]
00:01 [32m+79[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 

00:01 [32m+79[0m[31m -10[0m: test/custom/struct_test.dart: Simple structure matching: p(f(a, b)) with bound reader[0m                                                                                                   
Expected: Goal executes successfully (structure matches pattern)

âœ“ Structure correctly matched in READ mode
âœ“ Test passed!
00:01 [32m+80[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+80[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
Goal: forward(Y) at PC 7
CallEnv: writers={{0: 1}}

00:01 [32m+80[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: opens file for writing[0m                                                                                          

=== FILE_OPEN TEST: Write Mode ===
Allocated handle: 1
âœ“ file_open/3 succeeded for write mode

00:01 [32m+81[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+81[0m[31m -10[0m: test/custom/struct_test.dart: Structure matching: p(f(a, b)) fails on mismatch[0m                                                                                                          

=== Testing Structure Mismatch ===
Program: p(f(a, b)).
Goal: p(X?) where X is bound to f(a, c) - should FAIL

Heap Setup:
  Writer 1 (X) - bound to f(a, c)
  Reader 2 (X?) - paired with Writer 1

--- Executing Goal: p(X?) ---
Expected: FAIL or SUSPEND (no matching clause)

>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=f/2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = f(Const(a),Const(c)), expecting f/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=4 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=8 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
Goals executed: [100]
âœ“ Mismatch correctly detected
âœ“ Test passed!
00:01 [32m+82[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+82[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: fails for non-existent file in read mode[0m                                                                        

=== FILE_OPEN TEST: Non-existent File ===
[ERROR] file_open/3: Failed to open file /var/folders/2_/xqvp7z1x34d_7jn9h08663yr0000gp/T/glp_test_tFJzw8/does_not_exist.txt: PathNotFoundException: Cannot open file, path = '/var/folders/2_/xqvp7z1x34d_7jn9h08663yr0000gp/T/glp_test_tFJzw8/does_not_exist.txt' (OS Error: No such file or directory, errno = 2)
âœ“ file_open/3 correctly failed for non-existent file

00:01 [32m+83[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+83[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_close/1: closes valid handle[0m                                                                                            

=== FILE_CLOSE TEST: Valid Handle ===
Closed handle: 1
âœ“ file_close/1 succeeded

00:01 [32m+84[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+84[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_close/1: fails for invalid handle[0m                                                                                       

=== FILE_CLOSE TEST: Invalid Handle ===
[ERROR] file_close/1: invalid file handle: 9999
âœ“ file_close/1 correctly failed for invalid handle

00:01 [32m+85[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+85[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_read_handle/2: reads from open file[0m                                                                                     

=== FILE_READ_HANDLE TEST: Read Contents ===
Read contents: Hello from file handle!
âœ“ file_read_handle/2 succeeded

00:01 [32m+85[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+86[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+86[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
>>> TRY: Goal 100 at PC 7
  [G100] PC=7 Label | Si={} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={} inBody=false
  [G100] PC=9 GetVariable | Si={} U={} inBody=false
  [G100] PC=10 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 10 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=11 PutWriter | Si={} U={} inBody=true
  [G100] PC=11 PutWriter varIndex=0 argSlot=0 clauseVars={0: 1}
  [G100] PutWriter: value=1, type=int
  [G100] PutWriter: storing writer 1 in argWriters[0]
  [G100] PutWriter: about to increment PC to 12
  [G100] PutWriter: continuing to PC 12
  [G100] PC=12 Requeue | Si={} U={} inBody=true
00:01 [32m+86[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_read_handle/2: fails for invalid handle[0m                                                                                 

=== FILE_READ_HANDLE TEST: Invalid Handle ===
[ERROR] file_read_handle/2: invalid file handle: 9999
âœ“ file_read_handle/2 correctly failed for invalid handle

00:01 [32m+87[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 00:01 [32m+87[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Total executions: 1

======================================================================
RESULTS
======================================================================
Y (W1) bound: true
00:01 [32m+87[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_write_handle/2: writes to open file[0m                                                                                     

=== FILE_WRITE_HANDLE TEST: Write Contents ===
00:01 [32m+87[0m[31m -10[0m: test/custom/simple_body_test.dart: Simple BODY test: forward(X) :- p(X)[0m                                                                                                                 
Y value: Const(a)
âœ“ Y correctly bound to a
âœ“ BODY instructions working correctly!
00:01 [32m+87[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_write_handle/2: writes to open file[0m                                                                                     
Written contents: Written via handle
Verified on disk: Written via handle
âœ“ file_write_handle/2 succeeded

00:01 [32m+88[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+89[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+89[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_write_handle/2: fails for invalid handle[0m                                                                                

=== FILE_WRITE_HANDLE TEST: Invalid Handle ===
[ERROR] file_write_handle/2: invalid file handle: 9999
âœ“ file_write_handle/2 correctly failed for invalid handle

00:01 [32m+90[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+90[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations Full workflow: open â†’ write â†’ close â†’ open â†’ read â†’ close[0m                                                                    

=== FULL WORKFLOW TEST ===
Step 1: Opened for writing, handle=1
Step 2: Written contents
Step 3: Closed write handle
Step 4: Opened for reading, handle=2
Step 5: Read contents: Full workflow test
Step 6: Closed read handle
âœ“ Full workflow succeeded

00:01 [32m+91[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+91[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations Multiple handles: can have multiple files open simultaneously[0m                                                                

=== MULTIPLE HANDLES TEST ===
Handle 1: 1
Handle 2: 2
âœ“ Multiple handles work correctly

00:01 [32m+92[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+92[0m[31m -10[0m: test/custom/file_handles_test.dart: File Handle Operations file_open/3: append mode creates and appends[0m                                                                                 

=== FILE_OPEN TEST: Append Mode ===
Final contents: Initial content
Appended content
âœ“ Append mode works correctly

00:01 [32m+93[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+93[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   
>>> TRY: Goal 1 at PC 1
>>> REDUCTION: Goal 1 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:01 [32m+94[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X) â€” succeeds and binds X = a[0m                                                                                                                   00:01 [32m+94[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?) â€” suspends on unbound reader[0m                                                                                                                00:01 [32m+94[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?) â€” suspends on unbound reader[0m                                                                                                                
>>> TRY: Goal 2 at PC 1
>>> SUSPENSION: Goal 2 suspended on readers: {1100}
00:01 [32m+95[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?) â€” suspends on unbound reader[0m                                                                                                                00:01 [32m+95[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?), p(X) â€” suspend, bind, activate, terminate[0m                                                                                                  00:01 [32m+95[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?), p(X) â€” suspend, bind, activate, terminate[0m                                                                                                  
>>> TRY: Goal 10 at PC 1
>>> SUSPENSION: Goal 10 suspended on readers: {1100}
>>> TRY: Goal 20 at PC 1
>>> REDUCTION: Goal 20 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 10 awakened at PC 1
>>> TRY: Goal 10 at PC 1
>>> FAIL: Goal 10 (all clauses exhausted, U empty)
00:01 [32m+96[0m[31m -10[0m: test/custom/p_fact_program_test.dart: p(X?), p(X) â€” suspend, bind, activate, terminate[0m                                                                                                  00:01 [32m+96[0m[31m -10[0m: [1m[90mloading test/custom/custom_template_test.dart[0m[0m                                                                                                                                           00:01 [32m+96[0m[31m -10[0m: test/custom/custom_template_test.dart: custom: commit wakes exactly one suspended goal[0m                                                                                                  00:01 [32m+96[0m[31m -10[0m: test/custom/custom_template_test.dart: custom: commit wakes exactly one suspended goal[0m                                                                                                  
>>> TRY: Goal 999 at PC 1
>>> REDUCTION: Goal 999 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 42 awakened at PC 1
00:01 [32m+97[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates write/1: writes constant to stdout[0m                                                                                   00:01 [32m+97[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates write/1: writes constant to stdout[0m                                                                                   

=== WRITE TEST: Constant ===
00:01 [32m+97[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                   

============================================================
PROGRAM:
  p(a).
  p(b).
  q(b).

GOAL: q(X?), p(X)
============================================================

HEAP INITIALIZATION:
  Writer 1 (X) - unbound
  Reader 2 (X?) - paired with Writer 1

PROGRAMS COMPILED:
  Program Q (q/1): 7 instructions
  Program P (p/1): 12 instructions

============================================================
EXECUTION TRACE
============================================================

--- GOAL 100: q(X?) ---
Setting up goal 100 with program Q
  Arg 0: Reader 2 (X? - unbound)

Executing goal 100 with program Q...
Hello, GLP!00:01 [32m+97[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates write/1: writes constant to stdout[0m                                                                                   

âœ“ write/1 succeeded

00:01 [32m+98[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                   00:01 [32m+98[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates write/1: writes number to stdout[0m                                                                                     

=== WRITE TEST: Number ===
42
âœ“ write/1 succeeded for number

00:01 [32m+99[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                   00:01 [32m+99[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates write/1: suspends on unbound reader[0m                                                                                  

=== WRITE TEST: Suspend ===
âœ“ write/1 correctly suspended

00:01 [32m+100[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+100[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Terminal I/O Predicates nl/0: writes newline[0m                                                                                                


=== NL TEST ===
âœ“ nl/0 succeeded

00:01 [32m+101[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+101[0m[31m -10[0m: test/custom/extended_predicates_test.dart: File Operations file_exists/1: succeeds for existing file[0m                                                                                   

=== FILE_EXISTS TEST: Existing ===
âœ“ file_exists/1 succeeded for existing file

00:01 [32m+101[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
00:01 [32m+102[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+102[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
00:01 [32m+102[0m[31m -10[0m: test/custom/extended_predicates_test.dart: File Operations file_exists/1: fails for non-existent file[0m                                                                                  

=== FILE_EXISTS TEST: Non-existent ===
âœ“ file_exists/1 correctly failed

00:01 [32m+103[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+103[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  
  [G100] PC=6 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
  Status: RunResult.suspended
  X bound: false
  Suspended on R2: 1 goals

--- GOAL 200: p(X) ---
Setting up goal 200 with program P
  Arg 0: Writer 1 (X - unbound)

Executing goal 200 with program P...
>>> TRY: Goal 200 at PC 0
00:01 [32m+103[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Directory Operations directory_list/2: lists directory contents[0m                                                                             

=== DIRECTORY_LIST TEST ===
00:01 [32m+103[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
  Status: RunResult.terminated
  X bound: true
  X value: Const(a)
  Goals activated: 1

--- REACTIVATION: Goal 100 at PC 0 ---
  Goal program: q
  Using runner: Q

Executing reactivated goal 100...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(a) vs pattern=b
  [DEBUG] Mismatch! Soft-failing to next clause
  [G100] PC=6 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 100 (all clauses exhausted, U empty)
  Status: RunResult.terminated

============================================================
FINAL STATE
============================================================
  X (Writer 1) bound: true
  X value: Const(a)
  Queue length: 0

00:01 [32m+103[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Directory Operations directory_list/2: lists directory contents[0m                                                                             
Listed files: [file2.txt, file1.txt]
âœ“ directory_list/2 succeeded

00:01 [32m+104[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+104[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  
âœ“ Test passed: X correctly bound to 'a' via first clause of p
âœ“ Goal 100 correctly reactivated with program Q

00:01 [32m+104[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Directory Operations directory_list/2: fails for non-existent directory[0m                                                                     

=== DIRECTORY_LIST TEST: Non-existent ===
[ERROR] directory_list/2: Directory not found: /var/folders/2_/xqvp7z1x34d_7jn9h08663yr0000gp/T/glp_test_9qKPxX/nonexistent
âœ“ directory_list/2 correctly failed

00:01 [32m+105[0m[31m -10[0m: test/custom/p_q_trace_test.dart: P/Q program with detailed trace: p(a). p(b). q(b). Goal: q(X?), p(X)[0m                                                                                  00:01 [32m+106[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+106[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Utility Predicates variable_name/2: gets writer variable name[0m                                                                               

=== VARIABLE_NAME TEST: Writer ===
Variable name: W123
âœ“ variable_name/2 succeeded for writer

00:01 [32m+107[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+107[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             

=== Tracing Circular Execution ===

Initial Heap:
  Writer 1 (Xs) - unbound, Reader 2
  Writer 3 (Ys) - unbound, Reader 4
  Writer 5 - bound to [1], Reader 6
  Writer 7 - bound to [2], Reader 8

00:01 [32m+107[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Utility Predicates variable_name/2: gets reader variable name[0m                                                                               

=== VARIABLE_NAME TEST: Reader ===
Variable name: R456
âœ“ variable_name/2 succeeded for reader

00:01 [32m+108[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+108[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             
=== Goal 4000: merge(Xs?, [1], Ys) ===
  Arg 0 (slot 0): Reader 2 (Xs? - unbound)
  Arg 1 (slot 1): Reader 6 ([1])
  Arg 2 (slot 2): Writer 3 (Ys - unbound)

=== Goal 5000: merge(Ys?, [2], Xs) ===
  Arg 0 (slot 0): Reader 4 (Ys? - unbound)
  Arg 1 (slot 1): Reader 8 ([2])
  Arg 2 (slot 2): Writer 1 (Xs - unbound)

=== Starting Scheduler ===

00:01 [32m+108[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Utility Predicates copy_term/2: copies a constant[0m                                                                                           

=== COPY_TERM TEST: Constant ===
Copy: original
âœ“ copy_term/2 succeeded

00:01 [32m+109[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+109[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             
--- Cycle 1: Running Goal 4000 from PC 0 ---
Before execution:
  Xs (W1) bound: false, value: unbound
  Ys (W3) bound: false, value: unbound
00:01 [32m+109[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Utility Predicates copy_term/2: suspends on unbound reader[0m                                                                                  

=== COPY_TERM TEST: Suspend ===
âœ“ copy_term/2 correctly suspended

00:01 [32m+110[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+110[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Module Loading Placeholders link/2: returns failure (placeholder)[0m                                                                           

=== LINK TEST: Placeholder ===
[ERROR] link/2: Failed to load libraries: Exception: Failed to load library file: Invalid argument(s): Failed to load dynamic library 'file': dlopen(file, 0x0001): tried: 'file' (relative path not allowed in hardened program), '/System/Volumes/Preboot/Cryptexes/OSfile' (no such file), '/Users/udi/sdks/dart-sdk/bin/./file' (no such file), '/Users/udi/sdks/dart-sdk/bin/../../../file' (no such file), '/Users/udi/sdks/dart-sdk/bin/Frameworks/file' (no such file), '/Users/udi/sdks/dart-sdk/bin/./file' (no such file), '/Users/udi/sdks/dart-sdk/bin/../../../file' (no such file), '/Users/udi/sdks/dart-sdk/bin/Frameworks/file' (no such file), '/usr/lib/file' (no such file, not in dyld cache), 'file' (relative path not allowed in hardened program), '/usr/lib/file' (no such file, not in dyld cache)
âœ“ link/2 placeholder correctly returns failure

00:01 [32m+111[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+111[0m[31m -10[0m: test/custom/extended_predicates_test.dart: Module Loading Placeholders load_module/2: returns failure (placeholder)[0m                                                                    

=== LOAD_MODULE TEST: Placeholder ===
[ERROR] load_module/2: File not found: test.glp
âœ“ load_module/2 placeholder correctly returns failure

00:01 [32m+112[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             00:01 [32m+112[0m[31m -10[0m: test/custom/circular_trace_test.dart: Circular trace: merge(Xs?,[1],Ys), merge(Ys?,[2],Xs)[0m                                                                                             
>>> TRY: Goal 4000 at PC 0
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G4000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 6 -> writer 5
  HeadStructure: writer 5 value = .(Const(1),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G4000] PC=18 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=19 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=20 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 3, bound=false
  HeadStructure: WRITE mode for unbound writer 3
  [G4000] PC=21 HeadReader | Si={} U={2} inBody=false
  [G4000] PC=22 HeadWriter | Si={} U={2} inBody=false
  [G4000] PC=23 Commit | Si={} U={2} inBody=false
>>> REDUCTION: Goal 4000 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=24 PutReader | Si={} U={2} inBody=true
  [G4000] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutReader: continuing to PC 25
  [G4000] PC=25 PutReader | Si={} U={2} inBody=true
  [G4000] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutReader: creating fresh pair for ground constant null
  [G4000] PutReader: created W1002/R1003 for constant
  [G4000] PutReader: continuing to PC 26
  [G4000] PC=26 PutWriter | Si={} U={2} inBody=true
  [G4000] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 2, 1: Const(1), 2: Const(null), 3: 1000}
  [G4000] PutWriter: value=1000, type=int
  [G4000] PutWriter: storing writer 1000 in argWriters[2]
  [G4000] PutWriter: about to increment PC to 27
  [G4000] PutWriter: continuing to PC 27
  [G4000] PC=27 Requeue | Si={} U={2} inBody=true
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 unbound or null, adding to Si and failing
  [G4000] PC=15 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={2} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={2} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G4000] PC=29 ClauseTry | Si={} U={2} inBody=false
  [G4000] PC=30 HeadConstant | Si={} U={2} inBody=false
  [G4000] PC=31 HeadConstant | Si={2} U={2} inBody=false
  [G4000] PC=32 HeadConstant | Si={2} U={2} inBody=false
  [G4000] PC=33 Commit | Si={2} U={2} inBody=false
  [G4000] PC=36 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 4000 suspended on readers: {2}
After execution:
  Result: RunResult.suspended
  Xs (W1) bound: false, value: unbound
  Ys (W3) bound: true, value: .(Const(1),W1000)
  ROQ R2: 1 suspended
  ROQ R4: 0 suspended

--- Cycle 2: Running Goal 5000 from PC 0 ---
Before execution:
  Xs (W1) bound: false, value: unbound
  Ys (W3) bound: true, value: .(Const(1),W1000)
>>> TRY: Goal 5000 at PC 0
  [G5000] PC=0 Label | Si={} U={} inBody=false
  [G5000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 4 -> writer 3
  HeadStructure: writer 3 value = .(Const(1),W1000), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G5000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=5 GetVariable | Si={} U={} inBody=false
  [G5000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G5000] PC=7 HeadReader | Si={} U={} inBody=false
  [G5000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 5000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 4000 awakened at PC 0
  [G5000] PC=10 PutReader | Si={} U={} inBody=true
  [G5000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G5000] PutReader: continuing to PC 11
  [G5000] PC=11 PutReader | Si={} U={} inBody=true
  [G5000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
WARNING: PutReader got unexpected value: W1000
  [G5000] PutReader: continuing to PC 12
  [G5000] PC=12 PutWriter | Si={} U={} inBody=true
  [G5000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 8, 3: 1004}
  [G5000] PutWriter: value=1004, type=int
  [G5000] PutWriter: storing writer 1004 in argWriters[2]
  [G5000] PutWriter: about to increment PC to 13
  [G5000] PutWriter: continuing to PC 13
  [G5000] PC=13 Requeue | Si={} U={} inBody=true
  [G5000] PC=0 Label | Si={} U={} inBody=false
  [G5000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 8 -> writer 7
  HeadStructure: writer 7 value = .(Const(2),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G5000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G5000] PC=5 GetVariable | Si={} U={} inBody=false
  [G5000] PC=15 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=16 GetVariable | Si={} U={} inBody=false
  [G5000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G5000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G5000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G5000] PC=36 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 5000 (all clauses exhausted, U empty)
After execution:
  Result: RunResult.terminated
  Xs (W1) bound: true, value: .(Const(1),W1004)
  Ys (W3) bound: true, value: .(Const(1),W1000)
  ROQ R2: 0 suspended
  ROQ R4: 0 suspended

--- Cycle 3: Running Goal 4000 from PC 0 ---
Before execution:
  Xs (W1) bound: true, value: .(Const(1),W1004)
  Ys (W3) bound: true, value: .(Const(1),W1000)
>>> TRY: Goal 4000 at PC 0
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 2 -> writer 1
  HeadStructure: writer 1 value = .(Const(1),W1004), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G4000] PC=3 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=4 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=5 GetVariable | Si={} U={} inBody=false
  [G4000] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G4000] PC=7 HeadReader | Si={} U={} inBody=false
  [G4000] PC=8 HeadWriter | Si={} U={} inBody=false
  [G4000] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 4000 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=10 PutReader | Si={} U={} inBody=true
  [G4000] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G4000] PutReader: continuing to PC 11
  [G4000] PC=11 PutReader | Si={} U={} inBody=true
  [G4000] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
WARNING: PutReader got unexpected value: W1004
  [G4000] PutReader: continuing to PC 12
  [G4000] PC=12 PutWriter | Si={} U={} inBody=true
  [G4000] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G4000] PutWriter: value=1006, type=int
  [G4000] PutWriter: storing writer 1006 in argWriters[2]
  [G4000] PutWriter: about to increment PC to 13
  [G4000] PutWriter: continuing to PC 13
  [G4000] PC=13 Requeue | Si={} U={} inBody=true
  [G4000] PC=0 Label | Si={} U={} inBody=false
  [G4000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G4000] PC=15 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=16 GetVariable | Si={} U={} inBody=false
  [G4000] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: arg is null, failing
  [G4000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G4000] PC=30 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=31 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=32 HeadConstant | Si={} U={} inBody=false
  [G4000] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 4000 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G4000] PC=34 Proceed | Si={} U={} inBody=true
After execution:
  Result: RunResult.terminated
  Xs (W1) bound: true, value: .(Const(1),W1004)
  Ys (W3) bound: true, value: .(Const(1),W1000)
  ROQ R2: 0 suspended
  ROQ R4: 0 suspended


=== Final State ===
Total cycles: 3
Xs bound: true
Xs value: .(Const(1),W1004)
Ys bound: true
Ys value: .(Const(1),W1000)
00:01 [32m+113[0m[31m -10[0m: test/custom/metainterp_full_test.dart: Full metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                               00:01 [32m+113[0m[31m -10[0m: test/custom/metainterp_full_test.dart: Full metainterpreter: run(p(X)), run(q(X?)) with p(a), p(b), q(b)[0m                                                                               

======================================================================
FULL METAINTERPRETER TEST
Object program: clause(p(a),true). clause(p(b),true). clause(q(b),true).
Metainterpreter: run(true). run(A) :- otherwise | clause(A?,B), run(B?).
Query: boot :- run(p(X)), run(q(X?))
Expected: X binds to a (first solution), q(a) fails, backtrack not supported
======================================================================

HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

PROGRAM LABELS:
  clause/2 => PC 0
  clause/2_c2 => PC 7
  clause/2_c3 => PC 14
  clause/2_end => PC 21
  run/1 => PC 23
  run/1_c2 => PC 28
  run/1_end => PC 38
  boot/0 => PC 40
  boot/0_end => PC 49

STRUCTURES:
  p(X) = reader 11 bound to p(W1)
  q(X?) = reader 13 bound to q(R2)

Starting: boot(p(X), q(X?)) at PC 40

>>> TRY: Goal 100 at PC 40
  [G100] PC=40 Label | Si={} U={} inBody=false
  [G100] PC=41 ClauseTry | Si={} U={} inBody=false
  [G100] PC=42 GetVariable | Si={} U={} inBody=false
  [G100] PC=43 GetVariable | Si={} U={} inBody=false
  [G100] PC=44 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 44 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=45 PutReader | Si={} U={} inBody=true
  [G100] PC=45 PutReader varIndex=0 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=11, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 11
  [G100] PutReader: continuing to PC 46
  [G100] PC=46 Spawn | Si={} U={} inBody=true
  [G100] PC=47 PutReader | Si={} U={} inBody=true
  [G100] PC=47 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 48
  [G100] PC=48 Requeue | Si={} U={} inBody=true
  [G100] PC=23 Label | Si={} U={} inBody=false
  [G100] PC=24 ClauseTry | Si={} U={} inBody=false
  [G100] PC=25 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 13: value=q(R2) vs pattern=true
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 Otherwise | Si={} U={} inBody=false
  [G100] PC=31 GetVariable | Si={} U={} inBody=false
  [G100] PC=32 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 32 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=33 PutReader | Si={} U={} inBody=true
  [G100] PC=33 PutReader varIndex=0 argSlot=0 clauseVars={0: 13}
  [G100] PutReader: value=13, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 13
  [G100] PutReader: continuing to PC 34
  [G100] PC=34 PutWriter | Si={} U={} inBody=true
  [G100] PC=34 PutWriter varIndex=1 argSlot=1 clauseVars={0: 13}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 35
  [G100] PutWriter: continuing to PC 35
  [G100] PC=35 Spawn | Si={} U={} inBody=true
  [G100] PC=36 PutReader | Si={} U={} inBody=true
  [G100] PC=36 PutReader varIndex=1 argSlot=0 clauseVars={0: 13, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 37
  [G100] PC=37 Requeue | Si={} U={} inBody=true
  [G100] PC=23 Label | Si={} U={} inBody=false
  [G100] PC=24 ClauseTry | Si={} U={} inBody=false
  [G100] PC=25 HeadConstant | Si={} U={} inBody=false
  [G100] PC=26 Commit | Si={1001} U={} inBody=false
  [G100] PC=29 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=30 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=39 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 23
  [G10000] PC=23 Label | Si={} U={} inBody=false
  [G10000] PC=24 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=25 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=29 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=30 Otherwise | Si={} U={} inBody=false
  [G10000] PC=31 GetVariable | Si={} U={} inBody=false
  [G10000] PC=32 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 32 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=33 PutReader | Si={} U={} inBody=true
  [G10000] PC=33 PutReader varIndex=0 argSlot=0 clauseVars={0: 11}
  [G10000] PutReader: continuing to PC 34
  [G10000] PC=34 PutWriter | Si={} U={} inBody=true
  [G10000] PC=34 PutWriter varIndex=1 argSlot=1 clauseVars={0: 11}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 35
  [G10000] PutWriter: continuing to PC 35
  [G10000] PC=35 Spawn | Si={} U={} inBody=true
  [G10000] PC=36 PutReader | Si={} U={} inBody=true
  [G10000] PC=36 PutReader varIndex=1 argSlot=0 clauseVars={0: 11, 1: 1002}
  [G10000] PutReader: continuing to PC 37
  [G10000] PC=37 Requeue | Si={} U={} inBody=true
  [G10000] PC=23 Label | Si={} U={} inBody=false
  [G10000] PC=24 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=25 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=26 Commit | Si={1003} U={} inBody=false
  [G10000] PC=29 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=30 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=39 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting p/1
  HeadStructure: NO MATCH, failing
  [G10001] PC=8 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting p/1
  HeadStructure: NO MATCH, failing
  [G10001] PC=15 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=16 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=q/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting q/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=17 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting b
  UnifyConstant: reader 2 unbound, suspending
  [G10001] PC=18 HeadConstant | Si={2} U={} inBody=false
  [G10001] PC=19 Commit | Si={2} U={} inBody=false
  [G10001] PC=22 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 10001 suspended on readers: {2}
>>> TRY: Goal 10002 at PC 0
  [G10002] PC=0 Label | Si={} U={} inBody=false
  [G10002] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = p(W1), expecting p/1
  HeadStructure: MATCH! Entering READ mode
  [G10002] PC=3 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=W1 (WriterTerm), expecting a
  UnifyConstant: binding writer 1 to a in ÏƒÌ‚w
  [G10002] PC=4 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 5 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 10001 awakened at PC 0
>>> ACTIVATION: Goal 10000 awakened at PC 23
  [G10002] PC=6 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting p/1
  HeadStructure: NO MATCH, failing
  [G10001] PC=8 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=p/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting p/1
  HeadStructure: NO MATCH, failing
  [G10001] PC=15 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=16 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=q/1
  HeadStructure: READ mode, reader 13 -> writer 12
  HeadStructure: writer 12 value = q(R2), expecting q/1
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=17 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting b
  UnifyConstant: reader 2 bound to Const(a), mismatch
  [G10001] PC=22 SuspendEnd | Si={} U={} inBody=false
>>> FAIL: Goal 10001 (all clauses exhausted, U empty)
>>> TRY: Goal 10000 at PC 23
  [G10000] PC=23 Label | Si={} U={} inBody=false
  [G10000] PC=24 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=25 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=26 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 26 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=27 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 10001, 10002, 10001, 10000]
Total executions: 6

======================================================================
RESULTS
======================================================================
X (W1) bound: true
X value: Const(a)
âœ“ X correctly bound to a

âœ“ Full metainterpreter test completed!
âœ“ boot :- run(p(X)), run(q(X?)) executed
âœ“ p(X) bound X to a
âœ“ q(a) failed (no clause for q(a))
00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             

======================================================================
BOOT TEST
Program: p(a). boot :- p(X), p(X?).
Goal: boot
Expected: X binds to a, both p(X) and p(X?) succeed
======================================================================

PROGRAM LABELS:
  p/1 => PC 0
  p/1_end => PC 5
  boot/0 => PC 7
  boot/0_end => PC 14

PROGRAM OPS:
  PC 0: Label
  PC 1: ClauseTry
  PC 2: HeadConstant
  PC 3: Commit
  PC 4: Proceed
  PC 5: Label
  PC 6: SuspendEnd
  PC 7: Label
  PC 8: ClauseTry
  PC 9: Commit
  PC 10: PutWriter
  PC 11: Spawn
  PC 12: PutReader
  PC 13: Requeue
  PC 14: Label
  PC 15: SuspendEnd

Goal: boot at PC 7

Before drain - checking goal queue...
>>> TRY: Goal 100 at PC 7
  [G100] PC=7 Label | Si={} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=10 PutWriter | Si={} U={} inBody=true
  [G100] PC=10 PutWriter varIndex=0 argSlot=0 clauseVars={}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 11
  [G100] PutWriter: continuing to PC 11
  [G100] PC=11 Spawn | Si={} U={} inBody=true
  [G100] PC=12 PutReader | Si={} U={} inBody=true
  [G100] PC=12 PutReader varIndex=0 argSlot=0 clauseVars={0: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={1001} U={} inBody=false
  [G100] PC=6 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
00:01 [32m+114[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 

======================================================================
WAM-STYLE STRUCTURE CREATION IN BODY
Goal: build_list(Result)
Clause: build_list([a,b]).
Uses: put_structure, set_constant instructions
======================================================================

00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             
>>> TRY: Goal 10000 at PC 0
  [G10000] PC=0 Label | Si={} U={} inBody=false
  [G10000] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=2 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:01 [32m+114[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 
HEAP SETUP:
  Result: W10/R11 (unbound)

00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             
>>> ACTIVATION: Goal 100 awakened at PC 0
  [G10000] PC=4 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=Const(a) vs pattern=a
  [G100] PC=3 Commit | Si={} U={} inBody=false
00:01 [32m+114[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 
======================================================================
00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+114[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 
EXECUTION TRACE
======================================================================

00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             
  [G100] PC=4 Proceed | Si={} U={} inBody=true
00:01 [32m+114[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 
--- GOAL 100: build_list(Result) ---
00:01 [32m+114[0m[31m -10[0m: test/custom/boot_test.dart: Boot test: boot :- p(X), p(X?)[0m                                                                                                                             
Goals executed: [100, 10000, 100]
Total executions: 3

======================================================================
RESULTS
======================================================================
Writer 1000 (X) bound: true
Writer 1000 value: Const(a)
âœ“ Boot test completed!
Goals executed: [100, 10000, 100]
00:01 [32m+115[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 00:01 [32m+115[0m[31m -10[0m: test/custom/merge_circular_budget_test.dart: Circular merge with 100 reduction budget: merge(Xs?,[1],Ys), merge(Ys?,[a],Xs)[0m                                                            

======================================================================
CIRCULAR MERGE WITH REDUCTION BUDGET
Goal 100: merge(Xs?, [1], Ys)
Goal 200: merge(Ys?, [a], Xs)
Reduction budget: 100 per goal execution
======================================================================

HEAP SETUP:
  List1 (W10/R11) = [1]
  ListA (W20/R21) = [a]
  Result Xs (W30/R31) = unbound
  Result Ys (W40/R41) = unbound

======================================================================
EXECUTION TRACE
======================================================================

--- GOAL 100: merge(Xs?, [1], Ys) ---
Executing with 100 reduction budget...
00:01 [32m+115[0m[31m -10[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY[0m                                                                                                 
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=3 PutStructure | Si={} U={} inBody=true
  [G100] PC=4 SetConstant | Si={} U={} inBody=true
  [G100] PC=5 SetConstant | Si={} U={} inBody=true
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Execution result: RunResult.terminated
Reductions used: 7

======================================================================
RESULTS
======================================================================
Result bound: false
00:01 [32m+115[0m[31m -11[0m: test/custom/merge_circular_budget_test.dart: Circular merge with 100 reduction budget: merge(Xs?,[1],Ys), merge(Ys?,[a],Xs)[0m                                                            
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 31 -> writer 30
  HeadStructure: writer 30 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={31} inBody=false
  [G100] PC=16 GetVariable | Si={} U={31} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={31} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 11 -> writer 10
  HeadStructure: writer 10 value = .(Const(1),Const(null)), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=18 HeadWriter | Si={} U={31} inBody=false
  [G100] PC=19 HeadWriter | Si={} U={31} inBody=false
  [G100] PC=20 HeadStructure | Si={} U={31} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 40, bound=false
  HeadStructure: WRITE mode for unbound writer 40
  [G100] PC=21 HeadReader | Si={} U={31} inBody=false
  [G100] PC=22 HeadWriter | Si={} U={31} inBody=false
  [G100] PC=23 Commit | Si={} U={31} inBody=false
>>> REDUCTION: Goal 100 at PC 23 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=24 PutReader | Si={} U={31} inBody=true
  [G100] PC=24 PutReader varIndex=0 argSlot=0 clauseVars={0: 31, 1: Const(1), 2: Const(null), 3: 1000}
  [G100] PutReader: value=31, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 31
  [G100] PutReader: continuing to PC 25
  [G100] PC=25 PutReader | Si={} U={31} inBody=true
  [G100] PC=25 PutReader varIndex=2 argSlot=1 clauseVars={0: 31, 1: Const(1), 2: Const(null), 3: 1000}
  [G100] PutReader: creating fresh pair for ground constant null
  [G100] PutReader: created W1002/R1003 for constant
  [G100] PutReader: continuing to PC 26
  [G100] PC=26 PutWriter | Si={} U={31} inBody=true
  [G100] PC=26 PutWriter varIndex=3 argSlot=2 clauseVars={0: 31, 1: Const(1), 2: Const(null), 3: 1000}
  [G100] PutWriter: value=1000, type=int
  [G100] PutWriter: storing writer 1000 in argWriters[2]
  [G100] PutWriter: about to increment PC to 27
  [G100] PutWriter: continuing to PC 27
  [G100] PC=27 Requeue | Si={} U={31} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 31 -> writer 30
  HeadStructure: writer 30 unbound or null, adding to Si and failing
  [G100] PC=15 ClauseTry | Si={} U={31} inBody=false
  [G100] PC=16 GetVariable | Si={} U={31} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={31} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=29 ClauseTry | Si={} U={31} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={31} inBody=false
  [G100] PC=31 HeadConstant | Si={31} U={31} inBody=false
  [DEBUG] HeadConstant checking reader 1003: value=Const(null) vs pattern=null
  [G100] PC=32 HeadConstant | Si={31} U={31} inBody=false
  [G100] PC=33 Commit | Si={31} U={31} inBody=false
  [G100] PC=36 SuspendEnd | Si={} U={31} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {31}
Result: RunResult.suspended
Reductions used: 28
Xs bound: false
Ys bound: true
Ys value: .(Const(1),W1000)
Suspended on readers: {}

--- GOAL 200: merge(Ys?, [a], Xs) ---
Executing with 100 reduction budget...
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
  [G200] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1000, 2: 21, 3: 1004}
  [G200] PutReader: continuing to PC 11
  [G200] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1000, 2: 21, 3: 1004}
WARNING: PutReader got unexpected value: W1000
  [G200] PutReader: continuing to PC 12
  [G200] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1000, 2: 21, 3: 1004}
  [G200] PutWriter: value=1004, type=int
  [G200] PutWriter: storing writer 1004 in argWriters[2]
  [G200] PutWriter: about to increment PC to 13
  [G200] PutWriter: continuing to PC 13
>>> FAIL: Goal 200 (all clauses exhausted, U empty)
Result: RunResult.terminated
Reductions used: 26
Xs bound: true
Xs value: .(Const(1),W1004)
Ys bound: true
Ys value: .(Const(1),W1000)

--- CHECKING ACTIVATIONS ---
Goals in queue: 1
Queue contents: [100]

--- SUSPENSION/ACTIVATION TRACE ---

CYCLE 1:
  Dequeued: Goal 100 (PC 0)
  Queue before execution: 0 goals
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 31 -> writer 30
  HeadStructure: writer 30 value = .(Const(1),W1004), expecting ./2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=3 HeadWriter | Si={} U={} inBody=false
  [G100] PC=4 HeadWriter | Si={} U={} inBody=false
  [G100] PC=5 GetVariable | Si={} U={} inBody=false
  [G100] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=2, isClauseVar=false, functor=./2
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G100] PC=7 HeadReader | Si={} U={} inBody=false
  [G100] PC=8 HeadWriter | Si={} U={} inBody=false
  [G100] PC=9 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 9 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=10 PutReader | Si={} U={} inBody=true
00:01 [32m+115[0m[31m -11[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build list [a,b] in BODY [1m[31m[E][0m[0m                                                                                             
  Result should be bound after execution
  package:matcher                            fail
  test/custom/put_structure_test.dart 102:7  main.<fn>
  
00:01 [32m+115[0m[31m -11[0m: test/custom/merge_circular_budget_test.dart: Circular merge with 100 reduction budget: merge(Xs?,[1],Ys), merge(Ys?,[a],Xs)[0m                                                            
  [G100] PC=10 PutReader varIndex=2 argSlot=0 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G100] PutReader: value=1003, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1003
  [G100] PutReader: continuing to PC 11
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=1 argSlot=1 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
WARNING: PutReader got unexpected value: W1004
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 PutWriter | Si={} U={} inBody=true
  [G100] PC=12 PutWriter varIndex=3 argSlot=2 clauseVars={0: Const(1), 1: W1004, 2: 1003, 3: 1006}
  [G100] PutWriter: value=1006, type=int
  [G100] PutWriter: storing writer 1006 in argWriters[2]
  [G100] PutWriter: about to increment PC to 13
  [G100] PutWriter: continuing to PC 13
  [G100] PC=13 Requeue | Si={} U={} inBody=true
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=./2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = Const(null), expecting ./2
  HeadStructure: NO MATCH, failing
  [G100] PC=15 ClauseTry | Si={} U={} inBody=false
  [G100] PC=16 GetVariable | Si={} U={} inBody=false
  [G100] PC=17 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=./2
  [G100] PC=29 ClauseTry | Si={} U={} inBody=false
  [G100] PC=30 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1003: value=Const(null) vs pattern=null
  [G100] PC=31 HeadConstant | Si={} U={} inBody=false
  [G100] PC=32 HeadConstant | Si={} U={} inBody=false
  [G100] PC=33 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 33 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=34 Proceed | Si={} U={} inBody=true
  Execution result: RunResult.terminated
  Reductions used: 26
  Queue after execution: 0 goals


======================================================================
FINAL STATE AFTER 1 CYCLES
======================================================================
Xs bound: true
Xs value: .(Const(1),W1004)

[1m[36mTo run this test again:[0m dart test test/custom/put_structure_test.dart -p vm --plain-name 'WAM-style put_structure: Build list [a,b] in BODY'
Ys bound: true
Ys value: .(Const(1),W1000)
Goals remaining in queue: 0

âœ“ Circular merge with reduction budget test complete
00:01 [32m+115[0m[31m -11[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build structure with writer variable[0m                                                                                     

======================================================================
STRUCTURE WITH WRITER VARIABLE IN BODY
Goal: build_pair(Result)
Clause: build_pair(pair(a, Tail?)).
Structure: pair(a, WriterTerm)
======================================================================

HEAP SETUP:
  Result: W10/R11 (unbound)

--- GOAL 200: build_pair(Result) ---
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+116[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate simple addition: 2 + 3 = 5[0m                                                                      00:01 [32m+116[0m[31m -11[0m: test/custom/put_structure_test.dart: WAM-style put_structure: Build structure with writer variable[0m                                                                                     
Execution result: RunResult.terminated

======================================================================
RESULTS
======================================================================
Result bound: false

âœ“ Structure with writer variable test complete!
00:01 [32m+117[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate simple addition: 2 + 3 = 5[0m                                                                      00:01 [32m+117[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate simple addition: 2 + 3 = 5[0m                                                                      

=== EVALUATE TEST: Simple Addition ===
Result: SystemResult.success
Expression: +(Const(2),Const(3))
âœ“ Evaluate succeeded for 2 + 3

00:01 [32m+118[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate simple addition: 2 + 3 = 5[0m                                                                      00:01 [32m+118[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate expression with unbound reader - should suspend[0m                                                 00:01 [32m+118[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate expression with unbound reader - should suspend[0m                                                 

=== EVALUATE TEST: Unbound Reader Suspension ===
Result: SystemResult.suspend
Suspended readers: {2}
âœ“ Evaluate correctly suspended on unbound reader

00:01 [32m+119[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate expression with unbound reader - should suspend[0m                                                 00:01 [32m+119[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with nested expression: (2 + 3) * 4 = 20[0m                                                        00:01 [32m+119[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with nested expression: (2 + 3) * 4 = 20[0m                                                        

=== EVALUATE TEST: Nested Expression ===
Result: SystemResult.success
Expression: *(+(Const(2),Const(3)),Const(4))
âœ“ Evaluate succeeded for (2 + 3) * 4

00:01 [32m+120[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with nested expression: (2 + 3) * 4 = 20[0m                                                        00:01 [32m+120[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate division by zero - should fail[0m                                                                  00:01 [32m+120[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate division by zero - should fail[0m                                                                  

=== EVALUATE TEST: Division by Zero ===
Result: SystemResult.failure
âœ“ Evaluate correctly failed for division by zero

00:01 [32m+121[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate division by zero - should fail[0m                                                                  00:01 [32m+121[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with all operators: +, -, *, /, mod[0m                                                             00:01 [32m+121[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with all operators: +, -, *, /, mod[0m                                                             

=== EVALUATE TEST: All Operators ===
Expression: +(Const(10),Const(5)) => expected 15, result: SystemResult.success
Expression: -(Const(10),Const(5)) => expected 5, result: SystemResult.success
Expression: *(Const(10),Const(5)) => expected 50, result: SystemResult.success
Expression: /(Const(10),Const(5)) => expected 2, result: SystemResult.success
Expression: mod(Const(10),Const(3)) => expected 1, result: SystemResult.success
âœ“ All operators evaluated successfully

00:01 [32m+122[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with all operators: +, -, *, /, mod[0m                                                             00:01 [32m+122[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with bound result variable - should verify[0m                                                      00:01 [32m+122[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with bound result variable - should verify[0m                                                      

=== EVALUATE TEST: Result Verification ===
Result: SystemResult.success
âœ“ Evaluate correctly verified bound result

00:01 [32m+123[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with bound result variable - should verify[0m                                                      00:01 [32m+123[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with mismatched bound result - should fail[0m                                                      00:01 [32m+123[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with mismatched bound result - should fail[0m                                                      

=== EVALUATE TEST: Result Mismatch ===
Result: SystemResult.failure
âœ“ Evaluate correctly failed for mismatched result

00:01 [32m+124[0m[31m -11[0m: test/custom/execute_evaluate_test.dart: Execute - evaluate/2 system predicate evaluate with mismatched bound result - should fail[0m                                                      00:01 [32m+124[0m[31m -11[0m: [1m[90mloading test/custom/metainterp_three_way_merge_test.dart[0m[0m                                                                                                                               00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 

======================================================================
METAINTERPRETER TEST: THREE-WAY MERGE
Object program:
  clause(merge([X|Xs],Ys,[X?|Zs?]), merge(Ys?,Xs?,Zs)).
  clause(merge(Xs,[Y|Ys],[Y?|Zs?]), merge(Xs?,Ys?,Zs)).
  clause(merge([],[],[]), true).
Metainterpreter:
  run(true).
  run((A,B)) :- run(A?), run(B?).
  run(A) :- otherwise | clause(A?,B), run(B?).
Query: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys), merge(Xs?,Ys?,Zs)))
Expected:
  Xs = [1,2,3]
  Ys = [a,b,c]
  Zs = merge of [1,2,3] and [a,b,c]
======================================================================

HEAP SETUP:
  Writer 1 (Xs) paired with Reader 2 (Xs?)
  Writer 3 (Ys) paired with Reader 4 (Ys?)
  Writer 5 (Zs) paired with Reader 6 (Zs?)

PROGRAM LABELS:
  clause/2 => PC 0
  clause/2_c2 => PC 18
  clause/2_c3 => PC 36
  clause/2_end => PC 45
  run/1 => PC 47
  run/1_c2 => PC 52
  run/1_c3 => PC 62
  run/1_end => PC 72

STRUCTURES:
  [1,2] = writer 10
  [3] = writer 12
  [a,b] = writer 14
  [c] = writer 16
  merge([1,2],[3],Xs) = writer 18
  merge([a,b],[c],Ys) = writer 20
  merge(Xs?,Ys?,Zs) = writer 22
  conjunction = reader 27

Starting goal at PC 47

>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 27: value=,(W24,W22) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 27 -> writer 26
  HeadStructure: writer 26 value = ,(W24,W22), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G100] PC=55 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=0, S=0
  [G100] UnifyWriter: struct.args[0] = W24
  [G100] PC=56 UnifyWriter | Si={} U={} inBody=false
  [G100] UnifyWriter: READ mode, varIndex=1, S=1
  [G100] UnifyWriter: struct.args[1] = W22
  [G100] PC=57 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 57 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=58 PutReader | Si={} U={} inBody=true
  [G100] PC=58 PutReader varIndex=0 argSlot=0 clauseVars={0: 24, 1: 22}
  [G100] PutReader: value=24, wc=Instance of 'WriterCell', wc.readerId=25
  [G100] PutReader: Setting argReaders[0] = 25
  [G100] PutReader: continuing to PC 59
  [G100] PC=59 Spawn | Si={} U={} inBody=true
  [G100] PC=60 PutReader | Si={} U={} inBody=true
  [G100] PC=60 PutReader varIndex=1 argSlot=0 clauseVars={0: 24, 1: 22}
  [G100] PutReader: value=22, wc=Instance of 'WriterCell', wc.readerId=23
  [G100] PutReader: Setting argReaders[0] = 23
  [G100] PutReader: continuing to PC 61
  [G100] PC=61 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 23: value=merge(R2,R4,W5) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = merge(R2,R4,W5), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 23}
  [G100] PutReader: value=23, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 23
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 23}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 23, 1: 1000}
  [G100] PutReader: value=1000, wc=Instance of 'WriterCell', wc.readerId=1001
  [G100] PutReader: Setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1001} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1001} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1001} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1001} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1001} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1001}
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 25 -> writer 24
  HeadStructure: writer 24 value = ,(W18,W20), expecting ,/2
  HeadStructure: MATCH! Entering READ mode
  [G10000] PC=55 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=56 UnifyWriter | Si={} U={} inBody=false
  [G10000] PC=57 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 57 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=58 PutReader | Si={} U={} inBody=true
  [G10000] PC=58 PutReader varIndex=0 argSlot=0 clauseVars={0: 18, 1: 20}
  [G10000] PutReader: continuing to PC 59
  [G10000] PC=59 Spawn | Si={} U={} inBody=true
  [G10000] PC=60 PutReader | Si={} U={} inBody=true
  [G10000] PC=60 PutReader varIndex=1 argSlot=0 clauseVars={0: 18, 1: 20}
  [G10000] PutReader: continuing to PC 61
  [G10000] PC=61 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = merge(W14,W16,W3), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 21}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 21}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 21, 1: 1002}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1003} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1003} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1003} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1003} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1003} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1003}
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = merge(R2,R4,W5), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  [G10001] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = merge(R2,R4,W5), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  [G10001] PC=37 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=38 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = merge(R2,R4,W5), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=39 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R2 (ReaderTerm), expecting []
  UnifyConstant: reader 2 unbound, suspending
  [G10001] PC=40 UnifyConstant | Si={2} U={} inBody=false
  UnifyConstant: S=1, value=R4 (ReaderTerm), expecting []
  UnifyConstant: reader 4 unbound, suspending
  [G10001] PC=41 UnifyConstant | Si={2, 4} U={} inBody=false
  UnifyConstant: S=2, value=W5 (WriterTerm), expecting []
  UnifyConstant: binding writer 5 to [] in ÏƒÌ‚w
  [G10001] PC=42 HeadConstant | Si={2, 4} U={} inBody=false
  [G10001] PC=43 Commit | Si={2, 4} U={} inBody=false
  [G10001] PC=46 SuspendEnd | Si={} U={2, 4} inBody=false
>>> SUSPENSION: Goal 10001 suspended on readers: {2, 4}
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 19 -> writer 18
  HeadStructure: writer 18 value = merge(W10,W12,W1), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 19}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 19}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 19, 1: 1004}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1005} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1005} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1005} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1005 -> writer 1004
  HeadStructure: writer 1004 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1005} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1005} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1005} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1005}
>>> TRY: Goal 10003 at PC 0
  [G10003] PC=0 Label | Si={} U={} inBody=false
  [G10003] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10003] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 21 -> writer 20
  HeadStructure: writer 20 value = merge(W14,W16,W3), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10003] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W14 = [|](Const(a),W102), MATCH!
  [G10003] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10003] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1002, bound=false
  HeadStructure: WRITE mode for unbound writer 1002
  [G10003] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10003] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10003] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10003 at PC 16 (commit succeeded, ÏƒÌ‚w has 3 bindings)
>>> ACTIVATION: Goal 10001 awakened at PC 0
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10003] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10004 at PC 0
  [G10004] PC=0 Label | Si={} U={} inBody=false
  [G10004] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10004] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 19 -> writer 18
  HeadStructure: writer 18 value = merge(W10,W12,W1), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10004] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = W10 = [|](Const(1),W100), MATCH!
  [G10004] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10004] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1004, bound=false
  HeadStructure: WRITE mode for unbound writer 1004
  [G10004] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10004] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10004] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10004 at PC 16 (commit succeeded, ÏƒÌ‚w has 3 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10004] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10001 at PC 0
  [G10001] PC=0 Label | Si={} U={} inBody=false
  [G10001] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10001] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 23 -> writer 22
  HeadStructure: writer 22 value = merge(R2,R4,W5), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10001] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1011,R1013), MATCH!
  [G10001] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10001] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1000, bound=false
  HeadStructure: WRITE mode for unbound writer 1000
  [G10001] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10001] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10001] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10001 at PC 16 (commit succeeded, ÏƒÌ‚w has 4 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10001] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = merge(R17,R103,W1008), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1003}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1003}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1003, 1: 1020}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1021} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1021} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1021} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1021 -> writer 1020
  HeadStructure: writer 1020 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1021} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1021} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1021} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1021}
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1005 -> writer 1004
  HeadStructure: writer 1004 value = merge(R13,R101,W1012), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1005}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1005}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1005, 1: 1022}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1023} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1023} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1023} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1023 -> writer 1022
  HeadStructure: writer 1022 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1023} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1023} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1023} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1023}
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1001: value=merge(R1019,R1013,W1016) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R1019,R1013,W1016), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1001}
  [G100] PutReader: value=1001, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1001
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1001}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
00:01 [32m+124[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   

=== HELLO WORLD TEST ===
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1001, 1: 1024}
  [G100] PutReader: value=1024, wc=Instance of 'WriterCell', wc.readerId=1025
  [G100] PutReader: Setting argReaders[0] = 1025
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1025} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1025} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1025} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1025 -> writer 1024
  HeadStructure: writer 1024 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1025} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1025} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1025} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1025}
>>> TRY: Goal 10005 at PC 0
  [G10005] PC=0 Label | Si={} U={} inBody=false
  [G10005] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10005] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1003 -> writer 1002
  HeadStructure: writer 1002 value = merge(R17,R103,W1008), expecting merge/3
00:01 [32m+124[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   

Running hello_world/0:
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  HeadStructure: MATCH! Entering READ mode
  [G10005] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(c),Const([])), MATCH!
  [G10005] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10005] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1020, bound=false
  HeadStructure: WRITE mode for unbound writer 1020
  [G10005] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10005] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10005] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10005 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10005] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10006 at PC 0
  [G10006] PC=0 Label | Si={} U={} inBody=false
  [G10006] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10006] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1005 -> writer 1004
  HeadStructure: writer 1004 value = merge(R13,R101,W1012), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10006] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(3),Const([])), MATCH!
  [G10006] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10006] PC=10 UnifyReader | Si={} U={} inBody=false
00:01 [32m+124[0m[31m -11[0m: test/custom/p_fact_writer_then_reader_test.dart: p(X), then p(X?) does not suspend and produces no activations[0m                                                                         
>>> TRY: Goal 1 at PC 1
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10006] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1022, bound=false
  HeadStructure: WRITE mode for unbound writer 1022
  [G10006] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10006] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10006] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10006 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
00:01 [32m+124[0m[31m -11[0m: test/custom/p_fact_writer_then_reader_test.dart: p(X), then p(X?) does not suspend and produces no activations[0m                                                                         
>>> REDUCTION: Goal 1 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10006] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10007 at PC 0
  [G10007] PC=0 Label | Si={} U={} inBody=false
  [G10007] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10007] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1001 -> writer 1000
  HeadStructure: writer 1000 value = merge(R1019,R1013,W1016), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10007] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1007,R1009), MATCH!
  [G10007] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10007] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1024, bound=false
  HeadStructure: WRITE mode for unbound writer 1024
  [G10007] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10007] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10007] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10007 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10007] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1021 -> writer 1020
  HeadStructure: writer 1020 value = merge(R1031,R1033,W1028), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1021}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1021}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1021, 1: 1050}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1051} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1051} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1051} inBody=false
00:01 [32m+124[0m[31m -11[0m: test/custom/p_fact_writer_then_reader_test.dart: p(X), then p(X?) does not suspend and produces no activations[0m                                                                         
>>> TRY: Goal 2 at PC 1
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1051} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1051} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1051} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1051}
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1023 -> writer 1022
  HeadStructure: writer 1022 value = merge(R1039,R1041,W1036), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+124[0m[31m -11[0m: test/custom/p_fact_writer_then_reader_test.dart: p(X), then p(X?) does not suspend and produces no activations[0m                                                                         
>>> FAIL: Goal 2 (all clauses exhausted, U empty)
00:01 [32m+124[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1023}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1023}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1023, 1: 1052}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1053} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1053} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1053} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1053} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1053} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1053} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1053}
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1025: value=merge(R1047,R1049,W1044) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1025 -> writer 1024
00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  HeadStructure: writer 1024 value = merge(R1047,R1049,W1044), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1025}
  [G100] PutReader: value=1025, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1025
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1025}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1025, 1: 1054}
  [G100] PutReader: value=1054, wc=Instance of 'WriterCell', wc.readerId=1055
  [G100] PutReader: Setting argReaders[0] = 1055
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1055} U={} inBody=false
00:01 [32m+125[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   

=== Program: facts ===
p(a).
p(b).

=== Goal: p(X), p(X?) ===

00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G100] PC=53 ClauseTry | Si={} U={1055} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1055} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1055 -> writer 1054
  HeadStructure: writer 1054 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1055} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1055} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1055} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1055}
>>> TRY: Goal 10008 at PC 0
  [G10008] PC=0 Label | Si={} U={} inBody=false
  [G10008] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10008] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1021 -> writer 1020
  HeadStructure: writer 1020 value = merge(R1031,R1033,W1028), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10008] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(b),Const([])), MATCH!
  [G10008] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=8 UnifyWriter | Si={} U={} inBody=false
00:01 [32m+125[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   
Heap Setup:
  Writer 1 (X) - unbound
  Reader 2 (X?) - paired with Writer 1

00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10008] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10008] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1050, bound=false
  HeadStructure: WRITE mode for unbound writer 1050
  [G10008] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10008] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10008] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10008 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10008] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10009 at PC 0
  [G10009] PC=0 Label | Si={} U={} inBody=false
  [G10009] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10009] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1023 -> writer 1022
  HeadStructure: writer 1022 value = merge(R1039,R1041,W1036), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10009] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](Const(2),Const([])), MATCH!
  [G10009] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10009] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1052, bound=false
  HeadStructure: WRITE mode for unbound writer 1052
  [G10009] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10009] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10009] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10009 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10009] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10010 at PC 0
  [G10010] PC=0 Label | Si={} U={} inBody=false
  [G10010] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10010] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1025 -> writer 1024
  HeadStructure: writer 1024 value = merge(R1047,R1049,W1044), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10010] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1035,R1037), MATCH!
  [G10010] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10010] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10010] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1054, bound=false
  HeadStructure: WRITE mode for unbound writer 1054
  [G10010] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10010] PC=15 UnifyWriter | Si={} U={} inBody=false
00:01 [32m+125[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   
--- Executing Goal 1: p(X) ---
00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10010] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10010 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10010] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1061,R1063,W1058), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10000] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={} inBody=false
  [G10000] PC=65 GetVariable | Si={} U={} inBody=false
  [G10000] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=67 PutReader | Si={} U={} inBody=true
  [G10000] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1051}
  [G10000] PutReader: continuing to PC 68
  [G10000] PC=68 PutWriter | Si={} U={} inBody=true
  [G10000] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1051}
  [G10000] PutWriter: value=null, type=Null
  [G10000] PutWriter: about to increment PC to 69
  [G10000] PutWriter: continuing to PC 69
  [G10000] PC=69 Spawn | Si={} U={} inBody=true
  [G10000] PC=70 PutReader | Si={} U={} inBody=true
  [G10000] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1051, 1: 1080}
  [G10000] PutReader: continuing to PC 71
  [G10000] PC=71 Requeue | Si={} U={} inBody=true
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={1081} U={} inBody=false
  [G10000] PC=53 ClauseTry | Si={} U={1081} inBody=false
  [G10000] PC=54 HeadStructure | Si={} U={1081} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1081 -> writer 1080
  HeadStructure: writer 1080 unbound or null, adding to Si and failing
  [G10000] PC=63 ClauseTry | Si={} U={1081} inBody=false
  [G10000] PC=64 Otherwise | Si={} U={1081} inBody=false
  [G10000] PC=73 SuspendEnd | Si={} U={1081} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {1081}
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G10002] PC=63 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={} inBody=false
  [G10002] PC=65 GetVariable | Si={} U={} inBody=false
  [G10002] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=67 PutReader | Si={} U={} inBody=true
  [G10002] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1053}
  [G10002] PutReader: continuing to PC 68
  [G10002] PC=68 PutWriter | Si={} U={} inBody=true
  [G10002] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1053}
  [G10002] PutWriter: value=null, type=Null
  [G10002] PutWriter: about to increment PC to 69
  [G10002] PutWriter: continuing to PC 69
  [G10002] PC=69 Spawn | Si={} U={} inBody=true
  [G10002] PC=70 PutReader | Si={} U={} inBody=true
  [G10002] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1053, 1: 1082}
  [G10002] PutReader: continuing to PC 71
  [G10002] PC=71 Requeue | Si={} U={} inBody=true
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={1083} U={} inBody=false
  [G10002] PC=53 ClauseTry | Si={} U={1083} inBody=false
  [G10002] PC=54 HeadStructure | Si={} U={1083} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1083 -> writer 1082
  HeadStructure: writer 1082 unbound or null, adding to Si and failing
  [G10002] PC=63 ClauseTry | Si={} U={1083} inBody=false
  [G10002] PC=64 Otherwise | Si={} U={1083} inBody=false
  [G10002] PC=73 SuspendEnd | Si={} U={1083} inBody=false
>>> SUSPENSION: Goal 10002 suspended on readers: {1083}
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1055: value=merge(R1077,R1079,W1074) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1055 -> writer 1054
  HeadStructure: writer 1054 value = merge(R1077,R1079,W1074), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1055}
  [G100] PutReader: value=1055, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1055
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1055}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1055, 1: 1084}
  [G100] PutReader: value=1084, wc=Instance of 'WriterCell', wc.readerId=1085
  [G100] PutReader: Setting argReaders[0] = 1085
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1085} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1085} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1085} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1085 -> writer 1084
  HeadStructure: writer 1084 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1085} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1085} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1085} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1085}
>>> TRY: Goal 10011 at PC 0
  [G10011] PC=0 Label | Si={} U={} inBody=false
  [G10011] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10011] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1061,R1063,W1058), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10011] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10011] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1061,R1063,W1058), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10011] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10011] PC=37 ClauseTry | Si={} U={} inBody=false
  [G10011] PC=38 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1051 -> writer 1050
  HeadStructure: writer 1050 value = merge(R1061,R1063,W1058), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10011] PC=39 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R1061 (ReaderTerm), expecting []
  UnifyConstant: reader 1061 bound to Const([]), matches!
  [G10011] PC=40 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=1, value=R1063 (ReaderTerm), expecting []
  UnifyConstant: reader 1063 bound to Const([]), matches!
  [G10011] PC=41 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=2, value=W1058 (WriterTerm), expecting []
  UnifyConstant: binding writer 1058 to [] in ÏƒÌ‚w
  [G10011] PC=42 HeadConstant | Si={} U={} inBody=false
  [G10011] PC=43 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10011 at PC 43 (commit succeeded, ÏƒÌ‚w has 2 bindings)
00:01 [32m+125[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   
>>> TRY: Goal 1 at PC 0
00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
>>> ACTIVATION: Goal 10000 awakened at PC 47
  [G10011] PC=44 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10012 at PC 0
  [G10012] PC=0 Label | Si={} U={} inBody=false
  [G10012] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
00:01 [32m+125[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   
>>> REDUCTION: Goal 1 at PC 2 (commit succeeded, ÏƒÌ‚w has 0 bindings)
00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10012] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10012] PC=19 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10012] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10012] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10012] PC=37 ClauseTry | Si={} U={} inBody=false
  [G10012] PC=38 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1053 -> writer 1052
  HeadStructure: writer 1052 value = merge(R1069,R1071,W1066), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10012] PC=39 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R1069 (ReaderTerm), expecting []
  UnifyConstant: reader 1069 bound to Const([]), matches!
  [G10012] PC=40 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=1, value=R1071 (ReaderTerm), expecting []
  UnifyConstant: reader 1071 bound to Const([]), matches!
  [G10012] PC=41 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=2, value=W1066 (WriterTerm), expecting []
  UnifyConstant: binding writer 1066 to [] in ÏƒÌ‚w
  [G10012] PC=42 HeadConstant | Si={} U={} inBody=false
  [G10012] PC=43 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10012 at PC 43 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 10002 awakened at PC 47
  [G10012] PC=44 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10013 at PC 0
  [G10013] PC=0 Label | Si={} U={} inBody=false
  [G10013] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10013] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1055 -> writer 1054
  HeadStructure: writer 1054 value = merge(R1077,R1079,W1074), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10013] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1027,R1029), MATCH!
  [G10013] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10013] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1084, bound=false
  HeadStructure: WRITE mode for unbound writer 1084
  [G10013] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10013] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10013] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10013 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10013] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10000 at PC 47
  [G10000] PC=47 Label | Si={} U={} inBody=false
  [G10000] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=50 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10000 at PC 50 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10000] PC=51 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 10002 at PC 47
  [G10002] PC=47 Label | Si={} U={} inBody=false
  [G10002] PC=48 ClauseTry | Si={} U={} inBody=false
  [G10002] PC=49 HeadConstant | Si={} U={} inBody=false
  [G10002] PC=50 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10002 at PC 50 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G10002] PC=51 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1085: value=merge(R1091,R1093,W1088) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1085 -> writer 1084
  HeadStructure: writer 1084 value = merge(R1091,R1093,W1088), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1085}
  [G100] PutReader: value=1085, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1085
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1085}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1085, 1: 1094}
  [G100] PutReader: value=1094, wc=Instance of 'WriterCell', wc.readerId=1095
  [G100] PutReader: Setting argReaders[0] = 1095
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1095} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1095} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1095} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1095 -> writer 1094
  HeadStructure: writer 1094 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1095} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1095} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1095} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1095}
>>> TRY: Goal 10014 at PC 0
  [G10014] PC=0 Label | Si={} U={} inBody=false
  [G10014] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10014] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1085 -> writer 1084
  HeadStructure: writer 1084 value = merge(R1091,R1093,W1088), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
hello world  [G10014] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1065,R1067), MATCH!
  [G10014] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10014] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1094, bound=false
  HeadStructure: WRITE mode for unbound writer 1094
  [G10014] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10014] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10014] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10014 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10014] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1095: value=merge(R1101,R1103,W1098) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1095 -> writer 1094
  HeadStructure: writer 1094 value = merge(R1101,R1103,W1098), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false

  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1095}
  [G100] PutReader: value=1095, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1095
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1095}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1095, 1: 1104}
  [G100] PutReader: value=1104, wc=Instance of 'WriterCell', wc.readerId=1105
  [G100] PutReader: Setting argReaders[0] = 1105
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1105} U={} inBody=false
00:01 [32m+125[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   

Result: RunResult.terminated
00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G100] PC=53 ClauseTry | Si={} U={1105} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1105} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1105} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1105} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1105} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1105}
>>> TRY: Goal 10015 at PC 0
  [G10015] PC=0 Label | Si={} U={} inBody=false
  [G10015] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10015] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1095 -> writer 1094
  HeadStructure: writer 1094 value = merge(R1101,R1103,W1098), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10015] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = [|](R1057,R1059), MATCH!
  [G10015] PC=7 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=8 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=9 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=11, isClauseVar=true, functor=[|]/2
  [G10015] PC=10 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=11 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=12 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=1, isClauseVar=false, functor=merge/3
  HeadStructure: arg is writer 1104, bound=false
  HeadStructure: WRITE mode for unbound writer 1104
  [G10015] PC=13 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=14 UnifyReader | Si={} U={} inBody=false
  [G10015] PC=15 UnifyWriter | Si={} U={} inBody=false
  [G10015] PC=16 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10015 at PC 16 (commit succeeded, ÏƒÌ‚w has 5 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10015] PC=17 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1105: value=merge(R1111,R1113,W1108) vs pattern=true
  [G100] PC=53 ClauseTry | Si={} U={} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1111,R1113,W1108), expecting ,/2
  HeadStructure: NO MATCH, failing
  [G100] PC=63 ClauseTry | Si={} U={} inBody=false
  [G100] PC=64 Otherwise | Si={} U={} inBody=false
  [G100] PC=65 GetVariable | Si={} U={} inBody=false
  [G100] PC=66 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 66 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=67 PutReader | Si={} U={} inBody=true
  [G100] PC=67 PutReader varIndex=0 argSlot=0 clauseVars={0: 1105}
  [G100] PutReader: value=1105, wc=null, wc.readerId=null
  [G100] PutReader: Not a writer, assuming reader ID, setting argReaders[0] = 1105
  [G100] PutReader: continuing to PC 68
  [G100] PC=68 PutWriter | Si={} U={} inBody=true
  [G100] PC=68 PutWriter varIndex=1 argSlot=1 clauseVars={0: 1105}
  [G100] PutWriter: value=null, type=Null
  [G100] PutWriter: about to increment PC to 69
  [G100] PutWriter: continuing to PC 69
  [G100] PC=69 Spawn | Si={} U={} inBody=true
00:01 [32m+125[0m[31m -11[0m: test/custom/hello_world_test.dart: hello_world/0: prints hello world[0m                                                                                                                   
âœ“ hello_world/0 executed successfully

00:01 [32m+125[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G100] PC=70 PutReader | Si={} U={} inBody=true
  [G100] PC=70 PutReader varIndex=1 argSlot=0 clauseVars={0: 1105, 1: 1114}
  [G100] PutReader: value=1114, wc=Instance of 'WriterCell', wc.readerId=1115
  [G100] PutReader: Setting argReaders[0] = 1115
  [G100] PutReader: continuing to PC 71
  [G100] PC=71 Requeue | Si={} U={} inBody=true
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [G100] PC=50 Commit | Si={1115} U={} inBody=false
  [G100] PC=53 ClauseTry | Si={} U={1115} inBody=false
  [G100] PC=54 HeadStructure | Si={} U={1115} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=,/2
  HeadStructure: READ mode, reader 1115 -> writer 1114
  HeadStructure: writer 1114 unbound or null, adding to Si and failing
  [G100] PC=63 ClauseTry | Si={} U={1115} inBody=false
  [G100] PC=64 Otherwise | Si={} U={1115} inBody=false
  [G100] PC=73 SuspendEnd | Si={} U={1115} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {1115}
>>> TRY: Goal 10016 at PC 0
  [G10016] PC=0 Label | Si={} U={} inBody=false
  [G10016] PC=1 ClauseTry | Si={} U={} inBody=false
  [G10016] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1111,R1113,W1108), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10016] PC=3 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=4 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=5 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=6 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10016] PC=19 ClauseTry | Si={} U={} inBody=false
00:01 [32m+126[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 00:01 [32m+126[0m[31m -11[0m: test/custom/metainterp_three_way_merge_test.dart: Metainterpreter three-way merge: run((merge([1,2],[3],Xs), merge([a,b],[c],Ys?), merge(Xs?,Ys?,Zs)))[0m                                 
  [G10016] PC=20 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1111,R1113,W1108), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10016] PC=21 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=22 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=23 UnifyWriter | Si={} U={} inBody=false
  [G10016] PC=24 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=10, isClauseVar=true, functor=[|]/2
  HeadStructure: clause var 10 = Const([]) (constant), NO MATCH
  [G10016] PC=37 ClauseTry | Si={} U={} inBody=false
  [G10016] PC=38 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=merge/3
  HeadStructure: READ mode, reader 1105 -> writer 1104
  HeadStructure: writer 1104 value = merge(R1111,R1113,W1108), expecting merge/3
  HeadStructure: MATCH! Entering READ mode
  [G10016] PC=39 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=0, value=R1111 (ReaderTerm), expecting []
  UnifyConstant: reader 1111 bound to Const([]), matches!
  [G10016] PC=40 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=1, value=R1113 (ReaderTerm), expecting []
  UnifyConstant: reader 1113 bound to Const([]), matches!
  [G10016] PC=41 UnifyConstant | Si={} U={} inBody=false
  UnifyConstant: S=2, value=W1108 (WriterTerm), expecting []
  UnifyConstant: binding writer 1108 to [] in ÏƒÌ‚w
  [G10016] PC=42 HeadConstant | Si={} U={} inBody=false
  [G10016] PC=43 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 10016 at PC 43 (commit succeeded, ÏƒÌ‚w has 2 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 47
  [G10016] PC=44 Proceed | Si={} U={} inBody=true
>>> TRY: Goal 100 at PC 47
  [G100] PC=47 Label | Si={} U={} inBody=false
  [G100] PC=48 ClauseTry | Si={} U={} inBody=false
  [G100] PC=49 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 1115: value=Const(true) vs pattern=true
  [G100] PC=50 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 50 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=51 Proceed | Si={} U={} inBody=true

Goals executed: [100, 10000, 10001, 10002, 10003, 10004, 10001, 10000, 10002, 100, 10005, 10006, 10007, 10000, 10002, 100, 10008, 10009, 10010, 10000, 10002, 100, 10011, 10012, 10013, 10000, 10002, 100, 10014, 100, 10015, 100, 10016, 100]
Total executions: 34

======================================================================
RESULTS
======================================================================
Xs (W1) bound: true
Ys (W3) bound: true
Zs (W5) bound: true
Xs value: [|](R1011,R1013)
  Xs = [Const(1), Const(3), Const(2)]
Ys value: [|](R1007,R1009)
  Ys = [Const(a), Const(c), Const(b)]
Zs value: [|](R1015,R1017)
  Zs = [Const(1), Const(a), Const(3), Const(c), Const(2), Const(b)]

âœ“ Three-way merge test complete
00:01 [32m+126[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:01 [32m+127[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   00:01 [32m+127[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   
  [G100] PC=2 HeadBindWriter | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=4 BodySetConst | Si={} U={} inBody=true
  [G100] PC=5 Proceed | Si={} U={} inBody=true
Result: RunResult.terminated
Writer 1 bound? true
Writer 1 value: Const(a)

--- Executing Goal 2: p(X?) ---
>>> TRY: Goal 101 at PC 0
>>> FAIL: Goal 101 (all clauses exhausted, U empty)
Result: RunResult.terminated
Reader 2 bound? true
Reader 2 reads value: Const(a)

=== Final State ===
X = Const(a)
SUCCESS âœ“
00:01 [32m+128[0m[31m -11[0m: test/custom/interactive_test.dart: Program: facts, Goal: p(X), p(X?)[0m                                                                                                                   00:01 [32m+128[0m[31m -11[0m: [1m[90mloading test/compiler/verify_merge_base_test.dart[0m[0m                                                                                                                                      00:01 [32m+128[0m[31m -11[0m: test/compiler/verify_merge_base_test.dart: Verify: merge([],[],[]).[0m                                                                                                                    00:01 [32m+128[0m[31m -11[0m: test/compiler/verify_merge_base_test.dart: Verify: merge([],[],[]).[0m                                                                                                                    

======================================================================
COMPILER VERIFICATION TEST
Source: merge([],[],[]).
Goal: merge([], [], []) - should succeed
======================================================================

COMPILED BYTECODE:
  0: Instance of 'Label'
  1: Instance of 'ClauseTry'
  2: Instance of 'HeadNil'
  3: Instance of 'HeadNil'
  4: Instance of 'HeadNil'
  5: Instance of 'Commit'
  6: Instance of 'Proceed'
  7: Instance of 'Label'
  8: Instance of 'NoMoreClauses'

COMPILED LABELS:
  merge/3 => 0
  merge/3_end => 7

----------------------------------------------------------------------
BYTECODE VERIFICATION:
  merge/3 should have:
    - Label
    - ClauseTry
    - HeadNil(0) for first []
    - HeadNil(1) for second []
    - HeadNil(2) for third []
    - Commit
    - Proceed
    - Label(_end)
    - NoMoreClauses
----------------------------------------------------------------------

âœ“ Bytecode structure verified!

======================================================================
EXECUTION TEST
======================================================================

HEAP SETUP:
  Arg0 (Xs?) = []
  Arg1 (Ys?) = []
  Arg2 (Zs?) = []

Goal: merge([], [], []) at PC 0
CallEnv: readers={0: 2, 1: 4, 2: 6}

00:01 [32m+128[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a).[0m                                                                              

=== INTEGRATION TEST: p(a) ===
00:01 [32m+128[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               

=== INTEGRATION TEST: p(X) :- q(X?). q(a). ===
00:01 [32m+128[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a).[0m                                                                              
Compiled 7 instructions
Labels: {p/1: 0, p/1_end: 5}
Running goal p(a)...
00:01 [32m+128[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
Compiled 15 instructions
Labels: [p/1, p/1_end, q/1, q/1_end]
  0: Instance of 'Label'
  1: Instance of 'ClauseTry'
  2: Instance of 'GetVariable'
  3: Instance of 'Commit'
  4: Instance of 'PutReader'
  5: Instance of 'Requeue'
  6: Instance of 'Label'
  7: Instance of 'NoMoreClauses'
  8: Instance of 'Label'
  9: Instance of 'ClauseTry'
  10: Instance of 'HeadConstant'
  11: Instance of 'Commit'
  12: Instance of 'Proceed'
  13: Instance of 'Label'
  14: Instance of 'NoMoreClauses'
Running p(W) - should spawn q(W?) which binds W to a...
00:01 [32m+128[0m[31m -11[0m: test/compiler/verify_merge_base_test.dart: Verify: merge([],[],[]).[0m                                                                                                                    
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadNil | Si={} U={} inBody=false
  HeadNil: argSlot=0, isClauseVar=false
  HeadNil: arg=Instance of '_ArgInfo'
  HeadNil: arg is reader 2
  HeadNil: reader 2 -> writer 1
  HeadNil: writer 1 value = Const(null)
  HeadNil: MATCH! value is []
  [G100] PC=3 HeadNil | Si={} U={} inBody=false
  HeadNil: argSlot=1, isClauseVar=false
  HeadNil: arg=Instance of '_ArgInfo'
  HeadNil: arg is reader 4
  HeadNil: reader 4 -> writer 3
  HeadNil: writer 3 value = Const(null)
  HeadNil: MATCH! value is []
  [G100] PC=4 HeadNil | Si={} U={} inBody=false
  HeadNil: argSlot=2, isClauseVar=false
  HeadNil: arg=Instance of '_ArgInfo'
  HeadNil: arg is reader 6
  HeadNil: reader 6 -> writer 5
  HeadNil: writer 5 value = Const(null)
  HeadNil: MATCH! value is []
  [G100] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Total executions: 1

âœ“ Success! merge([],[],[]) completed
âœ“ Compiled program matches hand-written semantics!

00:01 [32m+129[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a).[0m                                                                              00:01 [32m+129[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a).[0m                                                                              
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: 1
âœ“ Compiled and executed p(a) successfully

00:01 [32m+130[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               00:01 [32m+130[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(X).[0m                                                                              

=== INTEGRATION TEST: p(X) ===
Compiled 7 instructions
Running goal p(W) with unbound writer...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: 1
Writer bound: false
âœ“ Compiled and executed p(X) successfully

00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a). p(b).[0m                                                                        

=== INTEGRATION TEST: p(a). p(b). ===
Compiled 12 instructions
Labels: [p/1, p/1_c1, p/1_end]
Running p(a)...
>>> TRY: Goal 100 at PC 0
00:01 [32m+131[0m[31m -11[0m: test/compiler/compare_bytecode_test.dart: Compare compiled vs hand-written bytecode[0m                                                                                                    

=== BYTECODE COMPARISON ===

00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a). p(b).[0m                                                                        
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
âœ“ p(a) succeeded
Running p(b)...
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
>>> TRY: Goal 100 at PC 0
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a). p(b).[0m                                                                        
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 8 (commit succeeded, ÏƒÌ‚w has 0 bindings)
âœ“ p(b) succeeded
Running p(c)...
>>> TRY: Goal 300 at PC 0
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
  [G100] PC=0 Label | Si={} U={} inBody=false
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a). p(b).[0m                                                                        
>>> FAIL: Goal 300 (all clauses exhausted, U empty)
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_simple_test.dart: Compiler Integration - Simple Programs compile and run: p(a). p(b).[0m                                                                        
âœ“ p(c) failed as expected

00:01 [32m+131[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
00:01 [32m+132[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               00:01 [32m+132[0m[31m -11[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).[0m                                                               
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 PutReader | Si={} U={} inBody=true
  [G100] PC=4 PutReader varIndex=0 argSlot=0 clauseVars={0: 1}
  [G100] PutReader: value=1, wc=Instance of 'WriterCell', wc.readerId=2
  [G100] PutReader: Setting argReaders[0] = 2
  [G100] PutReader: continuing to PC 5
  [G100] PC=5 Requeue | Si={} U={} inBody=true
  [G100] PC=8 Label | Si={} U={} inBody=false
  [G100] PC=9 ClauseTry | Si={} U={} inBody=false
  [G100] PC=10 HeadConstant | Si={} U={} inBody=false
  [G100] PC=11 Commit | Si={2} U={} inBody=false
  [G100] PC=14 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goals executed: 1
Writer bound: false
00:01 [32m+132[0m[31m -11[0m: test/compiler/compare_bytecode_test.dart: Compare compiled vs hand-written bytecode[0m                                                                                                    
COMPILED BYTECODE:
0: Instance of 'Label'
1: Instance of 'ClauseTry'
2: Instance of 'GetVariable'
3: Instance of 'Commit'
4: Instance of 'PutReader'
5: Instance of 'Requeue'
6: Instance of 'Label'
7: Instance of 'NoMoreClauses'
8: Instance of 'Label'
9: Instance of 'ClauseTry'
10: Instance of 'HeadConstant'
11: Instance of 'Commit'
12: Instance of 'Proceed'
13: Instance of 'Label'
14: Instance of 'NoMoreClauses'

LABELS:
  p/1 => 0
  p/1_end => 6
  q/1 => 8
  q/1_end => 13


EXPECTED HAND-WRITTEN EQUIVALENT:
0: Label(p/1)
1: ClauseTry()
2: GetVariable(0, 0)  // X from arg0
3: Commit()
4: PutReader(0, 0)    // arg0 = X?
5: Requeue(q/1, 1)    // tail call q(X?)
6: Label(p/1_end)
7: NoMoreClauses()
8: Label(q/1)
9: ClauseTry()
10: HeadConstant(a, 0)
11: Commit()
12: Proceed()
13: Label(q/1_end)
14: NoMoreClauses()

Requeue instruction:
  procedureLabel: q/1
  arity: 1
00:01 [32m+133[0m[31m -12[0m: test/compiler/compare_bytecode_test.dart: Compare compiled vs hand-written bytecode[0m                                                                                                    00:01 [32m+133[0m[31m -12[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a). [1m[31m[E][0m[0m                                                           
  Expected: true
    Actual: <false>
  W should be bound to a
  
  package:matcher                                expect
  test/compiler/integration_body_test.dart 64:7  main.<fn>.<fn>
  

[1m[36mTo run this test again:[0m dart test test/compiler/integration_body_test.dart -p vm --plain-name 'Compiler Integration - Clauses with Body compile and run: p(X) :- q(X?). q(a).'
00:01 [32m+133[0m[31m -12[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X, Y) :- q(X?), r(Y?). with spawn[0m                                                00:01 [32m+133[0m[31m -12[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X, Y) :- q(X?), r(Y?). with spawn[0m                                                

=== INTEGRATION TEST: p(X,Y) :- q(X?), r(Y?). ===
Compiled 25 instructions
Running p(W1, W2) - should spawn q(W1?) and requeue r(W2?)...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 GetVariable | Si={} U={} inBody=false
  [G100] PC=4 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 4 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=5 PutReader | Si={} U={} inBody=true
  [G100] PC=5 PutReader varIndex=0 argSlot=0 clauseVars={0: 1, 1: 3}
  [G100] PutReader: value=1, wc=Instance of 'WriterCell', wc.readerId=2
  [G100] PutReader: Setting argReaders[0] = 2
  [G100] PutReader: continuing to PC 6
  [G100] PC=6 Spawn | Si={} U={} inBody=true
  [G100] PC=7 PutReader | Si={} U={} inBody=true
  [G100] PC=7 PutReader varIndex=1 argSlot=0 clauseVars={0: 1, 1: 3}
  [G100] PutReader: value=3, wc=Instance of 'WriterCell', wc.readerId=4
  [G100] PutReader: Setting argReaders[0] = 4
  [G100] PutReader: continuing to PC 8
  [G100] PC=8 Requeue | Si={} U={} inBody=true
  [G100] PC=18 Label | Si={} U={} inBody=false
  [G100] PC=19 ClauseTry | Si={} U={} inBody=false
  [G100] PC=20 HeadConstant | Si={} U={} inBody=false
  [G100] PC=21 Commit | Si={4} U={} inBody=false
  [G100] PC=24 NoMoreClauses | Si={} U={4} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {4}
>>> TRY: Goal 10000 at PC 11
  [G10000] PC=11 Label | Si={} U={} inBody=false
  [G10000] PC=12 ClauseTry | Si={} U={} inBody=false
  [G10000] PC=13 HeadConstant | Si={} U={} inBody=false
  [G10000] PC=14 Commit | Si={2} U={} inBody=false
  [G10000] PC=17 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 10000 suspended on readers: {2}
Goals executed: 2
W1 bound: false
W2 bound: false
00:01 [32m+133[0m[31m -13[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: p(X, Y) :- q(X?), r(Y?). with spawn [1m[31m[E][0m[0m                                            
  Expected: true
    Actual: <false>
  W1 should be bound to a
  
  package:matcher                                 expect
  test/compiler/integration_body_test.dart 113:7  main.<fn>.<fn>
  

[1m[36mTo run this test again:[0m dart test test/compiler/integration_body_test.dart -p vm --plain-name 'Compiler Integration - Clauses with Body compile and run: p(X, Y) :- q(X?), r(Y?). with spawn'
00:01 [32m+133[0m[31m -13[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: suspension on unbound reader[0m                                                       00:01 [32m+133[0m[31m -13[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: suspension on unbound reader[0m                                                       

=== INTEGRATION TEST: Suspension ===
Compiled 7 instructions
Running p(R?) with unbound reader - should suspend...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Goals executed: 1
ROQ has suspension: false
00:01 [32m+133[0m[31m -14[0m: test/compiler/integration_body_test.dart: Compiler Integration - Clauses with Body compile and run: suspension on unbound reader [1m[31m[E][0m[0m                                                   
  Expected: true
    Actual: <false>
  Should have suspension note
  
  package:matcher                                 expect
  test/compiler/integration_body_test.dart 157:7  main.<fn>.<fn>
  

[1m[36mTo run this test again:[0m dart test test/compiler/integration_body_test.dart -p vm --plain-name 'Compiler Integration - Clauses with Body compile and run: suspension on unbound reader'
00:01 [32m+133[0m[31m -14[0m: [1m[90mloading test/compiler/verify_body_reader_test.dart[0m[0m                                                                                                                                     00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               

======================================================================
COMPILER VERIFICATION TEST
Source: p(X) :- q(X?). q(a).
Goal: p(W) where W is unbound writer
Expected: p spawns q(W?), q binds W to a
======================================================================

COMPILED BYTECODE:
  0: Instance of 'Label'
  1: Instance of 'ClauseTry'
  2: Instance of 'GetVariable'
  3: Instance of 'Commit'
  4: Instance of 'PutReader'
  5: Instance of 'Requeue'
  6: Instance of 'Label'
  7: Instance of 'NoMoreClauses'
  8: Instance of 'Label'
  9: Instance of 'ClauseTry'
  10: Instance of 'HeadConstant'
  11: Instance of 'Commit'
  12: Instance of 'Proceed'
  13: Instance of 'Label'
  14: Instance of 'NoMoreClauses'

COMPILED LABELS:
  p/1 => 0
  p/1_end => 6
  q/1 => 8
  q/1_end => 13

----------------------------------------------------------------------
BYTECODE VERIFICATION:
  p/1 body should use PutReader and Requeue
  q/1 should match constant a
----------------------------------------------------------------------

00:01 [32m+133[0m[31m -14[0m: test/compiler/compare_run_struct_test.dart: Compare+Run: struct_test.dart - p(f(a,b))[0m                                                                                                  

=== STRUCT TEST: p(f(a,b)) ===

00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               
âœ“ Bytecode structure verified!

======================================================================
EXECUTION TEST
======================================================================

HEAP SETUP:
  Writer 1 (W) paired with Reader 2 (W?)

Goal: p(W) at PC 0
CallEnv: writers={0: 1}

00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        

======================================================================
COMPILER VERIFICATION TEST
Source: p(a). q(a).
Goal: Run q(X?) first (suspends), then p(X) (binds X=a, wakes q)
======================================================================

00:01 [32m+133[0m[31m -14[0m: test/compiler/compare_run_struct_test.dart: Compare+Run: struct_test.dart - p(f(a,b))[0m                                                                                                  
Compiled 9 instructions
00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        
COMPILED BYTECODE:
  0: Instance of 'Label'
  1: Instance of 'ClauseTry'
  2: Instance of 'HeadConstant'
  3: Instance of 'Commit'
  4: Instance of 'Proceed'
  5: Instance of 'Label'
  6: Instance of 'NoMoreClauses'
  7: Instance of 'Label'
  8: Instance of 'ClauseTry'
  9: Instance of 'HeadConstant'
  10: Instance of 'Commit'
  11: Instance of 'Proceed'
  12: Instance of 'Label'
  13: Instance of 'NoMoreClauses'

COMPILED LABELS:
  p/1 => 0
  p/1_end => 5
  q/1 => 7
  q/1_end => 12

----------------------------------------------------------------------
BYTECODE VERIFICATION:
  Both p/1 and q/1 should have:
    - Label
    - ClauseTry
    - HeadConstant(a, 0)
    - Commit
    - Proceed
    - Label(_end)
    - NoMoreClauses
----------------------------------------------------------------------

âœ“ Bytecode structure verified!

======================================================================
EXECUTION TEST
======================================================================

00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               
>>> TRY: Goal 100 at PC 0
00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        
HEAP SETUP:
  Writer 1 (X) paired with Reader 2 (X?)

00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               
  [G100] PC=0 Label | Si={} U={} inBody=false
00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        
Step 1: Run q(X?) with unbound reader
00:01 [32m+133[0m[31m -14[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a).[0m                                                                                                               
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 PutReader | Si={} U={} inBody=true
  [G100] PC=4 PutReader varIndex=0 argSlot=0 clauseVars={0: 1}
  [G100] PutReader: value=1, wc=Instance of 'WriterCell', wc.readerId=2
  [G100] PutReader: Setting argReaders[0] = 2
  [G100] PutReader: continuing to PC 5
  [G100] PC=5 Requeue | Si={} U={} inBody=true
  [G100] PC=8 Label | Si={} U={} inBody=false
  [G100] PC=9 ClauseTry | Si={} U={} inBody=false
  [G100] PC=10 HeadConstant | Si={} U={} inBody=false
  [G100] PC=11 Commit | Si={2} U={} inBody=false
  [G100] PC=14 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goals executed: [100]
Total executions: 1
Writer bound: false

00:01 [32m+133[0m[31m -15[0m: test/compiler/compare_run_struct_test.dart: Compare+Run: struct_test.dart - p(f(a,b))[0m                                                                                                  
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadStructure | Si={} U={} inBody=false
  HeadStructure: argSlot=0, isClauseVar=false, functor=f/2
  HeadStructure: arg is writer 1, bound=false
  HeadStructure: WRITE mode for unbound writer 1
  [G100] PC=3 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=4 UnifyConstant | Si={} U={} inBody=false
  [G100] PC=5 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 5 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=6 Proceed | Si={} U={} inBody=true
Goals executed: [100]
Writer bound? true
âœ… p(f(a,b)) works!

00:01 [32m+134[0m[31m -15[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        00:01 [32m+134[0m[31m -15[0m: test/compiler/verify_simple_pq_test.dart: Verify: p(a). q(a). Goal: q(X?), p(X)[0m                                                                                                        
>>> TRY: Goal 100 at PC 7
  [G100] PC=7 Label | Si={} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={} inBody=false
  [G100] PC=9 HeadConstant | Si={} U={} inBody=false
  [G100] PC=10 Commit | Si={2} U={} inBody=false
  [G100] PC=13 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
  Goals executed: [100]
  X bound? false
  Suspended on R2? 1 goals

Step 2: Run p(X) with unbound writer
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 7
>>> TRY: Goal 100 at PC 7
  [G100] PC=7 Label | Si={} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={} inBody=false
  [G100] PC=9 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(a) vs pattern=a
  [G100] PC=10 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 10 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=11 Proceed | Si={} U={} inBody=true
  Goals executed: [200, 100]
  X bound? true
  X value: Const(a)

âœ“ Success! X = a, both goals succeeded
âœ“ Compiled program matches hand-written semantics!

00:01 [32m+135[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer analyzes simple clause with variables[0m                                                                                                       00:01 [32m+135[0m[31m -15[0m: test/compiler/verify_body_reader_test.dart: Verify: p(X) :- q(X?). q(a). [1m[31m[E][0m[0m                                                                                                           
  Expected: <true>
    Actual: <false>
  W should be bound to a
  
  package:matcher                                   expect
  test/compiler/verify_body_reader_test.dart 108:5  main.<fn>
  

[1m[36mTo run this test again:[0m dart test test/compiler/verify_body_reader_test.dart -p vm --plain-name 'Verify: p(X) :- q(X?). q(a).'
00:01 [32m+136[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer analyzes simple clause with variables[0m                                                                                                       00:01 [32m+136[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer detects SRSW violation - multiple writer occurrences[0m                                                                                        00:01 [32m+137[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer detects SRSW violation - multiple writer occurrences[0m                                                                                        00:01 [32m+137[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer detects SRSW violation - multiple reader occurrences without ground[0m                                                                         00:01 [32m+138[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer detects SRSW violation - multiple reader occurrences without ground[0m                                                                         00:01 [32m+138[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer allows multiple reader occurrences with ground guard[0m                                                                                        00:01 [32m+139[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer allows multiple reader occurrences with ground guard[0m                                                                                        00:01 [32m+139[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer analyzes merge/3 example[0m                                                                                                                    00:01 [32m+140[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer analyzes merge/3 example[0m                                                                                                                    00:01 [32m+140[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer assigns register indices[0m                                                                                                                    00:01 [32m+141[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer assigns register indices[0m                                                                                                                    00:01 [32m+141[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer handles nested structures[0m                                                                                                                   00:01 [32m+142[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer handles nested structures[0m                                                                                                                   00:01 [32m+142[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer handles underscore (anonymous variable)[0m                                                                                                     00:01 [32m+143[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer handles underscore (anonymous variable)[0m                                                                                                     00:01 [32m+143[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer marks clauses with guards and body[0m                                                                                                          00:01 [32m+144[0m[31m -15[0m: test/compiler/analyzer_test.dart: Analyzer marks clauses with guards and body[0m                                                                                                          00:01 [32m+144[0m[31m -15[0m: [1m[90mloading test/compiler/lexer_parser_test.dart[0m[0m                                                                                                                                           00:01 [32m+144[0m[31m -15[0m: test/compiler/lexer_parser_test.dart: Lexer tokenizes simple atoms and punctuation[0m                                                                                                     00:01 [32m+145[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+146[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+147[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+148[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+149[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+150[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+151[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+151[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         

======================================================================
COMPILER VERIFICATION TEST
Hand-written: p(a). forward(X) :- p(X). [PutWriter - binds X]
SRSW-compliant: p(a). forward(X) :- p(X?). [PutReader - suspends]
Goal: forward(Y) where Y is unbound writer
NOTE: Different semantics - SRSW version will suspend!
======================================================================

00:01 [32m+152[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+153[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+154[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+155[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+156[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+157[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+158[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+158[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
COMPILED BYTECODE:
00:01 [32m+159[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+159[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
  0: Instance of 'Label'
  1: Instance of 'ClauseTry'
  2: Instance of 'HeadConstant'
  3: Instance of 'Commit'
  4: Instance of 'Proceed'
  5: Instance of 'Label'
  6: Instance of 'NoMoreClauses'
  7: Instance of 'Label'
  8: Instance of 'ClauseTry'
  9: Instance of 'GetVariable'
  10: Instance of 'Commit'
  11: Instance of 'PutReader'
  12: Instance of 'Requeue'
  13: Instance of 'Label'
  14: Instance of 'NoMoreClauses'

COMPILED LABELS:
  p/1 => 0
  p/1_end => 5
  forward/1 => 7
  forward/1_end => 13

----------------------------------------------------------------------
BYTECODE COMPARISON:
  Hand-written: Uses PutWriter(0, 0) - forwards X as writer
  Compiled:     Uses PutReader(0, 0) - passes X? as reader

DIFFERENCE: Hand-written violates SRSW (X appears twice).
SRSW-compliant version uses X? in body, generating PutReader.
----------------------------------------------------------------------

00:01 [32m+160[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+160[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
âœ“ Bytecode structure verified!

======================================================================
EXECUTION TEST
======================================================================

HEAP SETUP:
  Writer 1 (Y) paired with Reader 2 (Y?)

00:01 [32m+161[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+161[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
Goal: forward(Y) at PC 7
CallEnv: writers={{0: 1}}

00:01 [32m+162[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+163[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+164[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+165[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+166[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+167[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+168[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+169[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+170[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+171[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+172[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+173[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+174[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+174[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
>>> TRY: Goal 100 at PC 7
00:01 [32m+175[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+175[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
  [G100] PC=7 Label | Si={} U={} inBody=false
  [G100] PC=8 ClauseTry | Si={} U={} inBody=false
00:01 [32m+176[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+176[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
  [G100] PC=9 GetVariable | Si={} U={} inBody=false
  [G100] PC=10 Commit | Si={} U={} inBody=false
00:01 [32m+177[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+177[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
>>> REDUCTION: Goal 100 at PC 10 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=11 PutReader | Si={} U={} inBody=true
  [G100] PC=11 PutReader varIndex=0 argSlot=0 clauseVars={0: 1}
00:01 [32m+178[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+178[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
  [G100] PutReader: value=1, wc=Instance of 'WriterCell', wc.readerId=2
  [G100] PutReader: Setting argReaders[0] = 2
  [G100] PutReader: continuing to PC 12
  [G100] PC=12 Requeue | Si={} U={} inBody=true
00:01 [32m+179[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+179[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
  [G100] PC=6 NoMoreClauses | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goals executed: [100]
Total executions: 1

======================================================================
RESULTS
======================================================================
Y (W1) bound: false
âœ“ SRSW version suspends (as expected - different from hand-written)
âœ“ Hand-written uses writer forwarding (not valid SRSW)
âœ“ Compiled bytecode structure is correct!

00:01 [32m+180[0m[31m -15[0m: test/compiler/verify_simple_body_test.dart: Verify: p(a). forward(X) :- p(X?).[0m                                                                                                         00:01 [32m+180[0m[31m -15[0m: [1m[90mloading test/conformance/commit_activation_test.dart[0m[0m                                                                                                                                   00:01 [32m+180[0m[31m -15[0m: test/conformance/commit_activation_test.dart: commit applies ÏƒÌ‚w effect: wake FIFO and single-reactivation[0m                                                                             00:01 [32m+181[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards are pure: HEAD/GUARD phase does not mutate heap[0m                                                                                        00:01 [32m+181[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards are pure: HEAD/GUARD phase does not mutate heap[0m                                                                                        

=== GUARD PURITY TEST: No Heap Mutation in Phase 1 ===
Before execution: writer 1 bound = false
00:01 [32m+182[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards are pure: HEAD/GUARD phase does not mutate heap[0m                                                                                        00:01 [32m+182[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards are pure: HEAD/GUARD phase does not mutate heap[0m                                                                                        
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 GetVariable | Si={} U={} inBody=false
  [G100] PC=4 Ground | Si={} U={} inBody=false
  [G100] PC=9 ClauseTry | Si={} U={} inBody=false
  [G100] PC=10 Otherwise | Si={} U={} inBody=false
  [G100] PC=11 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 11 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=12 Proceed | Si={} U={} inBody=true
After execution: writer 1 bound = false
Goals executed: 1
âœ“ HEAD/GUARD phase did not mutate heap (ÏƒÌ‚w discarded on clause failure)

00:01 [32m+183[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         00:01 [32m+183[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards cannot call allocate/deallocate: environment operations forbidden in Phase 1[0m                                                           

=== GUARD PURITY TEST: No Allocate/Deallocate in Guards ===
00:01 [32m+183[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         

=== COMMIT BEFORE BODY TEST ===
00:01 [32m+183[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards cannot call allocate/deallocate: environment operations forbidden in Phase 1[0m                                                           
Testing legal program: allocate/deallocate in BODY phase only
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Allocate | Si={} U={} inBody=true
  [G100] PC=4 Allocate 1 slots - created frame with CP=5
  [G100] PC=5 Deallocate | Si={} U={} inBody=true
  [G100] PC=5 Deallocate - restored CP=5, parent frame=false
  [G100] PC=6 Proceed | Si={} U={} inBody=true
âœ“ Allocate/Deallocate are only allowed in BODY phase (after COMMIT)

00:01 [32m+184[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         00:01 [32m+184[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         
Starting p(X) - testing commit timing
00:01 [32m+184[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards add to suspension set Si but do not mutate heap cells[0m                                                                                  

=== GUARD PURITY TEST: Guards add to Si without heap mutation ===
Before execution: writer 1 bound = false
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 GetVariable | Si={} U={} inBody=false
  [G100] PC=3 Ground | Si={} U={} inBody=false
00:01 [32m+184[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         
Before execution: writer 1 bound = false
00:01 [32m+184[0m[31m -15[0m: test/conformance/guard_purity_test.dart: Guards add to suspension set Si but do not mutate heap cells[0m                                                                                  
  [G100] PC=4 Commit | Si={2} U={} inBody=false
  [G100] PC=7 ClauseTry | Si={} U={2} inBody=false
  [G100] PC=8 Otherwise | Si={} U={2} inBody=false
  [G100] PC=12 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
After execution: writer 1 bound = false
Goals executed: 1
âœ“ Guards add to suspension set Si without mutating heap cells

00:01 [32m+185[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         00:01 [32m+185[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
After execution: writer 1 bound = true
Writer value: Const(a)
âœ“ COMMIT applied ÏƒÌ‚w to heap before entering BODY phase

00:01 [32m+186[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit occurs before body: ÏƒÌ‚w applied atomically before first body instruction[0m                                                         00:01 [32m+186[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit binds paired reader and activates suspended goals[0m                                                                                00:01 [32m+186[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit binds paired reader and activates suspended goals[0m                                                                                

=== COMMIT ACTIVATES SUSPENDED GOALS TEST ===
Calling q(X?) where X is unbound...
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [G100] PC=3 Commit | Si={2} U={} inBody=false
  [G100] PC=6 SuspendEnd | Si={} U={2} inBody=false
>>> SUSPENSION: Goal 100 suspended on readers: {2}
Goal q suspended: true (ROQ for reader 2 has notes)
âœ“ q suspended on unbound reader X?
Calling p(X) to bind writer X...
>>> TRY: Goal 200 at PC 0
>>> REDUCTION: Goal 200 at PC 3 (commit succeeded, ÏƒÌ‚w has 1 bindings)
>>> ACTIVATION: Goal 100 awakened at PC 0
>>> TRY: Goal 100 at PC 0
  [G100] PC=0 Label | Si={} U={} inBody=false
  [G100] PC=1 ClauseTry | Si={} U={} inBody=false
  [G100] PC=2 HeadConstant | Si={} U={} inBody=false
  [DEBUG] HeadConstant checking reader 2: value=Const(value) vs pattern=value
  [G100] PC=3 Commit | Si={} U={} inBody=false
>>> REDUCTION: Goal 100 at PC 3 (commit succeeded, ÏƒÌ‚w has 0 bindings)
  [G100] PC=4 Proceed | Si={} U={} inBody=true
Writer X bound: true
Goals executed: 2
âœ“ COMMIT bound writer, then paired reader, then activated suspended goal q

00:01 [32m+187[0m[31m -15[0m: test/conformance/commit_before_body_test.dart: Commit binds paired reader and activates suspended goals[0m                                                                                00:01 [32m+187[0m[31m -15[0m: [1m[90mloading test/conformance/fifo_wake_test.dart[0m[0m                                                                                                                                           00:01 [32m+187[0m[31m -15[0m: test/conformance/fifo_wake_test.dart: FIFO wake on single RO queue[0m                                                                                                                     00:01 [32m+188[0m[31m -15[0m: test/conformance/fifo_wake_test.dart: FIFO wake on single RO queue[0m                                                                                                                     00:01 [32m+188[0m[31m -15[0m: [1m[90mloading test/conformance/single_reactivation_test.dart[0m[0m                                                                                                                                 00:01 [32m+188[0m[31m -15[0m: test/conformance/single_reactivation_test.dart: Single reactivation with one hanger registered on two readers[0m                                                                          00:01 [32m+189[0m[31m -15[0m: test/conformance/abandon_immediate_fail_test.dart: Abandon(X!) immediately wakes readers FIFO; writer marked abandoned[0m                                                                 00:01 [32m+190[0m[31m -15[0m: test/conformance/abandon_immediate_fail_test.dart: Abandon(X!) immediately wakes readers FIFO; writer marked abandoned[0m                                                                 00:01 [32m+190[0m[31m -15[0m: [1m[90mloading test/conformance/restart_clause1_test.dart[0m[0m                                                                                                                                     00:01 [32m+190[0m[31m -15[0m: test/conformance/restart_clause1_test.dart: On wake, activation pc equals kappa (restart at clause 1)[0m                                                                                  00:01 [32m+191[0m[31m -15[0m: test/conformance/restart_clause1_test.dart: On wake, activation pc equals kappa (restart at clause 1)[0m                                                                                  00:01 [32m+191[0m[31m -15[0m: [31mSome tests failed.[0m                                                                                                                                                                     

Consider enabling the flag chain-stack-traces to receive more detailed exceptions.
For example, 'dart test --chain-stack-traces'.
